# ๐ ุฏููู ุชูุนูู Realtime ูู Supabase

## ูุธุฑุฉ ุนุงูุฉ

ูุฐุง ุงูุฏููู ููุถุญ ููููุฉ ุชูุนูู Supabase Realtime (Postgres Changes) ุนูู ุงูุฌุฏุงูู ุงููุทููุจุฉ ููุธุงู ุงูุชุญุฏูุซ ุงูุชููุงุฆู.

---

## โ๏ธ ููุงุญุธุฉ ูููุฉ

**ุตูุญุฉ "Replication" ูู Supabase Dashboard ูู ููุณุฎ ุงูุจูุงูุงุช ุงูุฎุงุฑุฌู (External Replication) ูููุณุช ูุชูุนูู Realtime.**

ุชูุนูู Realtime ูุชู ูู **Publications** ุฃู ูู **SQL Editor**.

---

## ๐ ุงูุทุฑููุฉ ุงูุตุญูุญุฉ: ุงุณุชุฎุฏุงู SQL Editor (ุงูุฃุณูู ูุงูุฃุณุฑุน)

### ุงูุฎุทูุฉ 1: ุงููุตูู ุฅูู SQL Editor

1. ุงุฐูุจ ุฅูู [Supabase Dashboard](https://app.supabase.com)
2. ุณุฌูู ุงูุฏุฎูู ุจุญุณุงุจู
3. ุงุฎุชุฑ ุงููุดุฑูุน (Project) ุงูุฎุงุต ุจู
4. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉุ ุงุถุบุท ุนูู **"SQL Editor"**

**ุงููุณุงุฑ:**
```
Dashboard โ SQL Editor
```

### ุงูุฎุทูุฉ 2: ุชุดุบูู ุงูุณูุฑูุจุช

1. ุงุถุบุท ุนูู **"New query"** ุฃู **"+"** ูุฅูุดุงุก ุงุณุชุนูุงู ุฌุฏูุฏ
2. ุงูุชุญ ููู `scripts/enable_realtime_tables.sql` ูู ุงููุดุฑูุน
3. ุงูุณุฎ **ุฌููุน** ุงููุญุชูู (Ctrl+A ุซู Ctrl+C)
4. ุงูุตูู ูู SQL Editor (Ctrl+V)
5. ุงุถุบุท **"Run"** ุฃู `Ctrl+Enter`

### ุงูุฎุทูุฉ 3: ุงูุชุญูู ูู ุงููุชูุฌุฉ

ูุฌุจ ุฃู ุชุฑู ุฑุณุงุฆู ูุฌุงุญ ูุซู:
```
โ Added inventory_write_offs to realtime
โ Added notifications to realtime
```

---

## ๐ ุงูุทุฑููุฉ ุงูุจุฏููุฉ: ูู Publications (ุฅู ูุฌุฏุช)

### ุงูุฎุทูุฉ 1: ุงููุตูู ุฅูู Publications

1. ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ: **Database**
2. ูู ุงููุงุฆูุฉ ุงููุฑุนูุฉ: **Publications** (ูุฏ ูููู ุชุญุช "Database Management")

**ุงููุณุงุฑ:**
```
Dashboard โ Database โ Publications
```

### ุงูุฎุทูุฉ 2: ุชูุนูู ุงูุฌุฏุงูู

1. ุงุจุญุซ ุนู publication ุจุงุณู `supabase_realtime`
2. ุงุถุบุท ุนููู
3. ุณุชุฌุฏ ูุงุฆูุฉ ุจุงูุฌุฏุงูู
4. ูุนูู ุงูุฌุฏุงูู ุงููุทููุจุฉ

---

---

## ๐ ุงูุฌุฏุงูู ุงููุทููุจุฉ ููุชูุนูู

| ุงูุฌุฏูู | ุงูุญุงูุฉ | ุงูุฃููููุฉ |
|--------|--------|----------|
| โ `notifications` | **ูุทููุจ** | โญโญโญโญโญ (ูุนูู ุญุงููุงู) |
| โณ `inventory_write_offs` | **ูุทููุจ** | โญโญโญโญโญ (ููุฅููุงู) |
| โณ `inventory_transactions` | **ูุทููุจ** | โญโญโญโญ (ูููุฎุฒูู) |
| โณ `purchase_orders` | **ูุทููุจ** | โญโญโญโญ (ูุฃูุงูุฑ ุงูุดุฑุงุก) |
| โณ `sales_orders` | **ูุทููุจ** | โญโญโญโญ (ูุฃูุงูุฑ ุงูุจูุน) |
| โณ `invoices` | **ูุทููุจ** | โญโญโญโญ (ููููุงุชูุฑ) |
| โณ `approval_workflows` | **ูุทููุจ** | โญโญโญ (ููููุงููุงุช) |

---

## โ ุงูุชุญูู ูู ุงูุชูุนูู

ุจุนุฏ ุชุดุบูู ุงูุณูุฑูุจุชุ ููููู ุงูุชุญูู ุจุงุณุชุฎุฏุงู SQL:

```sql
-- ุงูุชุญูู ูู ุงูุฌุฏุงูู ุงูููุนูุฉ
SELECT tablename 
FROM pg_publication_tables 
WHERE pubname = 'supabase_realtime' 
  AND schemaname = 'public'
  AND tablename IN (
    'notifications',
    'inventory_write_offs',
    'inventory_transactions',
    'purchase_orders',
    'sales_orders',
    'invoices',
    'approval_workflows'
  )
ORDER BY tablename;
```

ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุจุงูุฌุฏุงูู ุงูููุนูุฉ.

---

## ๐ฏ ุชูุนูู ุณุฑูุน ููุฌุฏุงูู ุงูุฃุณุงุณูุฉ

### ููุจุฏุก ุงูุณุฑูุน (ุงูุญุฏ ุงูุฃุฏูู):

ูุนูู ูุฐู ุงูุฌุฏุงูู ุฃููุงู:

1. โ **notifications** - ุงูุฅุดุนุงุฑุงุช (ููุนูู ุจุงููุนู)
2. โ **inventory_write_offs** - ุงูุฅููุงู (ูุทููุจ ุงูุขู)

### ููุชุทุจูู ุงููุงูู:

ูุนูู ุฌููุน ุงูุฌุฏุงูู ุงููุฐููุฑุฉ ุฃุนูุงู.

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

### 1. ุงูุชุฃุซูุฑ ุนูู ุงูุฃุฏุงุก

- ุชูุนูู Realtime ุนูู ุฌุฏูู ูุนูู ุฃู Supabase ุณูุฑุงูุจ ุฌููุน ุงูุชุบููุฑุงุช
- ูุฐุง ูุฏ ูุคุซุฑ ููููุงู ุนูู ุงูุฃุฏุงุกุ ูููู ุถุฑูุฑู ูููุธุงู
- ุงูุฌุฏุงูู ุงููุจูุฑุฉ ุฌุฏุงู ูุฏ ุชุญุชุงุฌ ุฅูู ุชุญุณููุงุช ุฅุถุงููุฉ

### 2. ุงูุฃูุงู

- Realtime ูุนูู ูุน Row Level Security (RLS) Policies
- ุชุฃูุฏ ูู ุฃู RLS Policies ููุนููุฉ ุนูู ุงูุฌุฏุงูู
- ุงููุธุงู ูุณุชุฎุฏู ููุงุชุฑ ุงููุตูู ุงููุฏูุฌุฉ

### 3. ุงูุชูููุฉ

- Realtime ูุฌุงูู ูู ุงูุฎุทุฉ ุงููุฌุงููุฉ (Free Tier)
- ูู ุงูุฎุทุท ุงููุฏููุนุฉุ ูุฏ ูููู ููุงู ุญุฏูุฏ ุนูู ุนุฏุฏ ุงูุงุชุตุงูุงุช
- ุฑุงุฌุน ุฎุทุฉ Supabase ุงูุฎุงุตุฉ ุจู

---

## ๐ ุงูุชุญูู ูู ุงูุชูุนูู

### ุทุฑููุฉ 1: ูู Dashboard

1. ุงุฐูุจ ุฅูู **Database โ Replication**
2. ุชุญูู ูู ุฃู ููุชุงุญ ุงูุชุจุฏูู **ON** ููุฌุฏุงูู ุงููุทููุจุฉ

### ุทุฑููุฉ 2: ูู SQL Editor

ููููู ุงูุชุญูู ูู ุญุงูุฉ Realtime ุจุงุณุชุฎุฏุงู SQL:

```sql
-- ุงูุชุญูู ูู ุงูุฌุฏุงูู ุงูููุนูุฉ
SELECT 
  schemaname,
  tablename,
  CASE 
    WHEN EXISTS (
      SELECT 1 
      FROM pg_publication_tables 
      WHERE pubname = 'supabase_realtime' 
      AND schemaname = 'public' 
      AND tablename = t.tablename
    ) THEN 'Enabled'
    ELSE 'Disabled'
  END as realtime_status
FROM pg_tables t
WHERE schemaname = 'public'
  AND tablename IN (
    'notifications',
    'inventory_write_offs',
    'inventory_transactions',
    'purchase_orders',
    'sales_orders',
    'invoices',
    'approval_workflows'
  )
ORDER BY tablename;
```

---

## ๐จ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุฃุฑู ุฎูุงุฑ Realtime

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃูู ูู ุงููุดุฑูุน ุงูุตุญูุญ
- ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู Supabase Pro ุฃู ุฃุนูู (Realtime ูุชุงุญ ูู ุฌููุน ุงูุฎุทุท)
- ุฌุฑุจ ุชุญุฏูุซ ุงูุตูุญุฉ

### ุงููุดููุฉ: ููุชุงุญ ุงูุชุจุฏูู ูุง ูุนูู

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ูุฏูู ุตูุงุญูุงุช ุฅุฏุงุฑูุฉ
- ุชุญูู ูู ุฃู ุงูุฌุฏูู ููุฌูุฏ
- ุฌุฑุจ ูู ูุชุตูุญ ุขุฎุฑ

### ุงููุดููุฉ: Realtime ููุนูู ููู ูุง ูุนูู

**ุงูุญู:**
1. ุชุญูู ูู RLS Policies
2. ุชุญูู ูู ุฃู ุงูุฌุฏูู ูุญุชูู ุนูู ุจูุงูุงุช
3. ุชุญูู ูู Console ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุฃู Supabase Realtime Service ูุนูู

---

## โ ูุงุฆูุฉ ุงูุชุญูู

ุจุนุฏ ุงูุชูุนููุ ุชุฃูุฏ ูู:

- [ ] `notifications` - ููุนูู โ
- [ ] `inventory_write_offs` - ููุนูู
- [ ] `inventory_transactions` - ููุนูู (ุงุฎุชูุงุฑู ุงูุขู)
- [ ] `purchase_orders` - ููุนูู (ุงุฎุชูุงุฑู ุงูุขู)
- [ ] `sales_orders` - ููุนูู (ุงุฎุชูุงุฑู ุงูุขู)
- [ ] `invoices` - ููุนูู (ุงุฎุชูุงุฑู ุงูุขู)
- [ ] `approval_workflows` - ููุนูู (ุงุฎุชูุงุฑู ุงูุขู)

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุชูุนูู Realtime:

1. โ **ุงุฎุชุจุงุฑ ุงููุธุงู:**
   - ุงูุชุญ ุตูุญุฉ ุงูุฅููุงู
   - ุฃูุดุฆ ุฃู ุนุฏูู ุฅููุงู
   - ุชุญูู ูู ุงูุชุญุฏูุซ ุงูููุฑู

2. โ **ูุฑุงูุจุฉ ุงูุฃุฏุงุก:**
   - ุฑุงูุจ Console ููุฃุฎุทุงุก
   - ุชุญูู ูู ุฃู ุงูุชุญุฏูุซุงุช ุชุญุฏุซ ููุฑุงู
   - ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ุชูุฑุงุฑ

3. โ **ุชุทุจูู ุนูู ุจุงูู ุงูุตูุญุงุช:**
   - ุงุณุชุฎุฏู `useRealtimeTable` ูู ุงูุตูุญุงุช ุงูุฃุฎุฑู
   - ุฑุงุฌุน `REALTIME_IMPLEMENTATION_GUIDE.md`

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชูุนูู Realtime ูู Supabase ุจุณูุท ุฌุฏุงู:

1. Dashboard โ Database โ Replication
2. ูุนูู ููุชุงุญ ุงูุชุจุฏูู ููุฌุฏุงูู ุงููุทููุจุฉ
3. ุงูุชูู! โ

**ุงูููุช ุงููุชููุน:** 2-3 ุฏูุงุฆู

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู:

1. ุฑุงุฌุน [Supabase Realtime Documentation](https://supabase.com/docs/guides/realtime)
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ุฑุงุฌุน ูููุงุช ุงูุชูุซูู ูู ุงููุดุฑูุน

---

**โ ุจุนุฏ ุงูุชูุนููุ ุงููุธุงู ุณูุนูู ุชููุงุฆูุงู ุจุฏูู ุฃู ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ!**
