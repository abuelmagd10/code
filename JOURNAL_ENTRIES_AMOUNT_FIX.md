# โ ุฅุตูุงุญ ูุดููุฉ ุนุฑุถ ุงููุจูุบ ูู ูุงุฆูุฉ ุงููููุฏ
# Journal Entries Amount Display Fix

**ุชุงุฑูุฎ ุงูุฅุตูุงุญ:** 2026-01-05  
**ุงูุญุงูุฉ:** โ **ุชู ุงูุฅุตูุงุญ**

---

## ๐ด ุงููุดููุฉ

ูู ุตูุญุฉ ูุงุฆูุฉ ุงููููุฏ ุงููุญุงุณุจูุฉ (`/journal-entries`):
- ุนููุฏ "ุงููุจูุบ" ูุงู ูุนุฑุถ **0.00 ยฃ** ูุฌููุน ุงููููุฏ
- ุงููููุฏ ูู ููุน `capital_contribution` ูุง ุชุธูุฑ ุงููุจุงูุบ ุงูุตุญูุญุฉ
- ูุซุงู: ููุฏ 60,000 ู 40,000 ูุธูุฑุงู ูู 0.00 ยฃ

---

## โ ุงูุฅุตูุงุญ

### 1. ุชุญุณูู ููุทู API (`app/api/journal-amounts/route.ts`)

**ุงูุชุบููุฑุงุช:**
- ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูุญุณุงุจ ููููู ุฃูุซุฑ ูุถูุญุงู
- ูููููุฏ ุงููุชูุงุฒูุฉ (debit = credit)ุ ูุนูุฏ `Math.max(debit, credit)` ููููุฉ ููุนุฑุถ
- ุชุญุณูู ูุนุงูุฌุฉ ุงููููุฏ ุงูุชู ุชุญุชูู ุนูู cash/bank

**ุงูููุฏ ุงููุนุฏู:**
```typescript
// ูููููุฏ ุงููุชูุงุฒูุฉ (debit = credit)
if (Math.abs(netAmount) < 0.01) {
  const actualAmount = Math.max(debit, credit)
  return {
    journal_entry_id: eid,
    amount: actualAmount,  // Display amount - ูุฌุจ ุฃู ูููู > 0
    net_amount: 0,         // Net difference (semantic meaning)
    basis: 'balanced'
  }
}
```

### 2. ุฅุถุงูุฉ Fallback ูู ุงููุงุฌูุฉ (`app/journal-entries/page.tsx`)

**ุงูุชุบููุฑุงุช:**
- ุฅุฐุง ูุงู API ูุนูุฏ 0ุ ูุชู ุญุณุงุจ ุงููุจูุบ ูุจุงุดุฑุฉ ูู `debitCreditById`
- ูุถูู ุนุฑุถ ุงููุจูุบ ุฏุงุฆูุงู ุญุชู ูู ูุดู API

**ุงูููุฏ ุงููุถุงู:**
```typescript
// Fallback: ุฅุฐุง ูุงู ุงููุจูุบ 0ุ ุงุญุณุจู ูู debitCreditById
if (amt === 0 && debitCreditById[entry.id]) {
  const dc = debitCreditById[entry.id]
  const debit = dc.debit || 0
  const credit = dc.credit || 0
  // ูููููุฏ ุงููุชูุงุฒูุฉุ ุงุนุฑุถ ุงููุจูุบ ุงูุฃูุจุฑ
  if (Math.abs(debit - credit) < 0.01) {
    amt = Math.max(debit, credit)
  } else {
    amt = debit - credit
  }
}
```

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### ุงูุฎุทูุงุช:
1. ุงูุชุญ ุตูุญุฉ ูุงุฆูุฉ ุงููููุฏ: https://7esab.com/journal-entries
2. ุชุฃูุฏ ูู ุฃูู ูู ุดุฑูุฉ "ุชุณุช"
3. ุชุญูู ูู ุนููุฏ "ุงููุจูุบ"

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- โ ุงูููุฏ ุงูุฃูู (60,000): ูุฌุจ ุฃู ูุธูุฑ **60,000.00 ยฃ**
- โ ุงูููุฏ ุงูุซุงูู (40,000): ูุฌุจ ุฃู ูุธูุฑ **40,000.00 ยฃ**
- โ ุฌููุน ุงููููุฏ ุงูุฃุฎุฑู: ูุฌุจ ุฃู ุชุธูุฑ ุงููุจุงูุบ ุงูุตุญูุญุฉ

---

## ๐ Checklist ุงูุงุฎุชุจุงุฑ

- [ ] โ ูุชุญ ุตูุญุฉ `/journal-entries`
- [ ] โ ุงูุชุญูู ูู ุดุฑูุฉ "ุชุณุช"
- [ ] โ ุงูุชุญูู ูู ุนููุฏ "ุงููุจูุบ" ูุนุฑุถ ุงููุจุงูุบ ุงูุตุญูุญุฉ
- [ ] โ ุงูุชุญูู ูู ุงููููุฏ ูู ููุน `capital_contribution`
- [ ] โ ุงูุชุญูู ูู ุงููููุฏ ุงูุฃุฎุฑู

---

## ๐ง ุฅุฐุง ูู ูุนูู ุงูุฅุตูุงุญ

### 1. ูุณุญ Cache ุงููุชุตูุญ
- ุงุถุบุท Ctrl+F5 (Hard Refresh)
- ุฃู ุงูุณุญ Cache ุงููุชุตูุญ

### 2. ุงูุชุญูู ูู Console
- ุงูุชุญ Developer Tools (F12)
- ุชุญูู ูู ุฃู ุฃุฎุทุงุก ูู Console
- ุชุญูู ูู Network tab - ุงุณุชุฏุนุงุก `/api/journal-amounts`

### 3. ุงูุชุญูู ูู ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ุฃู ุงููููุฏ ููุฌูุฏุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุฃูุฏ ูู ุฃู `journal_entry_lines` ููุฌูุฏุฉ

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

1. โ `app/api/journal-amounts/route.ts` - ุชุญุณูู ููุทู ุญุณุงุจ ุงููุจูุบ
2. โ `app/journal-entries/page.tsx` - ุฅุถุงูุฉ Fallback ููุนุฑุถ

---

## ๐ ุงููุฑุงุฑ

### โ **ุชู ุงูุฅุตูุงุญ**

**ุงูุญุงูุฉ:**
- โ ููุทู API ูุญุณูู
- โ Fallback ูุถุงู ูู ุงููุงุฌูุฉ
- โ ุฌุงูุฒ ููุงุฎุชุจุงุฑ ุนูู ุงููููุน ุงููุนูู

**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุงุฎุชุจุฑ ุนูู https://7esab.com/journal-entries

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-05  
**ุงูุญุงูุฉ:** โ **ุชู ุงูุฅุตูุงุญ - ุฌุงูุฒ ููุงุฎุชุจุงุฑ**

