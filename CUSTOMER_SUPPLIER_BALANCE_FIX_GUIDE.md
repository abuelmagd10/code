# ุฏููู ุชุตุญูุญ ุงูุฐูู ูุงูุฑุตูุฏ ููุนููุงุก ูุงูููุฑุฏูู
## ูุทุงุจู ูููุท Zoho Books ุงููุญุงุณุจู

### ๐ ููุฎุต ุงูุชุบููุฑุงุช

ุชู ุชุตุญูุญ ุทุฑููุฉ ุญุณุงุจ ุงูุฐูู ุงููุฏููุฉ ูุงูุฏุงุฆูุฉ ูุชููู ูุทุงุจูุฉ 100% ูููุท **Zoho Books** ุงููุญุงุณุจูุ ุญูุซ ูุชู ุงูุญุณุงุจ ูู **ุงููููุฏ ุงููุญุงุณุจูุฉ** ุจุฏูุงู ูู ุงูููุงุชูุฑ ูุจุงุดุฑุฉ.

---

## ๐ฏ ุงููุดููุฉ ุงูุฃุตููุฉ

### ูุจู ุงูุชุตุญูุญ:
- **ุงูุฐูู ุงููุฏููุฉ (ุงูุนููุงุก)**: ูุงูุช ุชูุญุณุจ ูู `invoices.total_amount - invoices.paid_amount`
- **ุงูุฐูู ุงูุฏุงุฆูุฉ (ุงูููุฑุฏูู)**: ูุงูุช ุชูุญุณุจ ูู `bills.total_amount - bills.paid_amount`

### ุงููุดููุฉ:
ูุฐู ุงูุทุฑููุฉ **ูุง ุชุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ ุงููุนููุฉ** ููุฏ ุชุคุฏู ุฅูู:
- ุนุฏู ุชุทุงุจู ุงูุฃุฑุตุฏุฉ ูุน ููุฒุงู ุงููุฑุงุฌุนุฉ (Trial Balance)
- ุนุฏู ุงุญุชุณุงุจ ุงููุฑุชุฌุนุงุช ูุงูุชุนุฏููุงุช ุจุดูู ุตุญูุญ
- ุนุฏู ุงูุชูุงูู ูุน ูุธุงู ุงููุญุงุณุจุฉ ุนูู ุฃุณุงุณ ุงูุงุณุชุญูุงู (Accrual Accounting)

---

## โ ุงูุญู ุงููุทุจู (Zoho Books Pattern)

### ุจุนุฏ ุงูุชุตุญูุญ:
- **ุงูุฐูู ุงููุฏููุฉ**: ุชูุญุณุจ ูู ุญุณุงุจ **Accounts Receivable** ูู ุงููููุฏ ุงููุญุงุณุจูุฉ
  - ุงูุฑุตูุฏ = (ูุฌููุน ุงููุฏูู - ูุฌููุน ุงูุฏุงุฆู) ูุญุณุงุจ AR
- **ุงูุฐูู ุงูุฏุงุฆูุฉ**: ุชูุญุณุจ ูู ุญุณุงุจ **Accounts Payable** ูู ุงููููุฏ ุงููุญุงุณุจูุฉ
  - ุงูุฑุตูุฏ = (ูุฌููุน ุงูุฏุงุฆู - ูุฌููุน ุงููุฏูู) ูุญุณุงุจ AP

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ

### 1. **scripts/400_customer_supplier_balance_from_ledger.sql**
ููู SQL ุฌุฏูุฏ ูุญุชูู ุนูู:

#### ุงูุฏูุงู ุงููุถุงูุฉ:
- `get_customer_receivables_from_ledger(company_id, customer_id)` - ุญุณุงุจ ุงูุฐูู ุงููุฏููุฉ ูู ุงููููุฏ
- `get_supplier_payables_from_ledger(company_id, supplier_id)` - ุญุณุงุจ ุงูุฐูู ุงูุฏุงุฆูุฉ ูู ุงููููุฏ
- `verify_receivables_payables_integrity(company_id)` - ุงูุชุญูู ูู ุชุทุงุจู ุงูุฐูู ุจูู ุงูููุงุชูุฑ ูุงููููุฏ

### 2. **app/customers/page.tsx**
- ุชู ุชุนุฏูู ุฏุงูุฉ `loadCustomers()` ูุญุณุงุจ ุงูุฐูู ูู ุงููููุฏ ุงููุญุงุณุจูุฉ
- ูุชู ุฌูุจ ุญุณุงุจ AR ุฃููุงูุ ุซู ุญุณุงุจ ุฑุตูุฏ ูู ุนููู ูู ุงููููุฏ
- ููุฌุฏ Fallback ููุทุฑููุฉ ุงููุฏููุฉ ุฅุฐุง ูู ููุฌุฏ ุญุณุงุจ AR

### 3. **app/suppliers/page.tsx**
- ุชู ุชุนุฏูู ุฏุงูุฉ `loadSupplierBalances()` ูุญุณุงุจ ุงูุฐูู ูู ุงููููุฏ ุงููุญุงุณุจูุฉ
- ูุชู ุฌูุจ ุญุณุงุจ AP ุฃููุงูุ ุซู ุญุณุงุจ ุฑุตูุฏ ูู ููุฑุฏ ูู ุงููููุฏ
- ููุฌุฏ Fallback ููุทุฑููุฉ ุงููุฏููุฉ ุฅุฐุง ูู ููุฌุฏ ุญุณุงุจ AP

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### 1. ุชุดุบูู ุณูุฑูุจุช SQL
```sql
-- ูู Supabase SQL Editor
\i scripts/400_customer_supplier_balance_from_ledger.sql
```

### 2. ุงูุชุญูู ูู ูุฌูุฏ ุงูุญุณุงุจุงุช ุงููุทููุจุฉ
```sql
-- ุงูุชุญูู ูู ุญุณุงุจ Accounts Receivable
SELECT id, account_code, account_name, sub_type 
FROM chart_of_accounts 
WHERE sub_type = 'accounts_receivable' AND is_active = true;

-- ุงูุชุญูู ูู ุญุณุงุจ Accounts Payable
SELECT id, account_code, account_name, sub_type 
FROM chart_of_accounts 
WHERE sub_type = 'accounts_payable' AND is_active = true;
```

### 3. ุงุฎุชุจุงุฑ ุงูุฏูุงู ุงูุฌุฏูุฏุฉ
```sql
-- ุนุฑุถ ุงูุฐูู ุงููุฏููุฉ ูุฌููุน ุงูุนููุงุก
SELECT * FROM get_customer_receivables_from_ledger('YOUR_COMPANY_ID');

-- ุนุฑุถ ุงูุฐูู ุงูุฏุงุฆูุฉ ูุฌููุน ุงูููุฑุฏูู
SELECT * FROM get_supplier_payables_from_ledger('YOUR_COMPANY_ID');

-- ุงูุชุญูู ูู ุงูุชุทุงุจู
SELECT * FROM verify_receivables_payables_integrity('YOUR_COMPANY_ID');
```

---

## ๐ ุงูุชุญูู ูู ุงูุชุทุงุจู

### ุงุณุชุฎุฏุงู ุฏุงูุฉ ุงูุชุญูู:
```sql
SELECT * FROM verify_receivables_payables_integrity('YOUR_COMPANY_ID');
```

### ุงููุชูุฌุฉ ุงููุชููุนุฉ:
- ุฅุฐุง ูุงูุช ุฌููุน ุงูุญุงูุงุช `โ ูุชุทุงุจู` - ุงููุธุงู ูุนูู ุจุดูู ุตุญูุญ
- ุฅุฐุง ุธูุฑุช ุญุงูุงุช `โ ุบูุฑ ูุชุทุงุจู` - ูุฌุจ ูุฑุงุฌุนุฉ ุงููููุฏ ุงููุญุงุณุจูุฉ

---

## ๐ ููุท Zoho Books ุงููุญุงุณุจู

### ุงููููุฏ ุงููุญุงุณุจูุฉ ููููุงุชูุฑ:

#### 1. ูุงุชูุฑุฉ ูุจูุนุงุช (Invoice):
```
Dr: Accounts Receivable (ุฐูู ูุฏููุฉ)
Cr: Sales Revenue (ุฅูุฑุงุฏุงุช ุงููุจูุนุงุช)
Cr: VAT Output (ุถุฑูุจุฉ ูุฎุฑุฌุงุช) - ุฅู ูุฌุฏุช
```

#### 2. ุงุณุชูุงู ุฏูุนุฉ (Payment Received):
```
Dr: Cash/Bank (ููุฏูุฉ/ุจูู)
Cr: Accounts Receivable (ุฐูู ูุฏููุฉ)
```

#### 3. ูุงุชูุฑุฉ ูุดุชุฑูุงุช (Bill):
```
Dr: Inventory (ุงููุฎุฒูู) - ููููุชุฌุงุช
Dr: VAT Input (ุถุฑูุจุฉ ูุฏุฎูุงุช) - ุฅู ูุฌุฏุช
Cr: Accounts Payable (ุฐูู ุฏุงุฆูุฉ)
```

#### 4. ุฏูุน ูุงุชูุฑุฉ ูุดุชุฑูุงุช (Bill Payment):
```
Dr: Accounts Payable (ุฐูู ุฏุงุฆูุฉ)
Cr: Cash/Bank (ููุฏูุฉ/ุจูู)
```

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงูุชูุงูู ูุน ูุธุงู ุงูุงุณุชุญูุงู**: ูุฐุง ุงูุชุตุญูุญ ูุชุทูุจ ุฃู ูููู ุงููุธุงู ูุนูู ุจููุท ุงููุญุงุณุจุฉ ุนูู ุฃุณุงุณ ุงูุงุณุชุญูุงู
2. **ุงููููุฏ ุงููุญุงุณุจูุฉ**: ูุฌุจ ุฃู ุชููู ุฌููุน ุงูููุงุชูุฑ ููุง ูููุฏ ูุญุงุณุจูุฉ ูุณุฌูุฉ
3. **Fallback**: ุฅุฐุง ูู ุชูุฌุฏ ุญุณุงุจุงุช AR/APุ ุณูุณุชุฎุฏู ุงููุธุงู ุงูุทุฑููุฉ ุงููุฏููุฉ ุชููุงุฆูุงู
4. **ุงูุฃุฏุงุก**: ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ ูุฏ ุชููู ุฃุจุทุฃ ููููุงู ูุฃููุง ุชุญุณุจ ูู ุงููููุฏุ ููููุง ุฃูุซุฑ ุฏูุฉ

---

## ๐ ุงูููุงุฆุฏ

โ **ุฏูุฉ ูุญุงุณุจูุฉ 100%**: ุงูุฃุฑุตุฏุฉ ุชุทุงุจู ููุฒุงู ุงููุฑุงุฌุนุฉ  
โ **ุชูุงูู ูุน Zoho Books**: ููุณ ุงูููุท ุงููุญุงุณุจู  
โ **ุงุญุชุณุงุจ ุงููุฑุชุฌุนุงุช**: ูุชู ุงุญุชุณุงุจูุง ุชููุงุฆูุงู ูู ุงููููุฏ  
โ **ูุธุงู ุงูุงุณุชุญูุงู**: ูุชูุงูู ุชูุงูุงู ูุน Accrual Accounting  
โ **ูุงุจููุฉ ุงูุชุฏููู**: ูููู ุชุชุจุน ูู ุฑุตูุฏ ุฅูู ูููุฏู ุงููุญุงุณุจูุฉ

