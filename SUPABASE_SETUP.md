# إعداد Supabase للمشروع

## المشكلة الحالية

إذا كنت ترى رسالة خطأ تقول "حدث خطأ في التطبيق" عند فتح صفحات أوامر البيع أو الفواتير، فهذا يعني أن إعدادات Supabase غير مكتملة أو تحتوي على قيم وهمية.

## الحل

### 1. إنشاء مشروع Supabase جديد

1. اذهب إلى [Supabase Dashboard](https://supabase.com/dashboard)
2. قم بإنشاء حساب جديد أو تسجيل الدخول
3. انقر على "New Project"
4. اختر منظمة أو أنشئ واحدة جديدة
5. أدخل اسم المشروع وكلمة مرور قاعدة البيانات
6. اختر المنطقة الأقرب لك
7. انقر على "Create new project"

### 2. الحصول على مفاتيح API

بعد إنشاء المشروع:

1. اذهب إلى Settings > API في لوحة تحكم Supabase
2. ستجد المعلومات التالية:
   - **Project URL**: يبدأ بـ `https://` وينتهي بـ `.supabase.co`
   - **anon public key**: مفتاح طويل يبدأ عادة بـ `eyJ`
   - **service_role key**: مفتاح آخر طويل (احتفظ به سرياً)

### 3. تحديث ملف البيئة

1. انسخ ملف `.env.example` إلى `.env.local`:
   ```bash
   cp .env.example .env.local
   ```

2. افتح ملف `.env.local` وحدث القيم:
   ```env
   NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
   NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
   SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
   ```

3. احفظ الملف

### 4. إعادة تشغيل الخادم

```bash
npm run dev
# أو
yarn dev
```

## التحقق من الإعداد

بعد تحديث الإعدادات وإعادة تشغيل الخادم، يجب أن تعمل الصفحات بشكل طبيعي. إذا استمرت المشكلة:

1. تأكد من صحة المفاتيح المنسوخة
2. تأكد من عدم وجود مسافات إضافية في بداية أو نهاية المفاتيح
3. تأكد من أن المشروع في Supabase يعمل بشكل صحيح

## إعداد قاعدة البيانات

بعد إعداد الاتصال، ستحتاج إلى:

1. تشغيل SQL scripts الموجودة في مجلد `scripts/`
2. إعداد الجداول والصلاحيات
3. إدخال البيانات الأساسية

## الدعم

إذا واجهت مشاكل في الإعداد، يرجى:

1. التحقق من console المتصفح للأخطاء
2. التحقق من logs الخادم
3. التأكد من أن مشروع Supabase يعمل في لوحة التحكم