# ๐ ุฅุนุฏุงุฏ Real-Time Notifications

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ ูุธุงู Real-Time Notifications ุจุงุณุชุฎุฏุงู Supabase Realtime ูุนุฑุถ ุงูุฅุดุนุงุฑุงุช ุงูุฌุฏูุฏุฉ ููุฑุงู ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ.

## โ ุงูููุฒุงุช ุงููุถุงูุฉ

1. **ุชุญุฏูุซ ููุฑู ููุฅุดุนุงุฑุงุช**: ุนูุฏ ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏุ ูุธูุฑ ุชููุงุฆูุงู ูู NotificationCenter
2. **ุชุญุฏูุซ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ**: ูุชู ุชุญุฏูุซ Badge ุนูู ุฃููููุฉ ุงูุฌุฑุณ ุชููุงุฆูุงู
3. **ููุชุฑุฉ ุชููุงุฆูุฉ**: ูุชู ุงุญุชุฑุงู ุงูููุชุฑุฉ ุญุณุจ ุงูุฏูุฑุ ุงููุฑุนุ ูุงููุฎุฒู
4. **ูุนุงูุฌุฉ ุฌููุน ุงูุฃุญุฏุงุซ**: INSERT, UPDATE, DELETE

## ๐ง ุงูุฅุนุฏุงุฏ ุงููุทููุจ

### 1. ุชูุนูู Supabase Realtime

ูู Supabase Dashboard:

1. ุงุฐูุจ ุฅูู **Database** โ **Replication**
2. ุงุจุญุซ ุนู ุฌุฏูู `notifications`
3. ูุนูู **Realtime** ููุฌุฏูู

ุฃู ุดุบูู ูุฐุง SQL ูู Supabase SQL Editor:

```sql
-- ุชูุนูู Realtime ูุฌุฏูู notifications
ALTER PUBLICATION supabase_realtime ADD TABLE notifications;
```

### 2. ุงูุชุญูู ูู RLS Policies

ุชุฃูุฏ ูู ุฃู RLS policies ููุฌูุฏุฉ ูุตุญูุญุฉ:

```sql
-- ุงูุชุญูู ูู ูุฌูุฏ RLS policies
SELECT * FROM pg_policies 
WHERE tablename = 'notifications';
```

### 3. ุงุฎุชุจุงุฑ Real-Time

1. ุงูุชุญ ุตูุญุฉ ุงูุชุทุจูู
2. ุงูุชุญ Console ูู ุงููุชุตูุญ (F12)
3. ุงุจุญุซ ุนู:
   - `โ [REALTIME] Successfully subscribed to notifications`
   - `โ [SIDEBAR_REALTIME] Successfully subscribed to notification count updates`
4. ุฃูุดุฆ ุฅููุงู ุฌุฏูุฏ ูู ุญุณุงุจ ุขุฎุฑ
5. ูุฌุจ ุฃู ูุธูุฑ ุงูุฅุดุนุงุฑ ููุฑุงู ุจุฏูู ุฅุนุงุฏุฉ ุชุญููู

## ๐ ููููุฉ ุงูุนูู

### NotificationCenter
- ูุณุชูุน ููุชุบููุฑุงุช ูู ุฌุฏูู `notifications` ุญุณุจ `company_id`
- ุนูุฏ ุงุณุชูุจุงู INSERT/UPDATE: ูุนูุฏ ุชุญููู ุงูุฅุดุนุงุฑุงุช
- ุนูุฏ ุงุณุชูุจุงู DELETE: ูุฒูู ุงูุฅุดุนุงุฑ ูู ุงููุงุฆูุฉ ูุจุงุดุฑุฉ

### Sidebar
- ูุณุชูุน ููุชุบููุฑุงุช ูู ุฌุฏูู `notifications` ุญุณุจ `company_id`
- ุนูุฏ ุฃู ุชุบููุฑ: ูุนูุฏ ุญุณุงุจ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุบูุฑ ุงูููุฑูุกุฉ
- ูุชู ุงูุชุญูู ูู ุงูุฏูุฑ ูุงููุฑุน ุชููุงุฆูุงู ูู `getUnreadNotificationCount`

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชุธูุฑ ููุฑุงู

**ุงูุญู:**
1. ุชุญูู ูู ุฃู Realtime ููุนูู ูู Supabase Dashboard
2. ุชุญูู ูู Console ููุฃุฎุทุงุก
3. ุชุฃูุฏ ูู ุฃู RLS policies ุชุณูุญ ุจุงููุฑุงุกุฉ

### ุงููุดููุฉ: Channel Error

**ุงูุญู:**
1. ุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช
2. ุชุญูู ูู Supabase Realtime configuration
3. ุชุฃูุฏ ูู ุฃู ุฌุฏูู `notifications` ููุฌูุฏ

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ุชุธูุฑ ููู ูุง ูุชู ุชุญุฏูุซ ุงูุนุฏุฏ

**ุงูุญู:**
1. ุชุญูู ูู ุฃู `loadUnreadCount` ูุชู ุงุณุชุฏุนุงุคูุง
2. ุชุญูู ูู Console logs
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช ุงููุฑุงุกุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

- Realtime subscriptions ูุชู ุชูุธูููุง ุชููุงุฆูุงู ุนูุฏ ุฅูุบุงุก ุชุซุจูุช ุงููููู
- ุงูููุชุฑุฉ ุงููุงููุฉ (ุญุณุจ ุงูุฏูุฑุ ุงููุฑุนุ ุงููุฎุฒู) ุชุชู ูู `getUserNotifications`
- Realtime filter ูููุชุฑ ููุท ุญุณุจ `company_id` ููุฃุฏุงุก
- ุงูุชุญูู ุงููุงูู ูุชู ูู `loadNotifications` ู `getUnreadNotificationCount`
