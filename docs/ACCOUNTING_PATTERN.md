# ğŸ“Œ ERP Accounting & Inventory Core Logic
## (MANDATORY FINAL SPECIFICATION)

> **âš ï¸ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙ†Ø¯ Ù‡Ùˆ Ø§Ù„Ù…Ø±Ø¬Ø¹ Ø§Ù„ÙˆØ­ÙŠØ¯ Ù„Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ ÙˆØ§Ù„Ù…Ø®Ø²Ù†ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…ØŒ ÙˆØ£ÙŠ ØªÙ†ÙÙŠØ° ÙŠØ®Ø§Ù„ÙÙ‡ ÙŠÙØ¹ØªØ¨Ø± Ø®Ø·Ø£ Ø¬Ø³ÙŠÙ….**

---

## ğŸ”¹ Ø£ÙˆÙ„Ø§Ù‹: Sales Invoices (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¨ÙŠØ¹)

### 1ï¸âƒ£ Draft (Ù…Ø³ÙˆØ¯Ø©)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âŒ Ù„Ø§ |
| Ø­Ø±ÙƒØ© Ù…Ø®Ø²ÙˆÙ† | âŒ Ù„Ø§ |
| ØªØ¬Ù‡ÙŠØ² Ø¨ÙŠØ§Ù†Ø§Øª | âœ”ï¸ Ù†Ø¹Ù… |
| Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ¹Ø¯ÙŠÙ„ | âœ”ï¸ Ù†Ø¹Ù… |
| ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± | âŒ Ù„Ø§ |

### 2ï¸âƒ£ Sent / Confirmed (Ù…Ø±Ø³Ù„Ø© / Ù…Ù†ÙØ°Ø©)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Stock Out) | âœ”ï¸ ÙÙˆØ±ÙŠ |
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âŒ Ù„Ø§ |
| Ø­Ø±ÙƒØ© Ù…Ø®Ø²Ù†ÙŠØ© | âœ”ï¸ Ø¨Ø¯ÙˆÙ† Ø£Ø«Ø± Ù…Ø§Ù„ÙŠ |
| ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ØµÙ†Ø§Ù/Ø§Ù„ÙƒÙ…ÙŠØ§Øª | âŒ Ù…Ù…Ù†ÙˆØ¹ |

### 3ï¸âƒ£ Paid / Partially Paid (Ù…Ø¯ÙÙˆØ¹Ø©)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âœ”ï¸ Ù†Ø¹Ù… (Ø¹Ù†Ø¯ Ø§Ù„Ø¯ÙØ¹ ÙÙ‚Ø·) |
| Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | âŒ Ù…Ù…Ù†ÙˆØ¹ (ØªÙ… ÙÙŠ Sent) |
| ØªØ­Ø¯ÙŠØ« Ø°Ù…Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ | âœ”ï¸ Ù†Ø¹Ù… |

#### ğŸ“Š Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¯ÙØ¹ (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¨ÙŠØ¹):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ Ù‚ÙŠØ¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© - Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„):        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ reference_type: "invoice"                                       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Debit:  Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (AR)      â† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©              â”‚
â”‚ Credit: Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Revenue)       â† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯ (Ù…Ø¹ ÙƒÙ„ Ø¯ÙØ¹Ø© - Ø¨Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹):                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ reference_type: "invoice_payment"                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Debit:  Ø§Ù„Ù†Ù‚Ø¯/Ø§Ù„Ø¨Ù†Ùƒ (Cash)       â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹              â”‚
â”‚ Credit: Ø§Ù„Ø°Ù…Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© (AR)       â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“Œ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ:
```
ÙØ§ØªÙˆØ±Ø© INV-001 Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ 10,000 Ø¬Ù†ÙŠÙ‡
â”œâ”€â”€ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¯ÙØ¹Ø© (5,000 Ø¬Ù†ÙŠÙ‡):
â”‚   â”œâ”€â”€ Ù‚ÙŠØ¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: AR 10,000 / Revenue 10,000
â”‚   â””â”€â”€ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯: Cash 5,000 / AR 5,000
â”‚
â””â”€â”€ Ø¹Ù†Ø¯ Ø«Ø§Ù†ÙŠ Ø¯ÙØ¹Ø© (5,000 Ø¬Ù†ÙŠÙ‡):
    â””â”€â”€ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯ ÙÙ‚Ø·: Cash 5,000 / AR 5,000
```

### âŒ Ù…Ù…Ù†ÙˆØ¹ ØªÙ…Ø§Ù…Ø§Ù‹ ÙÙŠ ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¨ÙŠØ¹:
- Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¹Ù†Ø¯ Ø§Ù„Ø¯ÙØ¹
- Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù‚Ø¨Ù„ Ø§Ù„Ø¯ÙØ¹
- Ø±Ø¨Ø· Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ø§Ù„Ø³Ø¯Ø§Ø¯

---

## ğŸ”¹ Ø«Ø§Ù†ÙŠØ§Ù‹: Sales Returns (Ù…Ø±ØªØ¬Ø¹Ø§Øª ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø¨ÙŠØ¹)

### ğŸ” Ø´Ø±ÙˆØ· Ø¹Ø§Ù…Ø©
- âŒ Ù„Ø§ Ù…Ø±ØªØ¬Ø¹Ø§Øª Ø¹Ù„Ù‰ Draft
- âœ”ï¸ Ù…Ø³Ù…ÙˆØ­ ÙÙ‚Ø· Ø¹Ù„Ù‰: Sent, Paid, Partially Paid

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Sent (Ù…Ø±Ø³Ù„Ø© - ØºÙŠØ± Ù…Ø¯ÙÙˆØ¹Ø©)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | âœ”ï¸ Ù†Ø¹Ù… |
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âŒ Ù„Ø§ |
| Ø±ØµÙŠØ¯ Ø¹Ù…ÙŠÙ„ | âŒ Ù„Ø§ |

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Paid (Ù…Ø¯ÙÙˆØ¹Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | âœ”ï¸ Ù†Ø¹Ù… |
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âœ”ï¸ Ù†Ø¹Ù… |
| Customer Credit | âœ”ï¸ Ù†Ø¹Ù… |
| Ø§Ù„Ø³Ø¯Ø§Ø¯ | Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ â†’ Ø³Ù†Ø¯ ØµØ±Ù |

#### ğŸ“Š Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø©:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ reference_type: "sales_return"                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Debit:  Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª (Revenue)       â† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±ØªØ¬Ø¹                â”‚
â”‚ Credit: Ø³Ù„Ù Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Customer Credit) â† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±ØªØ¬Ø¹           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’° ØµØ±Ù Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ reference_type: "customer_credit_payment"                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Debit:  Ø³Ù„Ù Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (Customer Credit) â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØµØ±ÙˆÙ        â”‚
â”‚ Credit: Ø§Ù„Ù†Ù‚Ø¯/Ø§Ù„Ø¨Ù†Ùƒ (Cash)       â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØµØ±ÙˆÙ              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Partially Paid (Ù…Ø¯ÙÙˆØ¹Ø© Ø¬Ø²Ø¦ÙŠØ§Ù‹)
| Ø§Ù„Ø¹Ù†ØµØ± | Ø§Ù„Ø­Ø§Ù„Ø© |
|--------|--------|
| Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | âœ”ï¸ Ù†Ø¹Ù… |
| Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ | âœ”ï¸ Ù†Ø¹Ù… |
| Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø°Ù…Ù… | âœ”ï¸ Ù†Ø¹Ù… |
| Customer Credit | âŒ Ø¥Ù„Ø§ Ø¥Ø°Ø§ Ø§Ù„Ù…Ø¯ÙÙˆØ¹ > ØµØ§ÙÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø© |

#### ğŸ“Š Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Partially Paid:
```
Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: 900
Ø§Ù„Ù…Ø¯ÙÙˆØ¹: 300
Ù…Ø±ØªØ¬Ø¹: 300
â¡ï¸ Ø§Ù„ØµØ§ÙÙŠ: 600
â¡ï¸ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 300
â¡ï¸ Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„: 0
```

---

## ğŸ”¹ Ø«Ø§Ù„Ø«Ø§Ù‹: Purchase Invoices (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡)

### 1ï¸âƒ£ Draft
- âŒ Ù„Ø§ Ù…Ø®Ø²ÙˆÙ†
- âŒ Ù„Ø§ Ù‚ÙŠØ¯

### 2ï¸âƒ£ Received (Ù…Ø³ØªÙ„Ù…Ø©)
- âœ”ï¸ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Stock In)
- âŒ Ù„Ø§ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ

### 3ï¸âƒ£ Paid / Partially Paid
- âœ”ï¸ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ ÙÙ‚Ø·
- âœ”ï¸ ØªØ­Ø¯ÙŠØ« Ø°Ù…Ù… ÙˆØ±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯

#### ğŸ“Š Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„Ø¯ÙØ¹ (ÙÙˆØ§ØªÙŠØ± Ø§Ù„Ø´Ø±Ø§Ø¡):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1ï¸âƒ£ Ù‚ÙŠØ¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø© (Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© - Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø© Ø§Ù„ÙƒØ§Ù…Ù„):        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ reference_type: "bill"                                          â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Debit:  Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Inventory)      â† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©              â”‚
â”‚ Credit: Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (AP)    â† Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙØ§ØªÙˆØ±Ø©              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2ï¸âƒ£ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯ (Ù…Ø¹ ÙƒÙ„ Ø¯ÙØ¹Ø© - Ø¨Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹):                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ reference_type: "bill_payment"                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Debit:  Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (AP)    â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹              â”‚
â”‚ Credit: Ø§Ù„Ù†Ù‚Ø¯/Ø§Ù„Ø¨Ù†Ùƒ (Cash)       â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø¯ÙÙˆØ¹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ğŸ“Œ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÙŠ:
```
ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ BILL-001 Ø¨Ø¥Ø¬Ù…Ø§Ù„ÙŠ 20,000 Ø¬Ù†ÙŠÙ‡
â”œâ”€â”€ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø¯ÙØ¹Ø© (10,000 Ø¬Ù†ÙŠÙ‡):
â”‚   â”œâ”€â”€ Ù‚ÙŠØ¯ Ø§Ù„ÙØ§ØªÙˆØ±Ø©: Inventory 20,000 / AP 20,000
â”‚   â””â”€â”€ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯: AP 10,000 / Cash 10,000
â”‚
â””â”€â”€ Ø¹Ù†Ø¯ Ø«Ø§Ù†ÙŠ Ø¯ÙØ¹Ø© (10,000 Ø¬Ù†ÙŠÙ‡):
    â””â”€â”€ Ù‚ÙŠØ¯ Ø§Ù„Ø³Ø¯Ø§Ø¯ ÙÙ‚Ø·: AP 10,000 / Cash 10,000
```

---

## ğŸ”¹ Ø±Ø§Ø¨Ø¹Ø§Ù‹: Purchase Returns (Ù…Ø±ØªØ¬Ø¹Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª)

> Ù…Ø±ØªØ¬Ø¹Ø§Øª Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª ØªÙÙ†ÙØ° Ø¨Ù†ÙØ³ Ù…Ù†Ø·Ù‚ Ù…Ø±ØªØ¬Ø¹Ø§Øª Ø§Ù„Ø¨ÙŠØ¹ ÙˆÙ„ÙƒÙ† Ø¨Ø¹ÙƒØ³ Ø§Ù„ØªØ£Ø«ÙŠØ±

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Received
- âœ”ï¸ Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Stock Out)
- âŒ Ù„Ø§ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ
- âŒ Ù„Ø§ Ø±ØµÙŠØ¯ Ù…ÙˆØ±Ø¯

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Paid
- âœ”ï¸ Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
- âœ”ï¸ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø¹ÙƒØ³ÙŠ
- âœ”ï¸ Supplier Debit Credit
- âœ”ï¸ ÙŠØ¸Ù‡Ø± ÙÙŠ ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ±Ø¯

#### ğŸ“Š Ù‚ÙŠØ¯ Ù…Ø±ØªØ¬Ø¹ Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¹Ù„Ù‰ ÙØ§ØªÙˆØ±Ø© Ù…Ø¯ÙÙˆØ¹Ø©:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ reference_type: "purchase_return"                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Debit:  Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (AP)    â† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±ØªØ¬Ø¹                â”‚
â”‚ Credit: Ø§Ù„Ù…Ø®Ø²ÙˆÙ† (Inventory)      â† Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø±ØªØ¬Ø¹                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ’° Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø£Ù…ÙˆØ§Ù„ Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ø¯ (Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ reference_type: "supplier_debit_payment"                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Debit:  Ø§Ù„Ù†Ù‚Ø¯/Ø§Ù„Ø¨Ù†Ùƒ (Cash)       â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ„Ù…              â”‚
â”‚ Credit: Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø¯Ø§Ø¦Ù†Ø© (AP)    â† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø³ØªÙ„Ù…              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ” Ø§Ù„Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Partially Paid
- âœ”ï¸ Ø®ØµÙ… Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
- âœ”ï¸ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ
- âœ”ï¸ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ø­ØªØ³Ø§Ø¨ Ø°Ù…Ù… Ø§Ù„Ù…ÙˆØ±Ø¯
- âŒ Ù„Ø§ Ø±ØµÙŠØ¯ Ù…Ø¯ÙŠÙ† Ø¥Ù„Ø§ Ø¥Ø°Ø§ Ø§Ù„Ù…Ø±ØªØ¬Ø¹ > Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ

### ğŸ’° ØªØ³ÙˆÙŠØ© Ø±ØµÙŠØ¯ Ø§Ù„Ù…ÙˆØ±Ø¯
- ØªØªÙ… Ù…Ù† ØµÙØ­Ø© Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
- Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± **Ø³Ù†Ø¯ Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø£Ù…ÙˆØ§Ù„**
- ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø§Ù„ÙŠ
- ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…Ø³ØªÙ‚Ù„

---

## ğŸ”’ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ØµØ§Ø±Ù…Ø© (System Guards)

### 1ï¸âƒ£ ÙŠÙ…Ù†Ø¹ Ø­Ø°Ù:
- Ø£ÙŠ ÙØ§ØªÙˆØ±Ø© Ù„Ù‡Ø§ Ø­Ø±ÙƒØ© Ù…Ø®Ø²ÙˆÙ†
- Ø£ÙŠ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ Ù…Ø±ØªØ¨Ø· Ø¨Ø³Ù†Ø¯ Ø£Ùˆ Ù…Ø±ØªØ¬Ø¹

### 2ï¸âƒ£ ÙƒÙ„ Ù‚ÙŠØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠ ÙŠØ­ØªÙˆÙŠ:
- `reference_type`
- `reference_id`

### 3ï¸âƒ£ ÙƒÙ„ Ø­Ø±ÙƒØ© Ù…Ø®Ø²ÙˆÙ† ØªØ­ØªÙˆÙŠ:
- `source_document`
- `document_id`

### 4ï¸âƒ£ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± ØªØ¹ØªÙ…Ø¯ ÙÙ‚Ø· Ø¹Ù„Ù‰ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©

---

## ğŸ›¡ï¸ Database Triggers (Ø­Ù…Ø§ÙŠØ§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª)

> Ù‡Ø°Ù‡ Ø§Ù„Ù€ Triggers ØªÙ…Ù†Ø¹ Ø£ÙŠ Ù…Ø®Ø§Ù„ÙØ© Ù„Ù„Ù†Ù…Ø· Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª

### âœ… Triggers Ø§Ù„Ù…Ø·Ø¨Ù‚Ø©:

| Ø§Ù„Ù€ Trigger | Ø§Ù„ÙˆØ¸ÙŠÙØ© | Ø§Ù„Ø¬Ø¯ÙˆÙ„ |
|-------------|---------|--------|
| `trg_prevent_journal_on_sent` | âŒ ÙŠÙ…Ù†Ø¹ Ø¥Ù†Ø´Ø§Ø¡ Ù‚ÙŠÙˆØ¯ Ù…Ø­Ø§Ø³Ø¨ÙŠØ© Ø¹Ù„Ù‰ ÙÙˆØ§ØªÙŠØ± SENT/DRAFT | `journal_entries` |
| `trg_prevent_duplicate_inventory` | âŒ ÙŠÙ…Ù†Ø¹ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…ÙƒØ±Ø±Ø© Ù„Ù†ÙØ³ Ø§Ù„Ù…Ù†ØªØ¬ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø© | `inventory_transactions` |
| `trg_prevent_inventory_on_draft` | âŒ ÙŠÙ…Ù†Ø¹ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¹Ù„Ù‰ ÙÙˆØ§ØªÙŠØ± DRAFT | `inventory_transactions` |
| `trg_prevent_inventory_for_cancelled` | âŒ ÙŠÙ…Ù†Ø¹ Ø­Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¹Ù„Ù‰ ÙÙˆØ§ØªÙŠØ± Ù…Ù„ØºØ§Ø© | `inventory_transactions` |

### ğŸ“Œ Ù…Ù„Ù Ø§Ù„Ù€ SQL:
```
scripts/110_enforce_accounting_pattern.sql
```

### ğŸ”§ ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:
```sql
-- ØªØ´ØºÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ù…Ù† Supabase SQL Editor
-- Ø£Ùˆ Ù…Ù† Ø®Ù„Ø§Ù„ CLI:
psql -f scripts/110_enforce_accounting_pattern.sql
```

---

## âœ… Ø§Ù„Ø®Ù„Ø§ØµØ© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©

```
ÙØµÙ„ ØªØ§Ù… Ø¨ÙŠÙ†:
â”œâ”€â”€ Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª
â”œâ”€â”€ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†
â”œâ”€â”€ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨Ø©
â””â”€â”€ Ø§Ù„Ø³Ø¯Ø§Ø¯

âœ”ï¸ Ù…Ù†Ø¹ Ø§Ù„Ø§Ø²Ø¯ÙˆØ§Ø¬
âœ”ï¸ Ù†Ù…Ø· ERP Ø§Ø­ØªØ±Ø§ÙÙŠ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ¯Ù‚ÙŠÙ‚ ÙˆØ§Ù„ØªÙˆØ³Ø¹
```

---

## ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹

| Ø§Ù„Ø­Ø§Ù„Ø© | Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | Ø§Ù„Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠ | Ø±ØµÙŠØ¯ Ø§Ù„Ø¹Ù…ÙŠÙ„/Ø§Ù„Ù…ÙˆØ±Ø¯ |
|--------|---------|----------------|-------------------|
| **ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Draft** | âŒ | âŒ | âŒ |
| **ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Sent** | âœ”ï¸ Ø®ØµÙ… | âŒ | âŒ |
| **ÙØ§ØªÙˆØ±Ø© Ø¨ÙŠØ¹ Paid** | âŒ (ØªÙ…) | âœ”ï¸ Ù‚ÙŠØ¯ ÙØ§ØªÙˆØ±Ø© + Ù‚ÙŠØ¯ Ø³Ø¯Ø§Ø¯ | âœ”ï¸ |
| **Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Sent** | âœ”ï¸ Ø¥Ø±Ø¬Ø§Ø¹ | âŒ | âŒ |
| **Ù…Ø±ØªØ¬Ø¹ Ø¹Ù„Ù‰ Paid** | âœ”ï¸ Ø¥Ø±Ø¬Ø§Ø¹ | âœ”ï¸ | âœ”ï¸ Credit |
| **ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Draft** | âŒ | âŒ | âŒ |
| **ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Received** | âœ”ï¸ Ø¥Ø¶Ø§ÙØ© | âŒ | âŒ |
| **ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ Paid** | âŒ (ØªÙ…) | âœ”ï¸ Ù‚ÙŠØ¯ ÙØ§ØªÙˆØ±Ø© + Ù‚ÙŠØ¯ Ø³Ø¯Ø§Ø¯ | âœ”ï¸ |
| **Ù…Ø±ØªØ¬Ø¹ Ø´Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Received** | âœ”ï¸ Ø®ØµÙ… | âŒ | âŒ |
| **Ù…Ø±ØªØ¬Ø¹ Ø´Ø±Ø§Ø¡ Ø¹Ù„Ù‰ Paid** | âœ”ï¸ Ø®ØµÙ… | âœ”ï¸ | âœ”ï¸ Debit |

---

## ğŸ“Š Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù‚ÙŠÙˆØ¯ Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© (reference_type)

| Ø§Ù„Ù†ÙˆØ¹ | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª |
|-------|-------|----------|
| `invoice` | Ù‚ÙŠØ¯ ÙØ§ØªÙˆØ±Ø© Ù…Ø¨ÙŠØ¹Ø§Øª | Debit AR / Credit Revenue |
| `invoice_payment` | Ù‚ÙŠØ¯ Ø³Ø¯Ø§Ø¯ ÙØ§ØªÙˆØ±Ø© Ù…Ø¨ÙŠØ¹Ø§Øª | Debit Cash / Credit AR |
| `bill` | Ù‚ÙŠØ¯ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ | Debit Inventory / Credit AP |
| `bill_payment` | Ù‚ÙŠØ¯ Ø³Ø¯Ø§Ø¯ ÙØ§ØªÙˆØ±Ø© Ø´Ø±Ø§Ø¡ | Debit AP / Credit Cash |
| `sales_return` | Ù‚ÙŠØ¯ Ù…Ø±ØªØ¬Ø¹ Ù…Ø¨ÙŠØ¹Ø§Øª | Debit Revenue / Credit Customer Credit |
| `purchase_return` | Ù‚ÙŠØ¯ Ù…Ø±ØªØ¬Ø¹ Ù…Ø´ØªØ±ÙŠØ§Øª | Debit AP / Credit Inventory |
| `customer_credit_payment` | ØµØ±Ù Ø±ØµÙŠØ¯ Ø¹Ù…ÙŠÙ„ | Debit Customer Credit / Credit Cash |
| `supplier_debit_payment` | Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø£Ù…ÙˆØ§Ù„ Ù…Ù† Ù…ÙˆØ±Ø¯ | Debit Cash / Credit AP |

---

## ğŸ›¡ï¸ ÙØ­ÙˆØµØ§Øª Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ© (Integrity Checks)

### ğŸ“Œ Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:

#### 1ï¸âƒ£ Ø­Ø³Ø§Ø¨ ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ (Net Income):
```javascript
// âœ… ØµØ­ÙŠØ­
netIncome = income - expense

// âŒ Ø®Ø·Ø£ (Ù„Ø§ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ø¬Ù…Ø¹!)
netIncome = income + expense  // Ø®Ø·Ø£ Ø¬Ø³ÙŠÙ…!
```

#### 2ï¸âƒ£ Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª (Normal Balance):
| Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨ | Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© | Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±ØµÙŠØ¯ |
|------------|---------|-------------|
| **Ø§Ù„Ø£ØµÙˆÙ„ (asset)** | Ù…Ø¯ÙŠÙ† (debit) | `debit - credit` |
| **Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª (expense)** | Ù…Ø¯ÙŠÙ† (debit) | `debit - credit` |
| **Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª (liability)** | Ø¯Ø§Ø¦Ù† (credit) | `credit - debit` |
| **Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© (equity)** | Ø¯Ø§Ø¦Ù† (credit) | `credit - debit` |
| **Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (income)** | Ø¯Ø§Ø¦Ù† (credit) | `credit - debit` |

#### 3ï¸âƒ£ Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ø§Ù„Ù…Ø­Ø§Ø³Ø¨ÙŠØ©:
```
Ø§Ù„Ø£ØµÙˆÙ„ = Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª + Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© + ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­
Ø§Ù„Ø£ØµÙˆÙ„ = Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª + Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© + (Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª - Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª)
```

### ğŸ›¡ï¸ Database Constraints & Triggers:

| Ø§Ù„Ø­Ù…Ø§ÙŠØ© | Ø§Ù„ÙˆØ¸ÙŠÙØ© |
|---------|---------|
| `NOT NULL normal_balance` | ÙƒÙ„ Ø­Ø³Ø§Ø¨ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù„Ù‡ Ø·Ø¨ÙŠØ¹Ø© Ù…Ø­Ø¯Ø¯Ø© |
| `chk_normal_balance` | Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…Ø³Ù…ÙˆØ­Ø©: `debit` Ø£Ùˆ `credit` ÙÙ‚Ø· |
| `trg_validate_normal_balance` | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹Ø© Ù…Ø¹ Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨ |
| `trg_check_journal_balance` | ØªØ­Ø°ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ù‚ÙŠÙˆØ¯ ØºÙŠØ± Ø§Ù„Ù…ØªÙˆØ§Ø²Ù†Ø© |

### ğŸ“Š ÙØ­Øµ Ø³Ù„Ø§Ù…Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:
```sql
-- ÙØ­Øµ Ø³Ø±ÙŠØ¹
SELECT * FROM v_accounting_health_check;

-- Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:
-- status: "BALANCED"
-- difference: 0.00
-- unbalanced_entries_count: 0
```

### ğŸ“„ Ù…Ù„Ù Ø§Ù„Ù€ SQL:
```
scripts/120_accounting_integrity_checks.sql
```

