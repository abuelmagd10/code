# ๐ ูุธุงู ุตูุงุญูุงุช ููู ุงููุฎุฒูู (Inventory Transfers Permissions)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุทุจูู ูุธุงู ุตูุงุญูุงุช ูุญูู ุนูู ุตูุญุงุช ููู ุงููุฎุฒูู ูุถูุงู ุนุฒู ูุงูู ุจูู ุงููุฑูุน ูุงููุฎุงุฒูุ ูุน ููุน ุชุฏุงุฎู ุงูุตูุงุญูุงุช.

---

## ๐ฏ ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ

### โ **Owner / Admin**
- โ ุฑุคูุฉ **ุฌููุน** ุทูุจุงุช ุงูููู ูู ุฌููุน ุงููุฎุงุฒู
- โ ุฅูุดุงุก ุทูุจุงุช ููู ุฌุฏูุฏุฉ
- โ ุจุฏุก ุงูููู (ุฎุตู ูู ุงููุฎุฒู ุงููุตุฏุฑ)
- โ ุงุนุชูุงุฏ ุงูุงุณุชูุงู ูู **ุฃู** ูุฎุฒู
- โ ุฅูุบุงุก ุทูุจุงุช ุงูููู

### โ **Manager (ูุฏูุฑ ุงููุฑุน)**
- โ ุฑุคูุฉ **ุฌููุน** ุทูุจุงุช ุงูููู ูู ุฌููุน ุงููุฎุงุฒู
- โ ุฅูุดุงุก ุทูุจุงุช ููู ุฌุฏูุฏุฉ
- โ ุจุฏุก ุงูููู (ุฎุตู ูู ุงููุฎุฒู ุงููุตุฏุฑ)
- โ **ูุง ููููู** ุงุนุชูุงุฏ ุงูุงุณุชูุงู (ููุท ูุณุคูู ุงููุฎุฒู ุงููุฌูุฉ)

### โ **Store Manager (ูุณุคูู ุงููุฎุฒู)**
- โ ุฑุคูุฉ **ููุท** ุงูุทูุจุงุช ุงูููุฌูุฉ **ููุฎุฒูู** (`destination_warehouse_id`)
- โ **ูุง ูุฑู** ุงูุทูุจุงุช ุงูููุฌูุฉ ููุฎุงุฒู ุฃุฎุฑู
- โ **ูุง ููููู** ุฅูุดุงุก ุทูุจุงุช ููู ุฌุฏูุฏุฉ
- โ **ูุง ููููู** ุจุฏุก ุงูููู
- โ **ููููู ููุท** ุงุนุชูุงุฏ ุงูุงุณุชูุงู ููุทูุจุงุช ุงูููุฌูุฉ ููุฎุฒูู
- โ **ูุง ููููู ุชุนุฏูู ุงููููุฉ ุงููุณุชููุฉ** - ูุณุชูู ุงููููุฉ ุงููุฑุณูุฉ ููุง ูู

### โ **Staff (ููุธู)**
- โ **ูุง ููููู** ุงููุตูู ูุตูุญุงุช ููู ุงููุฎุฒูู

---

## ๐ ุงูุตูุญุงุช ูุงูุตูุงุญูุงุช

### 1๏ธโฃ **ุตูุญุฉ ูุงุฆูุฉ ุงูููู** (`/inventory-transfers`)

#### ุงูููุชุฑุฉ ุงูุชููุงุฆูุฉ:
```typescript
// Owner/Admin: ูุฑูู ุฌููุน ุงูุทูุจุงุช
if (["owner", "admin"].includes(role)) {
  // ูุง ููุชุฑุฉ
}

// ูุณุคูู ุงููุฎุฒู: ูุฑู ููุท ุงูุทูุจุงุช ุงูููุฌูุฉ ููุฎุฒูู
if (userWarehouseId) {
  query.eq("destination_warehouse_id", userWarehouseId)
}
```

#### ุฒุฑ "ุฅูุดุงุก ุทูุจ ููู":
- โ ูุธูุฑ ูู: `Owner`, `Admin`, `Manager`
- โ ูุง ูุธูุฑ ูู: `Store Manager`, `Staff`

---

### 2๏ธโฃ **ุตูุญุฉ ุชูุงุตูู ุงูููู** (`/inventory-transfers/[id]`)

#### ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:
```typescript
// ูุณุคูู ุงููุฎุฒู: ููููู ููุท ุฑุคูุฉ ุงูุทูุจุงุช ุงูููุฌูุฉ ููุฎุฒูู
if (!["owner", "admin"].includes(role) && userWarehouseId) {
  if (transfer.destination_warehouse_id !== userWarehouseId) {
    // ุฑูุถ ุงููุตูู ูุฅุนุงุฏุฉ ุงูุชูุฌูู
    router.push("/inventory-transfers")
  }
}
```

#### ุงูุฃุฒุฑุงุฑ ูุงูุฅุฌุฑุงุกุงุช:

| ุงูุฅุฌุฑุงุก | Owner/Admin | Manager | Store Manager |
|---------|-------------|---------|---------------|
| **ุจุฏุก ุงูููู** | โ | โ | โ |
| **ุงุนุชูุงุฏ ุงูุงุณุชูุงู** | โ | โ | โ (ูุฎุฒูู ููุท) |
| **ุชุนุฏูู ุงููููุฉ ุงููุณุชููุฉ** | โ | โ | โ |
| **ุฅูุบุงุก ุงูููู** | โ | โ | โ |

---

### 3๏ธโฃ **ุตูุญุฉ ุฅูุดุงุก ุทูุจ ููู** (`/inventory-transfers/new`)

#### ุงูุชุญูู ูู ุงูุตูุงุญูุงุช:
```typescript
// ููุท Owner/Admin/Manager ูููููู ุฅูุดุงุก ุทูุจุงุช ููู
if (!["owner", "admin", "manager"].includes(role)) {
  toast({ title: 'ุบูุฑ ูุตุฑุญ' })
  router.push("/inventory-transfers")
}
```

---

## ๐ ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ูุณุคูู ูุฎุฒู ูุฏููุฉ ูุตุฑ
- **ุงูุฏูุฑ:** `store_manager`
- **ุงููุฎุฒู:** `ูุฎุฒู ูุฏููุฉ ูุตุฑ`

**ูุง ูุฑุงู:**
- โ ุทูุจ ููู ูู "ุงููุฎุฒู ุงูุฑุฆูุณู" โ "ูุฎุฒู ูุฏููุฉ ูุตุฑ"
- โ ุทูุจ ููู ูู "ุงููุฎุฒู ุงูุฑุฆูุณู" โ "ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ"

**ูุง ููููู ูุนูู:**
- โ ุงุนุชูุงุฏ ุงุณุชูุงู ุงูุทูุจุงุช ุงูููุฌูุฉ ููุฎุฒูู (ุจุงููููุฉ ุงููุฑุณูุฉ ููุทุ ุจุฏูู ุชุนุฏูู)
- โ ุชุนุฏูู ุงููููุฉ ุงููุณุชููุฉ
- โ ุฅูุดุงุก ุทูุจุงุช ููู ุฌุฏูุฏุฉ
- โ ุจุฏุก ุงูููู

---

### ูุซุงู 2: ูุฏูุฑ ุงููุฑุน
- **ุงูุฏูุฑ:** `manager`
- **ุงููุฑุน:** `ุงููุฑุน ุงูุฑุฆูุณู`

**ูุง ูุฑุงู:**
- โ ุฌููุน ุทูุจุงุช ุงูููู ูู ุฌููุน ุงููุฎุงุฒู

**ูุง ููููู ูุนูู:**
- โ ุฅูุดุงุก ุทูุจุงุช ููู ุฌุฏูุฏุฉ
- โ ุจุฏุก ุงูููู (ุฎุตู ูู ุงููุฎุฒู ุงููุตุฏุฑ)
- โ ุงุนุชูุงุฏ ุงูุงุณุชูุงู (ูุฌุจ ุฃู ูููู ุจู ูุณุคูู ุงููุฎุฒู ุงููุฌูุฉ)

---

## ๐ก๏ธ ุงูุญูุงูุฉ ูู ุงูุชูุงุนุจ

### 1๏ธโฃ **ููุชุฑุฉ ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช**
- ุฌููุน ุงูุงุณุชุนูุงูุงุช ุชุทุจู ููุชุฑุฉ `destination_warehouse_id` ููุณุคููู ุงููุฎุงุฒู
- ูุง ูููู ุงููุตูู ููุจูุงูุงุช ุญุชู ูู ุชู ุงูุชูุงุนุจ ุจุงูู URL

### 2๏ธโฃ **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ูู ุตูุญุฉ**
- ูู ุตูุญุฉ ุชุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู ูุจู ุนุฑุถ ุงูุจูุงูุงุช
- ุฅุนุงุฏุฉ ุชูุฌูู ุชููุงุฆูุฉ ูู ุญุงูุฉ ุนุฏู ูุฌูุฏ ุตูุงุญูุฉ

### 3๏ธโฃ **ุนุฒู ูุงูู ุจูู ุงููุฎุงุฒู**
- ูุณุคูู ูุฎุฒู A ูุง ููููู ุฑุคูุฉ ุฃู ุงูุชุนุงูู ูุน ุทูุจุงุช ูุฎุฒู B
- Owner/Admin ููุท ูุฏููู ุฑุคูุฉ ุดุงููุฉ

---

## ๐ ููุฎุต ุงูุตูุงุญูุงุช

| ุงูุฏูุฑ | ุฑุคูุฉ ุงูุทูุจุงุช | ุฅูุดุงุก | ุจุฏุก ุงูููู | ุงุนุชูุงุฏ ุงูุงุณุชูุงู | ุชุนุฏูู ุงููููุฉ | ุฅูุบุงุก |
|-------|--------------|-------|-----------|-----------------|--------------|-------|
| **Owner** | ุงููู | โ | โ | โ (ุงููู) | โ | โ |
| **Admin** | ุงููู | โ | โ | โ (ุงููู) | โ | โ |
| **Manager** | ุงููู | โ | โ | โ | โ | โ |
| **Store Manager** | ูุฎุฒูู ููุท | โ | โ | โ (ูุฎุฒูู) | โ | โ |
| **Staff** | โ | โ | โ | โ | โ | โ |

---

## โ ุงูุชุทุจูู

ุชู ุชุทุจูู ูุฐุง ุงููุธุงู ูู:
- โ `app/inventory-transfers/page.tsx` (ูุงุฆูุฉ ุงูููู)
- โ `app/inventory-transfers/[id]/page.tsx` (ุชูุงุตูู ุงูููู)
- โ `app/inventory-transfers/new/page.tsx` (ุฅูุดุงุก ุทูุจ ููู)

---

**ุขุฎุฑ ุชุญุฏูุซ:** 2026-01-03

