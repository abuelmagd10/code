# ๐งช ุญุงูุงุช ุงุฎุชุจุงุฑ ููุงุนุฏ ุงูุนุฑุถ ุญุณุจ ุงููุฑุน

## ๐ ุงูุณููุงุฑูููุงุช ุงููุทููุจ ุงุฎุชุจุงุฑูุง

### 1๏ธโฃ ุงุฎุชุจุงุฑ ุนุฒู ุงููุฑูุน (Branch Isolation)

#### ุงูุณููุงุฑูู 1: ูุณุคูู ูุฎุฒู - ูุฑุน ูุฏููุฉ ูุตุฑ
**ุงูุฅุนุฏุงุฏ:**
- ูุณุชุฎุฏู: `ุฃุญูุฏ`
- ุงูุฏูุฑ: `store_manager`
- ุงููุฑุน: `ูุฑุน ูุฏููุฉ ูุตุฑ` (ID: `branch-A`)
- ุงููุฎุฒู: `ูุฎุฒู ูุฏููุฉ ูุตุฑ` (ID: `warehouse-A1`)

**ุงูุจูุงูุงุช:**
- ุทูุจ ููู 1: `ุงููุฎุฒู ุงูุฑุฆูุณู (ูุฑุน ุงููุงูุฑุฉ)` โ `ูุฎุฒู ูุฏููุฉ ูุตุฑ (ูุฑุน ูุฏููุฉ ูุตุฑ)` โ
- ุทูุจ ููู 2: `ุงููุฎุฒู ุงูุฑุฆูุณู (ูุฑุน ุงููุงูุฑุฉ)` โ `ูุฎุฒู ุงูุฅุณููุฏุฑูุฉ (ูุฑุน ุงูุฅุณููุฏุฑูุฉ)` โ
- ุทูุจ ููู 3: `ูุฎุฒู ูุฏููุฉ ูุตุฑ (ูุฑุน ูุฏููุฉ ูุตุฑ)` โ `ูุฎุฒู ุงููุงูุฑุฉ (ูุฑุน ุงููุงูุฑุฉ)` โ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุฑู ุทูุจ ุงูููู 1 ููุท
- โ ูุง ูุฑู ุทูุจ ุงูููู 2 (ูุฑุน ุขุฎุฑ)
- โ ูุง ูุฑู ุทูุจ ุงูููู 3 (ููุณ ุงููุฌูุฉ)

---

#### ุงูุณููุงุฑูู 2: ูุฏูุฑ ูุฑุน - ูุฑุน ูุฏููุฉ ูุตุฑ
**ุงูุฅุนุฏุงุฏ:**
- ูุณุชุฎุฏู: `ูุญูุฏ`
- ุงูุฏูุฑ: `manager`
- ุงููุฑุน: `ูุฑุน ูุฏููุฉ ูุตุฑ` (ID: `branch-A`)

**ุงูุจูุงูุงุช:**
- ุทูุจ ููู 1: `ูุฎุฒู ูุฏููุฉ ูุตุฑ` โ `ูุฎุฒู ุงููุงูุฑุฉ` โ
- ุทูุจ ููู 2: `ูุฎุฒู ุงููุงูุฑุฉ` โ `ูุฎุฒู ูุฏููุฉ ูุตุฑ` โ
- ุทูุจ ููู 3: `ูุฎุฒู ุงููุงูุฑุฉ` โ `ูุฎุฒู ุงูุฅุณููุฏุฑูุฉ` โ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุฑู ุทูุจ ุงูููู 1 (ุงููุตุฏุฑ ูู ูุฑุนู)
- โ ูุฑู ุทูุจ ุงูููู 2 (ุงููุฌูุฉ ูู ูุฑุนู)
- โ ูุง ูุฑู ุทูุจ ุงูููู 3 (ุจูู ูุฑูุน ุฃุฎุฑู)

---

### 2๏ธโฃ ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงููุฑุน ุงูููุฑู (Real-time Branch Update)

#### ุงูุณููุงุฑูู 3: ุชุบููุฑ ูุฑุน ูุณุคูู ุงููุฎุฒู
**ุงูุฎุทูุงุช:**
1. ูุณุชุฎุฏู `ุฃุญูุฏ` (store_manager) ูู `ูุฑุน ูุฏููุฉ ูุตุฑ`
2. ููุชุญ ุตูุญุฉ ุทูุจุงุช ุงูููู โ ูุฑู 5 ุทูุจุงุช
3. ูุฏูุฑ ุงููุธุงู ูุบูุฑ ูุฑุน `ุฃุญูุฏ` ุฅูู `ูุฑุน ุงูุฅุณููุฏุฑูุฉ`
4. `ุฃุญูุฏ` ูุญุฏุซ ุงูุตูุญุฉ (F5) ุฃู ููุชุธุฑ auto-reload

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุฑู ููุฑุงู ุทูุจุงุช ุงูููู ุงูุฎุงุตุฉ ุจู `ูุฑุน ุงูุฅุณููุฏุฑูุฉ` ููุท
- โ ูุง ูุฑู ุฃู ุทูุจ ูู `ูุฑุน ูุฏููุฉ ูุตุฑ` ุงูุณุงุจู
- โ ูุง ูุญุชุงุฌ ูุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู

---

#### ุงูุณููุงุฑูู 4: ุชุบููุฑ ูุฑุน ุงููุฏูุฑ
**ุงูุฎุทูุงุช:**
1. ูุณุชุฎุฏู `ูุญูุฏ` (manager) ูู `ูุฑุน ูุฏููุฉ ูุตุฑ`
2. ููุชุญ ุตูุญุฉ ุทูุจุงุช ุงูููู โ ูุฑู 10 ุทูุจุงุช
3. ูุฏูุฑ ุงููุธุงู ูุบูุฑ ูุฑุน `ูุญูุฏ` ุฅูู `ูุฑุน ุงููุงูุฑุฉ`
4. `ูุญูุฏ` ูุญุฏุซ ุงูุตูุญุฉ

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุฑู ููุฑุงู ุทูุจุงุช ุงูููู ุงูุฎุงุตุฉ ุจู `ูุฑุน ุงููุงูุฑุฉ` ููุท
- โ ูุง ูุฑู ุฃู ุทูุจ ูู `ูุฑุน ูุฏููุฉ ูุตุฑ` ุงูุณุงุจู

---

### 3๏ธโฃ ุงุฎุชุจุงุฑ ุตูุญุฉ ุงูุชูุงุตูู (Details Page Access Control)

#### ุงูุณููุงุฑูู 5: ูุญุงููุฉ ุงููุตูู ูุทูุจ ููู ูู ูุฑุน ุขุฎุฑ
**ุงูุฎุทูุงุช:**
1. ูุณุชุฎุฏู `ุฃุญูุฏ` (store_manager) ูู `ูุฑุน ูุฏููุฉ ูุตุฑ`
2. ูุญุงูู ูุชุญ ุฑุงุจุท ุทูุจ ููู ูู `ูุฑุน ุงูุฅุณููุฏุฑูุฉ` ูุจุงุดุฑุฉ
   - ูุซุงู: `/inventory-transfers/transfer-123`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุชู ุฑูุถ ุงููุตูู
- โ ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู `/inventory-transfers`
- โ ูุธูุฑ toast: "ููููู ููุท ุฑุคูุฉ ุงูุทูุจุงุช ุงูููุฌูุฉ ููุฎุฒูู ูู ูุฑุนู"

---

#### ุงูุณููุงุฑูู 6: ูุฏูุฑ ูุญุงูู ุงููุตูู ูุทูุจ ููู ูู ูุฑุน ุขุฎุฑ
**ุงูุฎุทูุงุช:**
1. ูุณุชุฎุฏู `ูุญูุฏ` (manager) ูู `ูุฑุน ูุฏููุฉ ูุตุฑ`
2. ูุญุงูู ูุชุญ ุฑุงุจุท ุทูุจ ููู ุจูู `ูุฑุน ุงููุงูุฑุฉ` ู `ูุฑุน ุงูุฅุณููุฏุฑูุฉ`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุชู ุฑูุถ ุงููุตูู
- โ ูุชู ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู `/inventory-transfers`
- โ ูุธูุฑ toast: "ููููู ููุท ุฑุคูุฉ ุทูุจุงุช ุงูููู ุงูุฎุงุตุฉ ุจูุฑุนู"

---

### 4๏ธโฃ ุงุฎุชุจุงุฑ Owner/Admin (No Restrictions)

#### ุงูุณููุงุฑูู 7: Owner ูุฑู ูู ุดูุก
**ุงูุฅุนุฏุงุฏ:**
- ูุณุชุฎุฏู: `ุงููุงูู`
- ุงูุฏูุฑ: `owner`

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ูุฑู **ุฌููุน** ุทูุจุงุช ุงูููู ูู **ุฌููุน** ุงููุฑูุน
- โ ูุง ุชูุฌุฏ ุฃู ูููุฏ ุนูู ุงูุนุฑุถ

---

## ๐ ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1. ุฅุนุฏุงุฏ ุงูุจูุงูุงุช
```sql
-- ุฅูุดุงุก ูุฑูุน
INSERT INTO branches (company_id, name, branch_name) VALUES
  ('company-1', 'ูุฑุน ูุฏููุฉ ูุตุฑ', 'ูุฑุน ูุฏููุฉ ูุตุฑ'),
  ('company-1', 'ูุฑุน ุงููุงูุฑุฉ', 'ูุฑุน ุงููุงูุฑุฉ'),
  ('company-1', 'ูุฑุน ุงูุฅุณููุฏุฑูุฉ', 'ูุฑุน ุงูุฅุณููุฏุฑูุฉ');

-- ุฅูุดุงุก ูุฎุงุฒู
INSERT INTO warehouses (company_id, branch_id, name) VALUES
  ('company-1', 'branch-A', 'ูุฎุฒู ูุฏููุฉ ูุตุฑ'),
  ('company-1', 'branch-B', 'ูุฎุฒู ุงููุงูุฑุฉ'),
  ('company-1', 'branch-C', 'ูุฎุฒู ุงูุฅุณููุฏุฑูุฉ');

-- ุฅูุดุงุก ุทูุจุงุช ููู
INSERT INTO inventory_transfers (
  company_id, 
  source_warehouse_id, source_branch_id,
  destination_warehouse_id, destination_branch_id,
  transfer_number, status
) VALUES
  ('company-1', 'warehouse-B', 'branch-B', 'warehouse-A', 'branch-A', 'TR-001', 'pending'),
  ('company-1', 'warehouse-B', 'branch-B', 'warehouse-C', 'branch-C', 'TR-002', 'pending'),
  ('company-1', 'warehouse-A', 'branch-A', 'warehouse-B', 'branch-B', 'TR-003', 'pending');
```

### 2. ุงุฎุชุจุงุฑ ูุฏูู
1. ุณุฌู ุฏุฎูู ูู `store_manager` ูู `ูุฑุน ูุฏููุฉ ูุตุฑ`
2. ุงูุชุญ `/inventory-transfers`
3. ุชุญูู ูู ุฃูู ุชุฑู ููุท `TR-001`
4. ุญุงูู ูุชุญ `/inventory-transfers/TR-002` ูุจุงุดุฑุฉ
5. ุชุญูู ูู ุฑูุถ ุงููุตูู

### 3. ุงุฎุชุจุงุฑ ุชุญุฏูุซ ุงููุฑุน
1. ุงูุชุญ ุตูุญุฉ `/inventory-transfers` ูู ุชุจููุจ
2. ุงูุชุญ ุตูุญุฉ `/settings/users` ูู ุชุจููุจ ุขุฎุฑ
3. ุบูุฑ ูุฑุน ุงููุณุชุฎุฏู
4. ุงุฑุฌุน ูุชุจููุจ `/inventory-transfers`
5. ุญุฏุซ ุงูุตูุญุฉ (F5)
6. ุชุญูู ูู ุชุญุฏูุซ ุงูุจูุงูุงุช ููุฑุงู

---

## โ ูุนุงููุฑ ุงููุฌุงุญ

- [ ] ูุณุคูู ุงููุฎุฒู ูุฑู ููุท ุทูุจุงุช ุงูููู ุงูููุฌูุฉ ููุฎุฒูู ูู ูุฑุนู
- [ ] ุงููุฏูุฑ ูุฑู ููุท ุทูุจุงุช ุงูููู ุงูุฎุงุตุฉ ุจูุฑุนู (ุงููุตุฏุฑ ุฃู ุงููุฌูุฉ)
- [ ] Owner/Admin ูุฑูู ุฌููุน ุทูุจุงุช ุงูููู
- [ ] ุชุญุฏูุซ ุงููุฑุน ูุคุฏู ูุชุญุฏูุซ ุงูุจูุงูุงุช ููุฑุงู (ุจุฏูู ุฅุนุงุฏุฉ ุชุณุฌูู ุฏุฎูู)
- [ ] ุฑูุถ ุงููุตูู ูุทูุจุงุช ุงูููู ูู ูุฑูุน ุฃุฎุฑู ูู ุตูุญุฉ ุงูุชูุงุตูู
- [ ] ูุง ููุฌุฏ cache ูุณูุญ ุจุฑุคูุฉ ุจูุงูุงุช ุงููุฑุน ุงูุณุงุจู

