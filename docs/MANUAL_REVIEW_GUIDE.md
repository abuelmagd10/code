# ุฏููู ุงููุฑุงุฌุนุฉ ุงููุฏููุฉ ูููุฏููุนุงุช ูุฅุดุนุงุฑุงุช ุงูุฏุงุฆู

## ๐ ุงููุฏู

ูุฑุงุฌุนุฉ ุงููุฏููุนุงุช ูุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ูุฏููุงู ูุชุญุฏูุฏ ุณุจุจ ุงูุฑุตูุฏ ุงูุณุงูุจ ูู ุญุณุงุจ AP (-118,380.00) ูุนุฏู ุชูุงุฒู ุงูููุฒุงููุฉ.

## ๐ ุงููุดููุฉ ุงูุญุงููุฉ

- **ุงูุงูุชุฒุงูุงุช ุงูุณุงูุจุฉ**: -118,380.00
  - ุดุฑูุฉ "ุชุณุช": -137,230.00
  - ุดุฑูุฉ "FOODCAN": -5,000.00
- **ุงูููุฒุงููุฉ ุบูุฑ ูุชูุงุฒูุฉ**: ุงููุฑู = 192,000.00

## ๐ ุงูุณูุฑูุจุชุงุช ุงููุชุงุญุฉ

### 1. `scripts/review_payments_and_vendor_credits.sql`
**ุงูุบุฑุถ**: ูุฑุงุฌุนุฉ ุดุงููุฉ ูุฌููุน ุงููุฏููุนุงุช ูุฅุดุนุงุฑุงุช ุงูุฏุงุฆู

**ูุญุชูู ุนูู**:
- ุนุฑุถ ุฌููุน ุงููุฏููุนุงุช ูุน ุชูุงุตูููุง
- ููุงุฑูุฉ ุงููุฏููุนุงุช ูุน ููุงุชูุฑ ุงูุดุฑุงุก
- ุนุฑุถ ุฌููุน ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ูุน ุชูุงุตูููุง
- ููุงุฑูุฉ ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ูุน ููุงุชูุฑ ุงูุดุฑุงุก
- ููุฎุต ุดุงูู ูููุฑุงุฌุนุฉ

**ููููุฉ ุงูุงุณุชุฎุฏุงู**:
```sql
-- ุชุดุบูู ุงูุณูุฑูุจุช ูุงููุงู
\i scripts/review_payments_and_vendor_credits.sql
```

### 2. `scripts/review_specific_payments.sql`
**ุงูุบุฑุถ**: ูุฑุงุฌุนุฉ ุงููุฏููุนุงุช ุงููุจูุฑุฉ ูุงููุดุจููุฉ

**ูุญุชูู ุนูู**:
- ุงููุฏููุนุงุช ุงููุจูุฑุฉ (>50,000)
- ุงููุฏููุนุงุช ุงูุชู ูุง ุชุทุงุจู ููุงุชูุฑ ุงูุดุฑุงุก
- ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ุงููุจูุฑุฉ (>30,000)
- ุงููุฏููุนุงุช ุจุฏูู ููุงุชูุฑ ุดุฑุงุก ูุฑุชุจุทุฉ
- ุงููุฏููุนุงุช ุงูููุฑุฑุฉ

**ููููุฉ ุงูุงุณุชุฎุฏุงู**:
```sql
-- ุชุดุบูู ุงูุณูุฑูุจุช ูุงููุงู
\i scripts/review_specific_payments.sql
```

## ๐ ูุง ูุฌุจ ุงูุจุญุซ ุนูู

### 1. ุงููุฏููุนุงุช ุงูุชู ูุง ุชุทุงุจู ููุงุชูุฑ ุงูุดุฑุงุก
**ุงููุดููุฉ ุงููุญุชููุฉ**: ูุฏููุนุงุช ุฃูุจุฑ ูู ูุจูุบ ุงููุงุชูุฑุฉ

**ุงูุชุญูู**:
- ูู ุงููุฏููุนุงุช ูุนูุงู ุฃูุจุฑ ูู ูุจูุบ ุงููุงุชูุฑุฉุ
- ูู ููุงู ูุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏูู (Prepaid Expenses)ุ
- ูู ููุงู ุฃุฎุทุงุก ูู ุชุณุฌูู ุงููุจุงูุบุ

**ุงูุฅุฌุฑุงุก**:
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุตุญูุญุฉุ ูุฌุจ ุฅูุดุงุก ุญุณุงุจ "ูุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏูู" (Prepaid Expenses) ูุฃุตู
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุฎุงุทุฆุฉุ ูุฌุจ ุชุตุญูุญ ุงููุจุงูุบ

### 2. ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ุงููุจูุฑุฉ
**ุงููุดููุฉ ุงููุญุชููุฉ**: ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ ุฃูุจุฑ ูู ุงููุณุชุญูุงุช

**ุงูุชุญูู**:
- ูู ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ูุนูุงู ุตุญูุญุฉุ
- ูู ููุงู ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ ููุฑุฑุฉุ
- ูู ููุงู ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ ุบูุฑ ูุฑุชุจุทุฉ ุจููุงุชูุฑ ุดุฑุงุกุ

**ุงูุฅุฌุฑุงุก**:
- ุฅุฐุง ูุงูุช ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ุตุญูุญุฉุ ูุฌุจ ุงูุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุฑ ุดุฑุงุก ููุงุจููุง
- ุฅุฐุง ูุงูุช ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ุฎุงุทุฆุฉุ ูุฌุจ ุชุตุญูุญูุง ุฃู ุญุฐููุง

### 3. ุงููุฏููุนุงุช ุจุฏูู ููุงุชูุฑ ุดุฑุงุก
**ุงููุดููุฉ ุงููุญุชููุฉ**: ูุฏููุนุงุช ุบูุฑ ูุฑุชุจุทุฉ ุจููุงุชูุฑ ุดุฑุงุก

**ุงูุชุญูู**:
- ูู ูุฐู ุงููุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏููุ
- ูู ููุงู ููุงุชูุฑ ุดุฑุงุก ููููุฏุฉุ
- ูู ูุฐู ุงููุฏููุนุงุช ูุณุฌูุฉ ุจุดูู ุฎุงุทุฆุ

**ุงูุฅุฌุฑุงุก**:
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ูุณุจูุฉุ ูุฌุจ ุฅูุดุงุก ุญุณุงุจ "ูุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏูู"
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุฎุงุทุฆุฉุ ูุฌุจ ุฑุจุทูุง ุจููุงุชูุฑ ุดุฑุงุก ุฃู ุญุฐููุง

### 4. ุงููุฏููุนุงุช ุงูููุฑุฑุฉ
**ุงููุดููุฉ ุงููุญุชููุฉ**: ููุณ ุงููุฏููุนุงุช ูุณุฌูุฉ ุฃูุซุฑ ูู ูุฑุฉ

**ุงูุชุญูู**:
- ูู ูุฐู ุงููุฏููุนุงุช ูุนูุงู ููุฑุฑุฉุ
- ูู ููุงู ุฃุฎุทุงุก ูู ุงูุชุณุฌููุ

**ุงูุฅุฌุฑุงุก**:
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ููุฑุฑุฉุ ูุฌุจ ุญุฐู ุงููุฏููุนุงุช ุงูููุฑุฑุฉ
- ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุตุญูุญุฉุ ูุฌุจ ุงูุชุฃูุฏ ูู ูุฌูุฏ ููุงุชูุฑ ุดุฑุงุก ููุงุจููุง

## ๐ ุฎุทูุงุช ุงููุฑุงุฌุนุฉ

### ุงูุฎุทูุฉ 1: ุชุดุบูู ุงูุณูุฑูุจุชุงุช
```sql
-- 1. ูุฑุงุฌุนุฉ ุดุงููุฉ
\i scripts/review_payments_and_vendor_credits.sql

-- 2. ูุฑุงุฌุนุฉ ุงููุฏููุนุงุช ุงููุจูุฑุฉ ูุงููุดุจููุฉ
\i scripts/review_specific_payments.sql
```

### ุงูุฎุทูุฉ 2: ุชุญููู ุงููุชุงุฆุฌ
1. **ูุฑุงุฌุนุฉ ุงููุฏููุนุงุช ุงููุจูุฑุฉ**:
   - ูู ุงููุฏููุนุงุช ุชุทุงุจู ููุงุชูุฑ ุงูุดุฑุงุกุ
   - ูู ููุงู ูุฏููุนุงุช ุฃูุจุฑ ูู ูุจูุบ ุงููุงุชูุฑุฉุ

2. **ูุฑุงุฌุนุฉ ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู**:
   - ูู ุฅุดุนุงุฑุงุช ุงูุฏุงุฆู ุตุญูุญุฉุ
   - ูู ููุงู ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ ููุฑุฑุฉุ

3. **ูุฑุงุฌุนุฉ ุงููุฏููุนุงุช ุจุฏูู ููุงุชูุฑ**:
   - ูู ูุฐู ุงููุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏููุ
   - ูู ููุงู ููุงุชูุฑ ุดุฑุงุก ููููุฏุฉุ

### ุงูุฎุทูุฉ 3: ุชุญุฏูุฏ ุงูุฅุฌุฑุงุกุงุช ุงููุทููุจุฉ
1. **ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุตุญูุญุฉ**:
   - ุฅูุดุงุก ุญุณุงุจ "ูุฏููุนุงุช ูุณุจูุฉ ููููุฑุฏูู" (Prepaid Expenses)
   - ููู ุงูุฑุตูุฏ ุงูุณุงูุจ ูู AP ุฅูู Prepaid Expenses

2. **ุฅุฐุง ูุงูุช ุงููุฏููุนุงุช ุฎุงุทุฆุฉ**:
   - ุชุตุญูุญ ุงููุจุงูุบ
   - ุญุฐู ุงููุฏููุนุงุช ุงูููุฑุฑุฉ
   - ุฑุจุท ุงููุฏููุนุงุช ุจููุงุชูุฑ ุดุฑุงุก

### ุงูุฎุทูุฉ 4: ุชุทุจูู ุงูุฅุตูุงุญุงุช
ุจุนุฏ ุชุญุฏูุฏ ุงููุดุงููุ ูููู ุงุณุชุฎุฏุงู ุงูุณูุฑูุจุชุงุช ุงูุชุงููุฉ ููุฅุตูุงุญ:
- `scripts/fix_payment_amounts.sql` (ุณูุชู ุฅูุดุงุคู ุจุนุฏ ุงููุฑุงุฌุนุฉ)
- `scripts/fix_duplicate_payments.sql` (ุณูุชู ุฅูุดุงุคู ุจุนุฏ ุงููุฑุงุฌุนุฉ)
- `scripts/create_prepaid_expenses_account.sql` (ุณูุชู ุฅูุดุงุคู ุจุนุฏ ุงููุฑุงุฌุนุฉ)

## ๐ ูุซุงู ุนูู ุงููุชุงุฆุฌ ุงููุชููุนุฉ

### ูุซุงู 1: ุงููุฏููุนุงุช ุงููุจูุฑุฉ
```
payment_id | payment_date | amount | bill_total | payment_status
-----------|--------------|--------|------------|----------------
abc-123    | 2024-01-15   | 100000 | 80000      | โ๏ธ ุงููุฏููุนุงุช ุฃูุจุฑ ูู ูุจูุบ ุงููุงุชูุฑุฉ
```

**ุงูุชุญููู**: ุงููุฏููุนุงุช ุฃูุจุฑ ูู ูุจูุบ ุงููุงุชูุฑุฉ ุจููุฏุงุฑ 20,000. ูุฌุจ ุงูุชุญูู ูู:
- ูู ูุฐู ูุฏููุนุงุช ูุณุจูุฉุ
- ูู ููุงู ุฎุทุฃ ูู ุชุณุฌูู ุงููุจูุบุ

### ูุซุงู 2: ุงููุฏููุนุงุช ุจุฏูู ููุงุชูุฑ
```
payment_id | payment_date | amount | supplier_name | issue
-----------|--------------|--------|---------------|------------------
def-456    | 2024-01-20   | 50000  | Supplier A    | โ๏ธ ูุง ุชูุฌุฏ ูุงุชูุฑุฉ ุดุฑุงุก ูุฑุชุจุทุฉ
```

**ุงูุชุญููู**: ูุฏููุนุงุช ุจุฏูู ููุงุชูุฑ ุดุฑุงุก. ูุฌุจ ุงูุชุญูู ูู:
- ูู ูุฐู ูุฏููุนุงุช ูุณุจูุฉุ
- ูู ููุงู ููุงุชูุฑ ุดุฑุงุก ููููุฏุฉุ

## โ ุงูุชุญูู ุงูููุงุฆู

ุจุนุฏ ุชุทุจูู ุงูุฅุตูุงุญุงุชุ ูุฌุจ ุงูุชุญูู ูู:
1. **ุงูุฑุตูุฏ ุงูุณุงูุจ ูู AP**:
   ```sql
   SELECT
     SUM(CASE WHEN coa.account_type = 'liability' AND coa.sub_type = 'accounts_payable' THEN
       COALESCE(coa.opening_balance, 0) +
       CASE
         WHEN coa.account_type IN ('asset', 'expense') THEN COALESCE(am.total_debit, 0) - COALESCE(am.total_credit, 0)
         ELSE COALESCE(am.total_credit, 0) - COALESCE(am.total_debit, 0)
       END
     ELSE 0 END) AS ap_balance
   FROM chart_of_accounts coa
   LEFT JOIN (
     SELECT account_id, SUM(debit_amount) AS total_debit, SUM(credit_amount) AS total_credit
     FROM journal_entry_lines jel
     JOIN journal_entries je ON je.id = jel.journal_entry_id
     WHERE je.deleted_at IS NULL
     GROUP BY account_id
   ) am ON am.account_id = coa.id
   WHERE coa.is_active = true;
   ```

2. **ุชูุงุฒู ุงูููุฒุงููุฉ**:
   ```sql
   \i scripts/final_balance_check.sql
   ```

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู ุฃุซูุงุก ุงููุฑุงุฌุนุฉุ ูุฑุฌู:
1. ุญูุธ ูุชุงุฆุฌ ุงูุณูุฑูุจุชุงุช
2. ุชูุซูู ุงููุดุงูู ุงูููุชุดูุฉ
3. ุงูุงุชุตุงู ุจุงูุฏุนู ุงูููู

---

**ุชุงุฑูุฎ ุงูุฅูุดุงุก**: 2024-01-XX
**ุขุฎุฑ ุชุญุฏูุซ**: 2024-01-XX
