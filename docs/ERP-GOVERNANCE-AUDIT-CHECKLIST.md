# ๐ ERP Governance Audit Checklist

## ูุธุงู ุงูุญูููุฉ ูุชุนุฏุฏ ุงููุฑูุน ููุฑุงูุฒ ุงูุชูููุฉ

### ๐ ูุงุฆูุฉ ุงูุชุฏููู ุงูููุงุฆูุฉ ูุฌููุน ุงูุตูุญุงุช

---

## 1๏ธโฃ ุตูุญุงุช ุงููุจูุนุงุช (Sales)

### ููุงุชูุฑ ุงูุจูุน (`/invoices`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ููุชุฑุฉ cost_center_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุฃุฒุฑู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |
| โ ุตูุงุญูุงุช ุงูุฅูุดุงุก | ูุทุจู | `canCreateDocument` |
| โ ุตูุงุญูุงุช ุงูุญุฐู | ูุทุจู | `canAccessDocument` |

### ุฃูุงูุฑ ุงูุจูุน (`/sales-orders`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ููุชุฑุฉ cost_center_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุฃุฒุฑู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |
| โ ุตูุงุญูุงุช ุงูุฅูุดุงุก | ูุทุจู | `canCreateDocument` |

### ูุฑุชุฌุนุงุช ุงููุจูุนุงุช (`/sales-returns`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุจุฑุชูุงูู |
| โ Realtime Updates | ูุทุจู | `loadReturnsData()` |

### ุฅุดุนุงุฑุงุช ูุฏููุฉ ุงูุนููุงุก (`/customer-debit-notes`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ูุฑุฏู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

---

## 2๏ธโฃ ุตูุญุงุช ุงููุดุชุฑูุงุช (Purchases)

### ููุงุชูุฑ ุงูุดุฑุงุก (`/bills`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ููุชุฑุฉ cost_center_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุจููุณุฌู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |
| โ ุตูุงุญูุงุช ุงูุฅูุดุงุก | ูุทุจู | `canCreateDocument` |

### ุฃูุงูุฑ ุงูุดุฑุงุก (`/purchase-orders`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุจููุณุฌู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

### ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช (`/purchase-returns`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุจููุณุฌู |
| โ Realtime Updates | ูุทุจู | `loadReturnsRef.current()` |

### ุฅุดุนุงุฑุงุช ุฏุงุฆูุฉ ุงูููุฑุฏูู (`/vendor-credits`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุณูุงูู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

---

## 3๏ธโฃ ุตูุญุงุช ุงููุงููุฉ (Finance)

### ุงููุฏููุนุงุช (`/payments`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `buildDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน (ุนููุงุก) | ููุฌูุฏ | ููู ุฃุฒุฑู |
| โ ุนููุฏ ุงููุฑุน (ููุฑุฏูู) | ููุฌูุฏ | ููู ุจููุณุฌู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |
| โ ุญูุงูุฉ ุงูุฏูุน ุนุจุฑ ุงููุฑูุน | ูุทุจู | `canPayOnDocument()` |

### ุงููุตุฑููุงุช (`/expenses`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุฃุฎุถุฑ |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

### ุงููููุฏ ุงูููููุฉ (`/journal-entries`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ุฃุฎุถุฑ ูุฒุฑู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

### ุงูุฃุตูู ุงูุซุงุจุชุฉ (`/fixed-assets`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ููุฑูุงูู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

---

## 4๏ธโฃ ุตูุญุงุช ุงููุฎุฒูู (Inventory)

### ุญุฑูุงุช ุงููุฎุฒูู (`/inventory-transfers`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ branch_id | ูุทุจู | `applyDataVisibilityFilter` |
| โ ุนููุฏ ุงููุฑุน | ููุฌูุฏ | ููู ูููู |
| โ Realtime Updates | ูุทุจู | `useRealtimeTable` |

### ุงููุฎุฒูู (`/inventory`)
| ุงูุจูุฏ | ุงูุญุงูุฉ | ููุงุญุธุงุช |
|-------|--------|---------|
| โ ููุชุฑุฉ warehouse_id | ูุทุจู | ุญุณุจ ุงูุฏูุฑ |
| โ ุนููุฏ ุงููุฎุฒู | ููุฌูุฏ | - |

---

## 5๏ธโฃ ููุงุนุฏ ุงูุตูุงุญูุงุช (Access Control Rules)

### ูุณุชููุงุช ุงููุตูู
| ุงูุฏูุฑ | ูุณุชูู ุงููุตูู | ุงูููุชุฑุฉ |
|-------|--------------|---------|
| `owner` | company | ูุฑู ูู ุจูุงูุงุช ุงูุดุฑูุฉ |
| `admin` | company | ูุฑู ูู ุจูุงูุงุช ุงูุดุฑูุฉ |
| `general_manager` | company | ูุฑู ูู ุจูุงูุงุช ุงูุดุฑูุฉ |
| `manager` | branch | ูุฑู ุจูุงูุงุช ูุฑุนู ููุท |
| `accountant` | branch | ูุฑู ุจูุงูุงุช ูุฑุนู ููุท |
| `staff` | own | ูุฑู ูุง ุฃูุดุฃู ููุท |
| `sales` | own | ูุฑู ูุง ุฃูุดุฃู ููุท |
| `employee` | own | ูุฑู ูุง ุฃูุดุฃู ููุท |

### ููุชุฑ ุงููุฑูุน ูู ุงููุงุฌูุฉ
| ุงูุฏูุฑ | ูุฑู ููุชุฑ ุงููุฑูุนุ |
|-------|------------------|
| `owner` | โ ูุนู |
| `admin` | โ ูุนู |
| `general_manager` | โ ูุนู |
| `manager` | โ ูุง |
| `accountant` | โ ูุง |
| `staff` | โ ูุง |

---

## 6๏ธโฃ ุงูููููุงุช ุงูููุญุฏุฉ (Unified Components)

### `useBranchFilter` Hook
- **ุงูููู**: `hooks/use-branch-filter.ts`
- **ุงููุธููุฉ**: ุฅุฏุงุฑุฉ ููุชุฑุฉ ุงููุฑูุน ุญุณุจ ุตูุงุญูุงุช ุงููุณุชุฎุฏู
- **ุงูุงุณุชุฎุฏุงู**: ูู ุฌููุน ุตูุญุงุช ุงูููุงุฆู

### `BranchFilter` Component
- **ุงูููู**: `components/BranchFilter.tsx`
- **ุงููุธููุฉ**: ููุชุฑ ุงููุฑูุน ุงูููุญุฏ (ูุธูุฑ ููุท ูููุตุฑุญ ููู)
- **ุงูุงุณุชุฎุฏุงู**: ูู header ุงูุตูุญุงุช

### `BranchBadge` Component
- **ุงูููู**: `components/BranchFilter.tsx`
- **ุงููุธููุฉ**: ุนุฑุถ ุงุณู ุงููุฑุน ูู ุงูุฌุฏุงูู
- **ุงูุฃููุงู**: blue, purple, green, orange, pink, cyan, amber, teal, indigo

### `BranchAwareDataTable` Component
- **ุงูููู**: `components/BranchAwareDataTable.tsx`
- **ุงููุธููุฉ**: ุฌุฏูู ููุญุฏ ูุน ููุชุฑุฉ ุงููุฑูุน ุงููุฏูุฌุฉ
- **ุงูููุฒุงุช**: ููุชุฑ ุงููุฑูุนุ ุงูุจุญุซุ ุงูุชุญุฏูุซุ ุงูุชุตุฏูุฑุ ุงูุฅุถุงูุฉ

---

## 7๏ธโฃ ูููุงุช ุงูุญูููุฉ ุงูุฃุณุงุณูุฉ

| ุงูููู | ุงููุธููุฉ |
|-------|---------|
| `lib/data-visibility-control.ts` | ููุงุนุฏ ุงูุฑุคูุฉ ูุงูููุชุฑุฉ |
| `lib/validation.ts` | ุงูุชุญูู ูู ุงูุตูุงุญูุงุช |
| `hooks/use-user-context.ts` | ุณูุงู ุงููุณุชุฎุฏู |
| `hooks/use-branch-filter.ts` | ููุชุฑุฉ ุงููุฑูุน |
| `hooks/use-realtime-table.ts` | ุงูุชุญุฏูุซ ุงูููุฑู |

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

- โ **ูุตู ูุงูู ููุจูุงูุงุช ุจูู ุงููุฑูุน**
- โ **ุตูุงุญูุงุช ูุงุถุญุฉ ููุญุฏุฏุฉ**
- โ **ุนููุฏ ุงููุฑุน ููุฌูุฏ ูู ุฌููุน ุงูููุงุฆู**
- โ **ุชุญุฏูุซ ุงูุจูุงูุงุช ุจุฏูู Refresh**
- โ **ุณููู ูุทุงุจู ูู ERP ุงุญุชุฑุงูู (Odoo / Zoho)**
- โ **ููููุงุช ููุญุฏุฉ ูุณูููุฉ ุงูุตูุงูุฉ**

---

*ุขุฎุฑ ุชุญุฏูุซ: 2026-01-31*

