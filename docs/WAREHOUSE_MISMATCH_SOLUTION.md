# ๐ง ุญู ูุดููุฉ ุงูุฅููุงู: ุงูููุชุฌ ูู ูุฎุฒู ูุฎุชูู

## ๐ ุงููุดููุฉ ุงููุญุฏุฏุฉ

ูู ูุชุงุฆุฌ ุงูุชุดุฎูุต:
- **ุงูููุชุฌ ููุฌูุฏ ูู**: ุงููุฎุฒู ุงูุฑุฆูุณู (`21eb8605-99f3-4656-89d8-d843413ec4ac`)
- **ุงูุฑุตูุฏ ูู ุงููุฎุฒู ุงูุฑุฆูุณู**: 10,000 ูุญุฏุฉ
- **ูุญุงููุฉ ุงูุฅููุงู ูู**: ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ (`3c9a544b-931b-46b0-b429-a89bb7889fa3`)
- **ุงูุฑุตูุฏ ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ**: 0 ูุญุฏุฉ

**ุงููุชูุฌุฉ**: ุงูุฑุตูุฏ ุงููุชุงุญ = 0 ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ โ ุฎุทุฃ "ูุง ูููู ุฅููุงู ุงููุฎุฒูู ุจุฏูู ุฑุตูุฏ ูุนูู"

## โ ุงูุญููู ุงูููููุฉ

### ุงูุญู 1: ููู ุงููุฎุฒูู ูู ุงููุฎุฒู ุงูุฑุฆูุณู ุฅูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ (ููุตู ุจู)

ุฅุฐุง ูุงู ุงูุฅููุงู ูุฌุจ ุฃู ูุชู ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉุ ูุฌุจ ููู ุงููุฎุฒูู ุฃููุงู:

```sql
-- 1. ุงูุญุตูู ุนูู IDs ูู ูุชุงุฆุฌ ุงูุชุดุฎูุต
-- 2. ููู 50 ูุญุฏุฉ (ุฃู ุงููููุฉ ุงููุทููุจุฉ) ูู ุงููุฎุฒู ุงูุฑุฆูุณู ุฅูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ

INSERT INTO inventory_transactions (
  company_id,
  product_id,
  transaction_type,
  quantity_change,
  warehouse_id,
  branch_id,
  cost_center_id,
  notes
) VALUES 
-- ุฎุฑูุฌ ูู ุงููุฎุฒู ุงูุฑุฆูุณู
(
  'COMPANY_ID_HERE'::UUID,
  'PRODUCT_ID_HERE'::UUID,
  'transfer',
  -50,  -- ุฎุฑูุฌ
  '21eb8605-99f3-4656-89d8-d843413ec4ac'::UUID,  -- ูู ุงููุฎุฒู ุงูุฑุฆูุณู
  (SELECT branch_id FROM warehouses WHERE id = '21eb8605-99f3-4656-89d8-d843413ec4ac'::UUID),
  (SELECT default_cost_center_id FROM branches WHERE id = (SELECT branch_id FROM warehouses WHERE id = '21eb8605-99f3-4656-89d8-d843413ec4ac'::UUID)),
  'ููู ููุฅููุงู - ุฅูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ'
),
-- ุฏุฎูู ุฅูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ
(
  'COMPANY_ID_HERE'::UUID,
  'PRODUCT_ID_HERE'::UUID,
  'transfer',
  50,  -- ุฏุฎูู
  '3c9a544b-931b-46b0-b429-a89bb7889fa3'::UUID,  -- ุฅูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ
  (SELECT branch_id FROM warehouses WHERE id = '3c9a544b-931b-46b0-b429-a89bb7889fa3'::UUID),
  (SELECT default_cost_center_id FROM branches WHERE id = (SELECT branch_id FROM warehouses WHERE id = '3c9a544b-931b-46b0-b429-a89bb7889fa3'::UUID)),
  'ููู ููุฅููุงู - ูู ุงููุฎุฒู ุงูุฑุฆูุณู'
);
```

ุจุนุฏ ุงููููุ ูููู ุฅุฌุฑุงุก ุงูุฅููุงู ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ.

---

### ุงูุญู 2: ุงูุฅููุงู ูู ุงููุฎุฒู ุงูุฑุฆูุณู ูุจุงุดุฑุฉ

ุฅุฐุง ูุงู ุงูุฅููุงู ูุฌุจ ุฃู ูุชู ูู ุงููุฎุฒู ุงูุฑุฆูุณู ุญูุซ ููุฌุฏ ุงูููุชุฌ ูุนููุงู:

1. ูู ุตูุญุฉ ุงูุฅููุงูุ ุงุฎุชุฑ **ุงููุฎุฒู ุงูุฑุฆูุณู** ุจุฏูุงู ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ
2. ุฃู ูู ุจุชุญุฏูุซ `warehouse_id` ูู ุนูููุฉ ุงูุฅููุงู ุฅูู: `21eb8605-99f3-4656-89d8-d843413ec4ac`

---

### ุงูุญู 3: ุงูุชุญูู ูู ุงุฎุชูุงุฑ ุงููุฎุฒู ูู ุงููุงุฌูุฉ

ุชุฃูุฏ ูู:
1. ุฃู ุงููุณุชุฎุฏู ูุฎุชุงุฑ ุงููุฎุฒู ุงูุตุญูุญ ูู ุตูุญุฉ ุงูุฅููุงู
2. ุฃู ุงููุฎุฒู ุงููุฎุชุงุฑ ูุญุชูู ุนูู ุฑุตูุฏ ูุนูู ููููุชุฌ
3. ุฅุถุงูุฉ ุชุญุฐูุฑ ูู ุงููุงุฌูุฉ ุฅุฐุง ูุงู ุงูุฑุตูุฏ = 0 ูู ุงููุฎุฒู ุงููุฎุชุงุฑ

---

## ๐ ุฎุทูุงุช ุงูุชุทุจูู

### ุงูุฎุทูุฉ 1: ูุญุต ุชูุงุตูู ุงููุฎุงุฒู

ุดุบูู ุงูุงุณุชุนูุงู ุงูุชุงูู ููุญุตูู ุนูู ูุนูููุงุช ุงููุฎุงุฒู:

```sql
-- ูุญุต ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ
SELECT id, name, branch_id FROM warehouses 
WHERE id = '3c9a544b-931b-46b0-b429-a89bb7889fa3'::UUID;

-- ูุญุต ุงููุฎุฒู ุงูุฑุฆูุณู
SELECT id, name, branch_id FROM warehouses 
WHERE id = '21eb8605-99f3-4656-89d8-d843413ec4ac'::UUID;
```

### ุงูุฎุทูุฉ 2: ุงุฎุชูุงุฑ ุงูุญู ุงูููุงุณุจ

- **ุฅุฐุง ูุงู ุงูุฅููุงู ูุฌุจ ุฃู ูููู ูู ูุฎุฒู ูุตุฑ ุงูุฌุฏูุฏุฉ**: ุงุณุชุฎุฏู ุงูุญู 1 (ููู ุงููุฎุฒูู)
- **ุฅุฐุง ูุงู ุงูุฅููุงู ูููู ุฃู ูููู ูู ุงููุฎุฒู ุงูุฑุฆูุณู**: ุงุณุชุฎุฏู ุงูุญู 2 (ุชุบููุฑ ุงููุฎุฒู)

### ุงูุฎุทูุฉ 3: ุงูุชูููุฐ

ุจุนุฏ ุงุฎุชูุงุฑ ุงูุญูุ ูู ุจุชูููุฐ ุงูุฎุทูุงุช ุงููุฐููุฑุฉ ุฃุนูุงู.

---

## ๐ ูููุงุช ูุณุงุนุฏุฉ

- `scripts/CHECK_WAREHOUSE_MISMATCH.sql` - ูุญุต ุชูุงุตูู ุงููุฎุงุฒู ูุงูุฑุตูุฏ
- `scripts/FIX_WRITE_OFF_WAREHOUSE_MISMATCH.sql` - ุฅุตูุงุญ ุงููุดููุฉ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ููู ุงููุฎุฒูู**: ุชุฃูุฏ ูู ุฃู ุงูููู ูุชู ุจูู ูุฎุงุฒู ูู ููุณ ุงูุดุฑูุฉ
2. **ุงูุชุญูู ูู ุงูุฑุตูุฏ**: ูุจู ุงููููุ ุชุฃูุฏ ูู ูุฌูุฏ ุฑุตูุฏ ูุงูู ูู ุงููุฎุฒู ุงููุตุฏุฑ
3. **ูุฑุงูุฒ ุงูุชูููุฉ**: ุชุฃูุฏ ูู ุฃู `cost_center_id` ุตุญูุญ ููู ูุฎุฒู
