# ูุธุงู ุฅุดุนุงุฑุงุช ุฏุงุฆู ุงูููุฑุฏูู ุงูุชููุงุฆู (Vendor Credits)

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชูููุฐ ูุธุงู ุฅุดุนุงุฑุงุช ุฏุงุฆู ุงูููุฑุฏูู (Vendor Credits) ุงูุชููุงุฆู ุนูุฏ ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช ูููุงู ููููุงุตูุงุช ุงูุฅูุฒุงููุฉ ุงูุชุงููุฉ:

## โ ุงูููุงุนุฏ ุงูุฅูุฒุงููุฉ

### 1๏ธโฃ ูุชู ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู ุชููุงุฆูุงู

| ุญุงูุฉ ุงููุงุชูุฑุฉ | ุฅูุดุงุก Vendor Credit | ููุงุญุธุงุช |
|---------------|---------------------|----------|
| **Paid** | โ ูุนู | ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู ุชููุงุฆูุงู ุจูููุฉ ุงููุฑุชุฌุน |
| **Partially Paid** | โ ูุนู | ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู ุชููุงุฆูุงู ุจูููุฉ ุงููุฑุชุฌุน |
| **Received** | โ ูุง | ูุง ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู (ุบูุฑ ูุฏููุนุฉ) |
| **Draft** | โ ูุง | ูุง ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู |

### 2๏ธโฃ ุฑุจุท ุงูุฅุดุนุงุฑ ุจุงูุณูุงู ุงูุตุญูุญ

ูุฌุจ ุฃู ูููู ุฅุดุนุงุฑ ุงูุฏุงุฆู ูุฑุชุจุทุงู ุฅูุฒุงููุงู ุจู:

- โ `company_id` - ูุนุฑู ุงูุดุฑูุฉ
- โ `branch_id` - ูุนุฑู ุงููุฑุน (ูู ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ)
- โ `cost_center_id` - ูุนุฑู ูุฑูุฒ ุงูุชูููุฉ (ุฅู ูุฌุฏ)
- โ `supplier_id` - ูุนุฑู ุงูููุฑุฏ
- โ `source_purchase_invoice_id` - ูุนุฑู ูุงุชูุฑุฉ ุงูุดุฑุงุก ุงูุฃุตููุฉ
- โ `source_purchase_return_id` - ูุนุฑู ูุฑุชุฌุน ุงููุดุชุฑูุงุช

โ **ูููุน ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู ุจุฏูู ูุฐู ุงูุงุฑุชุจุงุทุงุช**

### 3๏ธโฃ ุงูุจููุฏ ูุงูููู

- โ ูุชู ุฅูุดุงุก ุจููุฏ ุฅุดุนุงุฑ ุงูุฏุงุฆู ุจูุงุกู ุนูู:
  - ุงูุฃุตูุงู ุงููุฑุชุฌุนุฉ
  - ุงููููุงุช ุงููุนููุฉ
  - ุงูุฃุณุนุงุฑ ูุงูุถุฑุงุฆุจ ุงูุฃุตููุฉ
- โ ุฅุฌูุงูู ุฅุดุนุงุฑ ุงูุฏุงุฆู = ูููุฉ ุงููุฑุชุฌุน ููุท (ุฌุฒุฆู ุฃู ูุชุจูู)

### 4๏ธโฃ ุงูุฃุซุฑ ุงููุญุงุณุจู

- โ ูุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุนูุณู ุตุญูุญ ูุฅุดุนุงุฑ ุงูุฏุงุฆู
- โ ุงูููุฏ ูุญุชูู ุฅูุฒุงููุงู ุนูู:
  - `reference_type = 'vendor_credit'`
  - `reference_id = vendor_credit_id`
- โ ูููุน ุชุนุฏูู ุฃู ููุฏ ูุฑุชุจุท ุจุนุฏ ุฅูุดุงุฆู

### 5๏ธโฃ ุญุงูุฉ ุงูุฅุดุนุงุฑ

ูุชู ุฅูุดุงุก ุงูุฅุดุนุงุฑ ุจุญุงูุฉ:
- โ `open` - ุฅุฐุง ูู ููุทุจู

ูุชู ุชุญุฏูุซ ุงูุญุงูุฉ ุชููุงุฆูุงู ุฅูู:
- โ `applied` - ุฌุฒุฆู (ุนูุฏ ุชุทุจูู ุฌุฒุก ูู ุงููุจูุบ)
- โ `closed` - ูุงูู (ุนูุฏ ุชุทุจูู ูุงูู ุงููุจูุบ)

### 6๏ธโฃ ุงูุชุทุจูู ุนูู ููุงุชูุฑ ุงูููุฑุฏ

- โ ูุณูุญ ุจุชุทุจูู ุฅุดุนุงุฑ ุงูุฏุงุฆู ุนูู:
  - ููุณ ุงููุงุชูุฑุฉ
  - ุฃู ููุงุชูุฑ ุฃุฎุฑู ูููุณ ุงูููุฑุฏ
- โ ูุชู ุชุชุจุน:
  - ุงููุจูุบ ุงููุทุจู (`applied_amount`)
  - ุงููุจูุบ ุงููุชุจูู (`remaining_amount`)
- โ ูููุน ุชุทุจูู ุฅุดุนุงุฑ ุฏุงุฆู ุนูู ููุฑุฏ ูุฎุชูู

### 7๏ธโฃ ุตูุญุฉ ุงูููุฑุฏ (Vendor Page)

- โ ุตูุญุฉ ุงูููุฑุฏ ุชูุณุชุฎุฏู ููุนุฑุถ ููุท:
  - ุงูุฐูู
  - ุงูุฑุตูุฏ
  - ุงูุฅุดุนุงุฑุงุช
- โ ูุง ูุชู ุฅูุดุงุก ุฃู ุชุนุฏูู ุฃุฑุตุฏุฉ ูุจุงุดุฑุฉ ูู ุตูุญุฉ ุงูููุฑุฏ ุจุฏูู ูุณุชูุฏ (Vendor Credit)

### 8๏ธโฃ ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงูุญุงููุฉ (Existing Data)

- โ ุชู ุชูููุฐ Migration Script ููุนุงูุฌุฉ:
  - ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช ุงูููุฌูุฏุฉ ุญุงููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  - ูุงูุชู ุชูุช ุนูู ููุงุชูุฑ Paid / Partially Paid
- โ ูุชู ุฅูุดุงุก Vendor Credits ููุงุจูุฉ ููุง ุชููุงุฆูุงู ูุน ุงูุฑุจุท ุงูุตุญูุญ ุจุงูููุงุชูุฑ ูุงูููุฑุฏูู ูุงููุฑูุน
- โ ูููุน ุงุฒุฏูุงุฌ ุฅูุดุงุก ุฅุดุนุงุฑ ูููุณ ุงููุฑุชุฌุน

## ๐๏ธ ุงููููุงุช ุงููุนุฏูุฉ

### 1. Database Schema
- `scripts/092_vendor_credits_enhancement.sql` - ุชุญุณูู ุฌุฏูู vendor_credits

### 2. Helper Functions
- `lib/purchase-returns-vendor-credits.ts` - ุฏูุงู ูุณุงุนุฏุฉ ูุฅูุดุงุก Vendor Credits

### 3. UI Components
- `app/purchase-returns/new/page.tsx` - ุชุญุฏูุซ ููุทู ูุฑุชุฌุนุงุช ุงููุดุชุฑูุงุช
- `app/vendor-credits/[id]/page.tsx` - ุชุญุฏูุซ ุตูุญุฉ ุนุฑุถ Vendor Credit

### 4. Migration Scripts
- `scripts/093_migrate_existing_purchase_returns_to_vendor_credits.sql` - ูุนุงูุฌุฉ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ

## ๐ ููููุฉ ุงูุชุทุจูู

### 1. ุชุทุจูู ุชุญุฏูุซุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
# ุชุทุจูู ุชุญุณููุงุช ุฌุฏูู vendor_credits
psql -U postgres -d your_database -f scripts/092_vendor_credits_enhancement.sql

# ุชุทุจูู migration ููุจูุงูุงุช ุงูููุฌูุฏุฉ
psql -U postgres -d your_database -f scripts/093_migrate_existing_purchase_returns_to_vendor_credits.sql
```

### 2. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู

```bash
npm run dev
```

## ๐ ุงููุฏู ุงูููุงุฆู

- โ ุชูุซูู ูู ุฑุตูุฏ ุฏุงุฆู ููููุฑุฏ ุจูุณุชูุฏ ุฑุณูู
- โ ุงูุญูุงุธ ุนูู ุณูุงูุฉ ุงูุฐูู
- โ ุฏุนู ุงูุชุฏููู ูุงููุฑุงุฌุนุฉ
- โ ุงูุงูุชุฒุงู ุงูุตุงุฑู ุจููุท ERP ุงููุญุงุณุจู ูุงููุฎุฒูู ุงููุนุชูุฏ

## ๐ ูุซุงู ุนูู ุณูุฑ ุงูุนูู

1. **ุฅูุดุงุก ูุงุชูุฑุฉ ุดุฑุงุก** (Bill) ุจุญุงูุฉ `Paid`
2. **ุฅูุดุงุก ูุฑุชุฌุน ูุดุชุฑูุงุช** (Purchase Return) ุนูู ุงููุงุชูุฑุฉ
3. **ุฅูุดุงุก Vendor Credit ุชููุงุฆูุงู** ุจูููุฉ ุงููุฑุชุฌุน
4. **ุฑุจุท Vendor Credit** ุจุงููุงุชูุฑุฉ ูุงูููุฑุฏ ูุงููุฑุน ููุฑูุฒ ุงูุชูููุฉ
5. **ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุนูุณู** ูููุฑุชุฌุน
6. **ุชุทุจูู Vendor Credit** ุนูู ููุงุชูุฑ ุฃุฎุฑู ููููุฑุฏ (ุงุฎุชูุงุฑู)

## โ๏ธ ููุงุญุธุงุช ูููุฉ

- ูุชู ุฅูุดุงุก Vendor Credit **ููุท** ููููุงุชูุฑ ุงููุฏููุนุฉ (Paid/Partially Paid)
- ูุง ูุชู ุฅูุดุงุก Vendor Credit ููููุงุชูุฑ ุงููุณุชููุฉ (Received) ุฃู ุงููุณูุฏุฉ (Draft)
- ูููุน ุงุฒุฏูุงุฌ ุฅูุดุงุก Vendor Credit ูููุณ ุงููุฑุชุฌุน
- ูุชู ุชุญุฏูุซ ุญุงูุฉ Vendor Credit ุชููุงุฆูุงู ุนูุฏ ุงูุชุทุจูู ุนูู ููุงุชูุฑ

## ๐ ุงูุชุญุฏูุซุงุช ุงููุณุชูุจููุฉ

- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ Vendor Credits
- [ ] ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช ููููุฑุฏูู ุนูุฏ ุฅูุดุงุก Vendor Credit
- [ ] ุฏุนู ุชุตุฏูุฑ Vendor Credits ุฅูู PDF
- [ ] ุฅุถุงูุฉ ุณุฌู ุชุงุฑูุฎู ูุชุทุจููุงุช Vendor Credits

