# โ ERP Compliance Audit Checklist - ูุงุฆูุฉ ุงูุชุญูู ุงูุดุงููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุฐู ุงููุงุฆูุฉ ุชุญุชูู ุนูู ุฌููุน ููุงุท ุงูุชุญูู ุงูุฅูุฒุงููุฉ ููุชุฃูุฏ ูู ุงูุชุฒุงู ุงููุธุงู ุจุงูููุงุนุฏ ุงููุญุงุณุจูุฉ ูุงูุญูููุฉ.

**ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ**: ___________  
**ุงููุฑุงุฌุน**: ___________  
**ุงูุญุงูุฉ**: ๐ด ูู ูุจุฏุฃ / ๐ก ููุฏ ุงูุชูููุฐ / ๐ข ููุชูู

---

## 1๏ธโฃ ุงูุทุจูุฉ ุงููุญุงุณุจูุฉ (Accounting Layer)

### Draft Invoices
- [ ] **SQL Query 1.1**: ููุงุชูุฑ Draft ุจุญุฑูุงุช ูุฎุฒูู = 0 rows
- [ ] **Code Review**: ูุง ููุฌุฏ ููุฏ ููุดุฆ ุญุฑูุงุช ูุฎุฒูู ูููุณูุฏุงุช
- [ ] **API Test**: POST /api/invoices (draft) ูุง ููุดุฆ inventory_transactions
- [ ] **UI Test**: ุฅูุดุงุก ูุงุชูุฑุฉ ูุณูุฏุฉ ูุง ูุคุซุฑ ุนูู ุงููุฎุฒูู

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### Sent Invoices
- [ ] **SQL Query 1.2**: ููุงุชูุฑ Sent ุจูููุฏ ูุญุงุณุจูุฉ = 0 rows
- [ ] **Code Review**: ูุง ููุฌุฏ ููุฏ ููุดุฆ journal_entries ููููุงุชูุฑ Sent
- [ ] **API Test**: ุชุบููุฑ ุญุงูุฉ ูุงุชูุฑุฉ ุฅูู Sent ูุง ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ
- [ ] **UI Test**: ุฅุฑุณุงู ูุงุชูุฑุฉ ููุดุฆ ุญุฑูุฉ ูุฎุฒูู ููุท (ุจุฏูู ูููุฏ)

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### Paid/Partially Paid Invoices
- [ ] **SQL Query 1.3**: ูููุฏ ูุญุงุณุจูุฉ ุจุฏูู ุฏูุนุงุช = 0 rows
- [ ] **SQL Query 1.4**: ููุงุชูุฑ ูุฏููุนุฉ ุจุฏูู ูููุฏ = 0 rows
- [ ] **Code Review**: ุงููููุฏ ุงููุญุงุณุจูุฉ ุชููุดุฃ ููุท ุนูุฏ ุงูุฏูุน ุงููุนูู
- [ ] **API Test**: ุฏูุน ูุงุชูุฑุฉ ููุดุฆ ููุฏ ูุญุงุณุจู ุจููุณ ุงููุจูุบ
- [ ] **UI Test**: ุฏูุน ุฌุฒุฆู ููุดุฆ ููุฏ ูููุจูุบ ุงููุฏููุน ููุท

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### Returns
- [ ] **Code Review**: ูุฑุชุฌุน Sent = ูุฎุฒูู ููุท (ุจุฏูู ูููุฏ)
- [ ] **Code Review**: ูุฑุชุฌุน Paid = ูุฎุฒูู + ููุฏ ุนูุณู + ุฑุตูุฏ ุฏุงุฆู
- [ ] **API Test**: ูุฑุชุฌุน ูุงุชูุฑุฉ Sent ูุง ููุดุฆ ูููุฏ ูุญุงุณุจูุฉ
- [ ] **API Test**: ูุฑุชุฌุน ูุงุชูุฑุฉ Paid ููุดุฆ ููุฏ ุนูุณู
- [ ] **UI Test**: ุงููุฑุชุฌุน ูุนูู ุญุณุจ ุญุงูุฉ ุงููุงุชูุฑุฉ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

## 2๏ธโฃ ุทุจูุฉ ุงููุฎุฒูู (Inventory Layer)

### Inventory Transactions
- [ ] **SQL Query 2.1**: ููุงุชูุฑ Draft ุจุญุฑูุงุช ูุฎุฒูู = 0 rows
- [ ] **SQL Query 2.2**: ููุงุชูุฑ Cancelled ุจุญุฑูุงุช ูุฎุฒูู = 0 rows
- [ ] **SQL Query 2.3**: ุงุฒุฏูุงุฌ ุงููุฎุฒูู (SO + Invoice) = 0 rows
- [ ] **Code Review**: ุงููุฎุฒูู ูุชุญุฑู ููุท ูู Sent/Returns
- [ ] **Database Trigger**: trg_apply_inventory_insert ูุนูู ุจุดูู ุตุญูุญ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### No Duplication
- [ ] **Logic Review**: ุฃูุฑ ุงูุจูุน ุฃู ุงููุงุชูุฑุฉ (ููุณ ููุงููุง) ูุฎุตู ุงููุฎุฒูู
- [ ] **API Test**: ุชุญููู ุฃูุฑ ุจูุน ุฅูู ูุงุชูุฑุฉ ูุง ูุฎุตู ุงููุฎุฒูู ูุฑุชูู
- [ ] **UI Test**: ุงููุงุชูุฑุฉ ุงููุฑุชุจุทุฉ ุจุฃูุฑ ุจูุน ูุง ุชุฎุตู ุงููุฎุฒูู ูุฑุฉ ุฃุฎุฑู

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

## 3๏ธโฃ ุทุจูุฉ ุงูุฑุจุท ุจูู ุงููุณุชูุฏุงุช (Document Integrity)

### Governance Context
- [ ] **SQL Query 3.1**: ููุงุชูุฑ ุจุฏูู ุณูุงู ุญูููุฉ = 0 rows
- [ ] **SQL Query 3.2**: ุฃูุงูุฑ ุจูุน ุจุฏูู ุณูุงู ุญูููุฉ = 0 rows
- [ ] **SQL Query 3.4**: ุญุฑูุงุช ูุฎุฒูู ุจุฏูู ุณูุงู = 0 rows
- [ ] **Code Review**: ูู ูุณุชูุฏ ูุญูู company_id, branch_id, warehouse_id, created_by_user_id
- [ ] **API Test**: ุฅูุดุงุก ูุณุชูุฏ ุจุฏูู ุณูุงู ููุดู

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### Sales Order Link
- [ ] **SQL Query 3.3**: ููุงุชูุฑ ุจุฏูู ุฑุจุท ุจุฃูุฑ ุจูุน = 0 rows (ุฃู ูููู ุฌุฏุงู)
- [ ] **Code Review**: ูู ูุงุชูุฑุฉ ูุฑุชุจุทุฉ ุจู sales_order_id
- [ ] **UI Test**: ูุง ูููู ุฅูุดุงุก ูุงุชูุฑุฉ ุจุฏูู ุฃูุฑ ุจูุน

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

## 4๏ธโฃ ุทุจูุฉ ุงูุญูููุฉ ูุงูุตูุงุญูุงุช (Governance & Roles)

### Role-Based Access
- [ ] **SQL Query 4.1**: ุฅุญุตุงุฆูุงุช ุงูุญูููุฉ ููููุงุชูุฑ = 100%
- [ ] **SQL Query 4.2**: ุฅุญุตุงุฆูุงุช ุงูุญูููุฉ ูุฃูุงูุฑ ุงูุจูุน = 100%
- [ ] **Code Review**: getRoleAccessLevel ูุนูู ุจุดูู ุตุญูุญ
- [ ] **Code Review**: getAccessFilter ูุทุจู ุงูููุงุชุฑ ุงูุตุญูุญุฉ
- [ ] **API Test**: ุงูููุธู ูุฑู ููุท ูุง ุฃูุดุฃู
- [ ] **API Test**: ุงููุญุงุณุจ ูุฑู ูู ุงููุฑุน
- [ ] **API Test**: ุงููุฏูุฑ ูุฑู ูู ุงููุฑุน
- [ ] **API Test**: ุงููุฏูุฑ ุงูุนุงู ูุฑู ูู ุงูุดุฑูุฉ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### No Bypass
- [ ] **Code Search**: ูุง ููุฌุฏ `.or('branch_id.is.null')`
- [ ] **Code Search**: ูุง ููุฌุฏ `.or('created_by_user_id.is.null')`
- [ ] **Code Search**: ูุง ููุฌุฏ `.is('branch_id', null)`
- [ ] **API Test**: ูุง ูููู ุชุฌุงูุฒ ุงูุญูููุฉ ุนุจุฑ API ูุจุงุดุฑ
- [ ] **Database**: ูุง ุชูุฌุฏ RLS policies ุชุณูุญ ุจุงูุชุฌุงูุฒ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

## 5๏ธโฃ ุทุจูุฉ ุงูุญูุงูุฉ ุงููุญุงุณุจูุฉ (Accounting Locks)

### Protected Invoices
- [ ] **SQL Query 5.1**: ููุงุชูุฑ ูุญููุฉ ุชู ุชุนุฏูููุง = ูุญุต ูุฏูู
- [ ] **Code Review**: ูุง ูููู ุชุนุฏูู ูุงุชูุฑุฉ Paid/Partially Paid
- [ ] **Code Review**: ูุง ูููู ุญุฐู ูุงุชูุฑุฉ ููุง ุฏูุนุงุช
- [ ] **API Test**: ูุญุงููุฉ ุชุนุฏูู ูุงุชูุฑุฉ ูุญููุฉ ุชูุดู
- [ ] **API Test**: ูุญุงููุฉ ุญุฐู ูุงุชูุฑุฉ ูุญููุฉ ุชูุดู
- [ ] **UI Test**: ุฃุฒุฑุงุฑ ุงูุชุนุฏูู/ุงูุญุฐู ูุนุทูุฉ ููููุงุชูุฑ ุงููุญููุฉ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

### Return Only
- [ ] **Code Review**: ุงูุทุฑููุฉ ุงููุญูุฏุฉ ูุนูุณ ูุงุชูุฑุฉ ูุญููุฉ ูู Return
- [ ] **UI Test**: ูุง ููุฌุฏ ุฒุฑ "ุญุฐู" ููููุงุชูุฑ Paid
- [ ] **UI Test**: ููุฌุฏ ุฒุฑ "ูุฑุชุฌุน" ููููุงุชูุฑ Paid

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail  
**ุงูููุงุญุธุงุช**: _________________________________

---

## 6๏ธโฃ ุงุฎุชุจุงุฑ ุงูุงูุชุฒุงู ุงูุดุงูู (End-to-End Testing)

### Scenario 1: Draft Invoice
- [ ] ุฅูุดุงุก ูุงุชูุฑุฉ ูุณูุฏุฉ
- [ ] ุงูุชุญูู: ูุง ุญุฑูุงุช ูุฎุฒูู
- [ ] ุงูุชุญูู: ูุง ูููุฏ ูุญุงุณุจูุฉ
- [ ] ุงูุชุญูู: ูุง ูููู ุงุณุชูุงู ุฏูุนุงุช
- [ ] ุงูุชุญูู: ูููู ุงูุชุนุฏูู ูุงูุญุฐู

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

### Scenario 2: Sent Invoice
- [ ] ุชุญููู ูุงุชูุฑุฉ ุฅูู Sent
- [ ] ุงูุชุญูู: ุชู ุฎุตู ุงููุฎุฒูู
- [ ] ุงูุชุญูู: ูุง ูููุฏ ูุญุงุณุจูุฉ
- [ ] ุงูุชุญูู: ูููู ุงุณุชูุงู ุฏูุนุงุช
- [ ] ุงูุชุญูู: ูุง ูููู ุงูุชุนุฏูู ุฃู ุงูุญุฐู

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

### Scenario 3: Payment
- [ ] ุฏูุน ุฌุฒุก ูู ูุงุชูุฑุฉ Sent
- [ ] ุงูุชุญูู: ุชู ุฅูุดุงุก ููุฏ ูุญุงุณุจู ุจููุณ ุงููุจูุบ
- [ ] ุงูุชุญูู: ุงูุญุงูุฉ = Partially Paid
- [ ] ุงูุชุญูู: ูุง ูููู ุงูุชุนุฏูู ุฃู ุงูุญุฐู
- [ ] ุฏูุน ุงููุชุจูู
- [ ] ุงูุชุญูู: ุงูุญุงูุฉ = Paid

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

### Scenario 4: Return (Sent Invoice)
- [ ] ุนูู ูุฑุชุฌุน ููุงุชูุฑุฉ Sent
- [ ] ุงูุชุญูู: ุชู ุฅุฑุฌุงุน ุงููุฎุฒูู
- [ ] ุงูุชุญูู: ูุง ูููุฏ ูุญุงุณุจูุฉ
- [ ] ุงูุชุญูู: ุชู ุชุญุฏูุซ ุงูุญุงูุฉ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

### Scenario 5: Return (Paid Invoice)
- [ ] ุนูู ูุฑุชุฌุน ููุงุชูุฑุฉ Paid
- [ ] ุงูุชุญูู: ุชู ุฅุฑุฌุงุน ุงููุฎุฒูู
- [ ] ุงูุชุญูู: ุชู ุฅูุดุงุก ููุฏ ุนูุณู
- [ ] ุงูุชุญูู: ุชู ุฅูุดุงุก ุฑุตูุฏ ุฏุงุฆู ููุนููู
- [ ] ุงูุชุญูู: ุชู ุชุญุฏูุซ ุงูุญุงูุฉ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

### Scenario 6: Role-Based Access
- [ ] ุชุณุฌูู ุฏุฎูู ูููุธู (staff)
- [ ] ุงูุชุญูู: ูุฑู ููุท ููุงุชูุฑู
- [ ] ุชุณุฌูู ุฏุฎูู ููุญุงุณุจ (accountant)
- [ ] ุงูุชุญูู: ูุฑู ููุงุชูุฑ ุงููุฑุน
- [ ] ุชุณุฌูู ุฏุฎูู ููุฏูุฑ (manager)
- [ ] ุงูุชุญูู: ูุฑู ููุงุชูุฑ ุงููุฑุน
- [ ] ุชุณุฌูู ุฏุฎูู ููุฏูุฑ ุนุงู (admin)
- [ ] ุงูุชุญูู: ูุฑู ูู ุงูููุงุชูุฑ

**ุงููุชูุฌุฉ**: โฌ Pass / โฌ Fail

---

## ๐ ููุฎุต ุงููุชุงุฆุฌ

### ุงูุทุจูุฉ ุงููุญุงุณุจูุฉ
- **Draft Invoices**: โฌ Pass / โฌ Fail
- **Sent Invoices**: โฌ Pass / โฌ Fail
- **Paid Invoices**: โฌ Pass / โฌ Fail
- **Returns**: โฌ Pass / โฌ Fail

### ุทุจูุฉ ุงููุฎุฒูู
- **Inventory Transactions**: โฌ Pass / โฌ Fail
- **No Duplication**: โฌ Pass / โฌ Fail

### ุทุจูุฉ ุงูุฑุจุท
- **Governance Context**: โฌ Pass / โฌ Fail
- **Sales Order Link**: โฌ Pass / โฌ Fail

### ุทุจูุฉ ุงูุญูููุฉ
- **Role-Based Access**: โฌ Pass / โฌ Fail
- **No Bypass**: โฌ Pass / โฌ Fail

### ุทุจูุฉ ุงูุญูุงูุฉ
- **Protected Invoices**: โฌ Pass / โฌ Fail
- **Return Only**: โฌ Pass / โฌ Fail

### ุงูุงุฎุชุจุงุฑ ุงูุดุงูู
- **Scenario 1-6**: โฌ Pass / โฌ Fail

---

## โ ูุนุงููุฑ ุงููุฌุงุญ

ุงููุธุงู ูุนุชุจุฑ **ููุชุฒู ุจุงููุงูู** ุฅุฐุง:

- [x] ุฌููุน SQL Audit Queries ุชุนูุฏ 0 rows ููุงุณุชุนูุงูุงุช ุงูุญุฑุฌุฉ
- [x] ุฌููุน Code Reviews ุชูุช ุจูุฌุงุญ
- [x] ุฌููุน API Tests ุชูุช ุจูุฌุงุญ
- [x] ุฌููุน UI Tests ุชูุช ุจูุฌุงุญ
- [x] ุฌููุน End-to-End Scenarios ุชูุช ุจูุฌุงุญ
- [x] ูุง ุชูุฌุฏ ุงูุชูุงูุงุช ุญุฑุฌุฉ (P0)
- [x] ูุง ุชูุฌุฏ ุงูุชูุงูุงุช ุนุงููุฉ ุงูุฃููููุฉ (P1)

---

## ๐จ ุงูุงูุชูุงูุงุช ุงูููุชุดูุฉ

### ุงูุชูุงูุงุช ุญุฑุฌุฉ (P0)
1. _________________________________
2. _________________________________
3. _________________________________

### ุงูุชูุงูุงุช ุนุงููุฉ ุงูุฃููููุฉ (P1)
1. _________________________________
2. _________________________________
3. _________________________________

### ุงูุชูุงูุงุช ูุชูุณุทุฉ ุงูุฃููููุฉ (P2)
1. _________________________________
2. _________________________________
3. _________________________________

---

## ๐ ุงูุชูููุน

**ุงููุฑุงุฌุน**: ___________  
**ุงูุชุงุฑูุฎ**: ___________  
**ุงูุชูููุน**: ___________

**ุงูุญุงูุฉ ุงูููุงุฆูุฉ**: โฌ ููุชุฒู ุจุงููุงูู / โฌ ูุญุชุงุฌ ุฅุตูุงุญุงุช / โฌ ุงูุชูุงูุงุช ุญุฑุฌุฉ

---

**ููุงุญุธุฉ**: ูุฐู ุงููุงุฆูุฉ ูุฌุจ ุฃู ุชูููุฃ ุจุงููุงูู ูุจู ูุดุฑ ุงููุธุงู ูู ุงูุฅูุชุงุฌ.
