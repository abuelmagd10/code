# ๐ง ุชูุฑูุฑ ุฅุตูุงุญ ุงููุงุชูุฑุฉ INV-0001

**ุงูุชุงุฑูุฎ**: 21 ุฏูุณูุจุฑ 2025  
**ุงูููุช**: ุงูุขู  
**ุงูุญุงูุฉ**: โ **ุชู ุงูุฅุตูุงุญ ุจูุฌุงุญ**

---

## ๐ด ุงููุดุงูู ุงูููุชุดูุฉ:

### 1๏ธโฃ **ุชูุฑุงุฑ ุฑูู ุงููุงุชูุฑุฉ**
- ููุฌุฏ **ูุงุชูุฑุชุงู** ุจููุณ ุงูุฑูู `INV-0001`
- **ุงููุงุชูุฑุฉ ุงูุฃููู**: ุชุงุฑูุฎ 15/10/2025 (ุงูุฃูุฏู)
- **ุงููุงุชูุฑุฉ ุงูุซุงููุฉ**: ุชุงุฑูุฎ 20/12/2025 (ุงูุฃุญุฏุซ)

### 2๏ธโฃ **ุจูุงูุงุช ุฎุงุทุฆุฉ ูู ุงููุงุชูุฑุฉ ุงูุซุงููุฉ**
```
โ total_amount: 0.00 (ูุฌุจ ุฃู ูููู 20,000)
โ subtotal: 0.00 (ูุฌุจ ุฃู ูููู 20,000)
โ returned_amount: 20,000.00 (ุตุญูุญ)
โ return_status: partial (ูุฌุจ ุฃู ูููู full)
```

### 3๏ธโฃ **ุงูุจููุฏ ูุงูุช ุตุญูุญุฉ**
```
โ quantity: 10,000
โ returned_quantity: 10,000
โ unit_price: 2.00
โ line_total: 20,000.00
```

---

## โ ุงูุฅุตูุงุญุงุช ุงููููุฐุฉ:

### **ุงูุฅุตูุงุญ 1: ุชุญุฏูุซ ุจูุงูุงุช ุงููุงุชูุฑุฉ**
```sql
UPDATE invoices 
SET 
  total_amount = 20000.00,
  subtotal = 20000.00,
  return_status = 'full'
WHERE id = '0b44ac5b-1239-48eb-a812-5f4825c8bfff'
```

### **ุงูุฅุตูุงุญ 2: ุชุบููุฑ ุฑูู ุงููุงุชูุฑุฉ ุงูููุฑุฑุฉ**
```sql
UPDATE invoices 
SET invoice_number = 'INV-0062'
WHERE id = '0b44ac5b-1239-48eb-a812-5f4825c8bfff'
```

---

## ๐ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:

### **ุงููุงุชูุฑุฉ INV-0001** (ุงูุฃุตููุฉ - ุจุฏูู ุชุบููุฑ)
```
๐ ุงูุชุงุฑูุฎ: 15/10/2025
๐ฐ ุงูุฅุฌูุงูู: 8,100.00 ยฃ
๐ฆ ุงูุญุงูุฉ: paid (ูุฏููุนุฉ)
๐ ุงููุฑุชุฌุนุงุช: 0.00 ยฃ
โ ุงูุญุงูุฉ: ุณูููุฉ
```

### **ุงููุงุชูุฑุฉ INV-0062** (ุงูููุตูุญุฉ - ูุงูุช INV-0001)
```
๐ ุงูุชุงุฑูุฎ: 20/12/2025
๐ฐ ุงูุฅุฌูุงูู ุงูุฃุตูู: 20,000.00 ยฃ
๐ ุฅุฌูุงูู ุงููุฑุชุฌุนุงุช: 20,000.00 ยฃ
๐ ุตุงูู ุงููุงุชูุฑุฉ: 0.00 ยฃ
๐ฆ ุงูุญุงูุฉ: sent (ูุฑุณูุฉ)
๐ ุญุงูุฉ ุงููุฑุชุฌุน: full (ูุฑุชุฌุน ูุงูู)
โ ุงูุญุงูุฉ: ุชู ุงูุฅุตูุงุญ
```

---

## ๐ฏ ูุง ูุฌุจ ุฃู ุชุฑุงู ุงูุขู:

ุนูุฏ ูุชุญ ุงููุงุชูุฑุฉ `INV-0062`:

### **ูู ุงูุฌุฏูู:**
```
ุงูููุชุฌ: Cla (SKU: Inv-1001)
ุงููููุฉ: 10,000
ุงููุฑุชุฌุน: -10,000
ุงูุตุงูู: 0
ุณุนุฑ ุงููุญุฏุฉ: 2.00
ุงูุฅุฌูุงูู ุงูุฃุตูู: 20,000.00 (ูุดุทูุจ)
ุงูุฅุฌูุงูู ุงูุตุงูู: 0.00
```

### **ูู ุงูููุฎุต:**
```
ุฅุฌูุงูู ุงููุงุชูุฑุฉ ุงูุฃุตูู: 20,000.00 ยฃ (ูุดุทูุจ)
ุฅุฌูุงูู ุงููุฑุชุฌุนุงุช: -20,000.00 ยฃ
ุตุงูู ุงููุงุชูุฑุฉ ุจุนุฏ ุงููุฑุชุฌุนุงุช: 0.00 ยฃ
ุงููุฏููุน: 0.00 ยฃ
ุงููุชุจูู: 0.00 ยฃ
```

---

## ๐ ุงูุชุญูู:

### **ุงูุงุณุชุนูุงูุงุช ููุชุญูู:**
```sql
-- ุงูุชุญูู ูู ุงููุงุชูุฑุฉ ุงูููุตูุญุฉ
SELECT 
  invoice_number,
  total_amount,
  subtotal,
  returned_amount,
  return_status,
  status
FROM invoices 
WHERE invoice_number = 'INV-0062';

-- ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ุชูุฑุงุฑ
SELECT 
  invoice_number, 
  COUNT(*) as count 
FROM invoices 
GROUP BY invoice_number 
HAVING COUNT(*) > 1;
```

---

## ๐ ููุงุญุธุงุช:

1. โ **ุชู ุฅุตูุงุญ ุฌููุน ุงููุดุงูู**
2. โ **ูุง ููุฌุฏ ุชูุฑุงุฑ ูู ุฃุฑูุงู ุงูููุงุชูุฑ**
3. โ **ุงูุจูุงูุงุช ุงููุญุงุณุจูุฉ ุตุญูุญุฉ**
4. โ **ุชู ุฅุถุงูุฉ ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ ูุฌููุน ุงูุฌุฏุงูู**

---

## ๐ **ุฅุฌุฑุงุกุงุช ุงูุญูุงูุฉ ุงูููููุฐุฉ:**

### โ **ุชู ุฅุถุงูุฉ Unique Constraints:**

#### 1. **ุงูููุงุชูุฑ (Invoices)**:
```sql
ALTER TABLE invoices
ADD CONSTRAINT unique_invoice_number_per_company
UNIQUE (invoice_number, company_id);
```
โ **ุชู ุงูุชูููุฐ ุจูุฌุงุญ**

#### 2. **ุงูููุงุชูุฑ ุงูุดุฑุงุฆูุฉ (Bills)**:
```sql
ALTER TABLE bills
ADD CONSTRAINT unique_bill_number_per_company
UNIQUE (bill_number, company_id);
```
โ **ุชู ุงูุชูููุฐ ุจูุฌุงุญ**

#### 3. **ุฃูุงูุฑ ุงูุจูุน (Sales Orders)**:
```sql
ALTER TABLE sales_orders
ADD CONSTRAINT unique_so_number_per_company
UNIQUE (so_number, company_id);
```
โ **ุชู ุงูุชูููุฐ ุจูุฌุงุญ**

#### 4. **ุฃูุงูุฑ ุงูุดุฑุงุก (Purchase Orders)**:
```sql
ALTER TABLE purchase_orders
ADD CONSTRAINT unique_po_number_per_company
UNIQUE (po_number, company_id);
```
โ **ุชู ุงูุชูููุฐ ุจูุฌุงุญ**

---

## ๐ **ูุชุงุฆุฌ ุงููุญุต ุงูุดุงูู:**

| ุงูุฌุฏูู | ุชูุฑุงุฑุงุช ูุจู | ุชูุฑุงุฑุงุช ุจุนุฏ | ุงูุญูุงูุฉ |
|--------|-------------|-------------|---------|
| **Invoices** | 1 (INV-0001) | 0 | โ ููุนููุฉ |
| **Bills** | 0 | 0 | โ ููุนููุฉ |
| **Sales Orders** | 0 | 0 | โ ููุนููุฉ |
| **Purchase Orders** | 0 | 0 | โ ููุนููุฉ |

---

## ๐ ุงูุฑูุงุจุท:

- **ุงููุงุชูุฑุฉ ุงูุฃุตููุฉ**: `/invoices/60911f14-39f7-477d-b5c2-8022bba9f774` (INV-0001)
- **ุงููุงุชูุฑุฉ ุงูููุตูุญุฉ**: `/invoices/0b44ac5b-1239-48eb-a812-5f4825c8bfff` (INV-0062)

---

**โ ุงูุฅุตูุงุญ ููุชูู! ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ ูู ุงูุชูุฑุงุฑ!**

