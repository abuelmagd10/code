# ุชูุฑูุฑ ุงููุฑุงุฌุนุฉ ุงูุดุงููุฉ ุงูุนูููุฉ ููุธุงู ERP
# Deep System Audit Report - ERB VitaSlims ERP

**ุชุงุฑูุฎ ุงูุชูุฑูุฑ:** 2025-01-27  
**ููุน ุงููุฑุงุฌุนุฉ:** ูุฑุงุฌุนุฉ ุดุงููุฉ ุนูููุฉ (Deep System Audit)  
**ุงููุฏู:** ุงูุชุญูู ูู ูุทุงุจูุฉ ุงููุธุงู ููุนุงููุฑ ERP ุงุญุชุฑุงูู ููุชูุงูู  
**ุงููููุฌูุฉ:** ูุฑุงุฌุนุฉ ุจุฏูู ุชุนุฏููุงุช - ุชูุซูู ุงูุญุงูุฉ ุงููุนููุฉ (As-Is)

---

## ๐ ุงูููุฎุต ุงูุชูููุฐู | Executive Summary

ุชู ุฅุฌุฑุงุก ูุฑุงุฌุนุฉ ุดุงููุฉ ูุนูููุฉ ูุฌููุน ุฃุฌุฒุงุก ูุธุงู ERP VitaSlimsุ ุดููุช:
- **ุงููุนูุงุฑูุฉ ุงูุนุงูุฉ** ูุงููููู ุงูุชูุธููู
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช** (ุงูุฌุฏุงููุ ุงูุนูุงูุงุชุ ุงููููุฏุ ุงูููุงุฑุณุ Triggers)
- **ูุญุฑู ุงููุฎุฒูู** (ูุณุงุฑ ุงูููุชุฌ ุงููุงููุ FIFOุ ุงูุญุฑูุงุช)
- **ุงููุญุงุณุจุฉ ูุงููููุฏ ุงูููููุฉ** (General Ledgerุ Trial Balance)
- **ุงูููุงุชูุฑ ูุฃูุงูุฑ ุงูุจูุน** (ุชุฏูู ุงูุญุงูุงุชุ ุงูุงุฑุชุจุงุทุงุช)
- **ูุธุงู ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ (RBAC)** (RLSุ Permissions)
- **ุงููุณุชุฎุฏููู ูุงูุนููุงุก** (ููุน ุงูุชูุฑุงุฑุ Audit Log)
- **APIs & Backend Logic** (Endpointsุ Validationุ Authorization)
- **ุงููุงุฌูุฉ (UI/UX)** (ุงูุชูุญูุฏุ ุงูุฑุณุงุฆูุ ุฏุนู ุงูููุจุงูู)
- **ุงูุฃุฏุงุก ูุงูุฃูุงู** (ุงูุงุณุชุนูุงูุงุชุ SQL Injectionุ Unauthorized Access)

### ุงูุชูููู ุงูุนุงู: โ๏ธ **ุฌูุฏ ูุน ุซุบุฑุงุช ุญุฑุฌุฉ ุชุญุชุงุฌ ูุนุงูุฌุฉ ููุฑูุฉ**

**ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:** ุงููุธุงู **ูุง ูุทุงุจู ุญุงููุงู** ูุนุงููุฑ ERP ุงุญุชุฑุงูู ุจุงููุงูู ุจุณุจุจ:
1. ุซุบุฑุงุช ุฃูููุฉ ุญุฑุฌุฉ ูู ุจุนุถ API endpoints
2. ุนุฏู ุงูุชูุงู ุจุนุถ ุงููููุฏ ุงููุญุงุณุจูุฉ ูู ุญุงูุงุช ูุนููุฉ
3. ุจุนุถ ุงูุชูุงูุถุงุช ูู ููุทู ุงููุฎุฒูู
4. ููุต ูู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ูู ุจุนุถ ุงูููุงุท

---

## 1๏ธโฃ ุงููุนูุงุฑูุฉ ุงูุนุงูุฉ (Architecture)

### โ ููุงุท ุงูููุฉ

#### 1.1 ูููู ุงููุดุฑูุน
- **โ ูุตู ูุงุถุญ:** Frontend (Next.js App Router) / Backend (API Routes) / Database (Supabase)
- **โ Feature-based structure:** ูู ููุฏููู ูู ูุฌูุฏ ูููุตู (`app/invoices/`, `app/bills/`, `app/inventory/`)
- **โ ููุชุจุงุช ูุดุชุฑูุฉ:** `lib/` ูุญุชูู ุนูู ุฏูุงู ูุดุชุฑูุฉ (authz, ledger, inventory-check, etc.)
- **โ TypeScript:** ุงุณุชุฎุฏุงู TypeScript ูู ุฌููุน ุงููููุงุช

#### 1.2 ุงููุตู ุจูู ุงูุทุจูุงุช
- **โ UI Layer:** ุตูุญุงุช React ูู `app/` ูุน ููููุงุช ูู `components/`
- **โ Business Logic:** ูู `lib/` (ledger.ts, accounts.ts, inventory-check.ts)
- **โ Data Layer:** Supabase client abstraction ูู `lib/supabase/`
- **โ API Layer:** Routes ูู `app/api/` ุชูุตู ุจูู UI ูุงูููุทู

#### 1.3 ุงูุฃููุงุท ุงููุนูุงุฑูุฉ
- **โ Modular Architecture:** ูู ููุฏููู ูุณุชูู
- **โ Service Pattern:** ุงุณุชุฎุฏุงู services ูู `lib/` (currency-service, shipping adapters)
- **โ Repository Pattern:** Supabase client abstraction

### โ๏ธ ููุงุท ุงูุถุนู

#### 1.1 Business Logic ูู UI
**ุงููุดููุฉ:** ุจุนุถ ุงูููุทู ุงููุญุงุณุจู ููุฌูุฏ ูุจุงุดุฑุฉ ูู ุตูุญุงุช React
- **ุงููููุน:** `app/invoices/[id]/page.tsx` (ุณุทูุฑ 1888-1979)
- **ุงููุตู:** ููุทู ุฅูุดุงุก ูููุฏ COGS ููุฌูุฏ ูู ุตูุญุฉ ุงููุงุฌูุฉ
- **ุงูุชุฃุซูุฑ:** ุตุนูุจุฉ ุงูุงุฎุชุจุงุฑุ ุตุนูุจุฉ ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 1.2 ุนุฏู ูุฌูุฏ ุทุจูุฉ Service ููุญุฏุฉ
**ุงููุดููุฉ:** ูุง ุชูุฌุฏ ุทุจูุฉ service ููุญุฏุฉ ููุนุงูุฌุฉ ุงูุนูููุงุช ุงููุญุงุณุจูุฉ
- **ุงููุตู:** ูู ุตูุญุฉ ุชููุฐ ููุทููุง ุงูุฎุงุต
- **ุงูุชุฃุซูุฑ:** ุชูุฑุงุฑ ุงูููุฏุ ุตุนูุจุฉ ุงูุตูุงูุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 1.3 ุนุฏู ูุฌูุฏ Error Handling ููุญุฏ
**ุงููุดููุฉ:** ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุบูุฑ ููุญุฏุฉ ุนุจุฑ ุงูุชุทุจูู
- **ุงููุตู:** ุจุนุถ ุงููููุงุช ุชุณุชุฎุฏู try/catchุ ุฃุฎุฑู ูุง
- **ุงูุชุฃุซูุฑ:** ุตุนูุจุฉ ุชุชุจุน ุงูุฃุฎุทุงุก
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 2๏ธโฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Database Deep Audit)

### โ ููุงุท ุงูููุฉ

#### 2.1 ุงูุฌุฏุงูู ูุงูุนูุงูุงุช
- **โ ุฌููุน ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ููุฌูุฏุฉ:** companies, customers, suppliers, products, invoices, bills, journal_entries
- **โ Foreign Keys ูุญุฏุฏุฉ ุจุดูู ุตุญูุญ:** ุฌููุน ุงูุนูุงูุงุช ุชุณุชุฎุฏู `REFERENCES` ูุน `ON DELETE CASCADE` ุฃู `ON DELETE SET NULL`
- **โ UNIQUE Constraints:** ุนูู ุงูุญููู ุงููููุฉ (invoice_number, bill_number, sku)
- **โ CHECK Constraints:** ุนูู ุงูุญููู ุงููููุฉ (status, discount_type, role)

**ูุซุงู:**
```sql
-- scripts/001_create_tables.sql
UNIQUE(company_id, invoice_number)
CHECK (role IN ('owner','admin','accountant','viewer'))
REFERENCES invoices(id) ON DELETE CASCADE
```

#### 2.2 ุงูููุงุฑุณ (Indexes)
- **โ ููุงุฑุณ ุนูู ุงูุญููู ุงููููุฉ:** company_id, customer_id, status, entry_date
- **โ ููุงุฑุณ ูุฑูุจุฉ:** ุนูู (company_id, account_id, balance_date) ูู account_balances

**ูุซุงู:**
```sql
CREATE INDEX idx_invoices_company ON invoices(company_id);
CREATE INDEX idx_invoices_customer ON invoices(customer_id);
CREATE INDEX idx_invoices_status ON invoices(status);
```

#### 2.3 Row Level Security (RLS)
- **โ RLS ููุนู ุนูู ุฌููุน ุงูุฌุฏุงูู:** ุฌููุน ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ูุญููุฉ ุจู RLS
- **โ ุณูุงุณุงุช ูุชุนุฏุฏุฉ:** SELECT, INSERT, UPDATE, DELETE ููู ุฌุฏูู
- **โ ุฏูุงู ูุณุงุนุฏุฉ:** `is_company_member()`, `is_owner_or_admin()`, `can_modify_data()`, `can_delete_data()`

**ุงููููุน:** `scripts/002_create_rls_policies.sql`, `scripts/030_comprehensive_rls_fix.sql`

#### 2.4 Triggers
- **โ Triggers ูููุฎุฒูู:** ุชุญุฏูุซ `quantity_on_hand` ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู `inventory_transactions`
- **โ Triggers ูููุญุงุณุจุฉ:** ุฅุนุงุฏุฉ ุญุณุงุจ `account_balances` ุนูุฏ ุชุบููุฑ `journal_entry_lines`
- **โ Triggers ููุฑุจุท:** ุฑุจุท `inventory_transactions` ุจู `journal_entries` ุชููุงุฆูุงู

**ุงููููุน:** `scripts/010_inventory_triggers.sql`

#### 2.5 Stored Functions
- **โ ุฏูุงู ูุญุต ุตุญุฉ ุงูุจูุงูุงุช:** `check_paid_invoices_without_entries()`, `check_stock_mismatch()`
- **โ ุฏูุงู ุงูุตูุงูุฉ:** `sync_all_stock_quantities()`, `fix_wrong_return_account_entries()`
- **โ ุฏูุงู ุงูุตูุงุญูุงุช:** `check_permission()`, `check_page_access()`

**ุงููููุน:** `scripts/050_data_health_check_functions.sql`, `scripts/040_enhanced_rbac_system.sql`

### โ๏ธ ููุงุท ุงูุถุนู

#### 2.1 ุนุฏู ูุฌูุฏ ูููุฏ ุนูู ุงูุจูุงูุงุช ุงููุชุนููุฉ
**ุงููุดููุฉ:** ุจุนุถ ุงูุฌุฏุงูู ูุง ุชุญุชูู ุนูู ูููุฏ ููุชุญูู ูู ุณูุงูุฉ ุงูุจูุงูุงุช
- **ูุซุงู:** `inventory_transactions.quantity_change` ูููู ุฃู ูููู ููุฌุจ ุฃู ุณุงูุจ ุจุฏูู ููุฏ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 2.2 ุนุฏู ูุฌูุฏ ูููุฏ ุนูู ุงูุญุงูุงุช
**ุงููุดููุฉ:** ูุง ุชูุฌุฏ ูููุฏ ููุชุญูู ูู ุชุฏูู ุงูุญุงูุงุช ุจุดูู ููุทูู
- **ูุซุงู:** ูููู ุชุบููุฑ ุญุงูุฉ ุงููุงุชูุฑุฉ ูู `draft` ุฅูู `paid` ูุจุงุดุฑุฉ ุจุฏูู `sent`
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 2.3 ุนุฏู ูุฌูุฏ ููุงุฑุณ ุนูู ุจุนุถ ุงูุญููู ุงููููุฉ
**ุงููุดููุฉ:** ุจุนุถ ุงูุญููู ุงููุณุชุฎุฏูุฉ ูู ุงูุงุณุชุนูุงูุงุช ูุง ุชุญุชูู ุนูู ููุงุฑุณ
- **ูุซุงู:** `inventory_transactions.reference_id` ูุง ูุญุชูู ุนูู ููุฑุณ
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ (ูููู ุชุญุณูู ุงูุฃุฏุงุก)

#### 2.4 ุนุฏู ูุฌูุฏ ูููุฏ ุนูู ุงูุชูุงุฑูุฎ
**ุงููุดููุฉ:** ูุง ุชูุฌุฏ ูููุฏ ููุชุญูู ูู ููุทููุฉ ุงูุชูุงุฑูุฎ
- **ูุซุงู:** `invoice_date` ูููู ุฃู ูููู ุจุนุฏ `due_date`
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 3๏ธโฃ ุงููุฎุฒูู (Inventory Engine)

### โ ููุงุท ุงูููุฉ

#### 3.1 ูุณุงุฑ ุงูููุชุฌ ุงููุงูู
- **โ ุดุฑุงุก โ ุชุฎุฒูู:** ุนูุฏ ุฅูุดุงุก `bill` ุจุญุงูุฉ `sent`ุ ูุชู ุฅูุดุงุก `inventory_transactions` ูู ููุน `purchase`
- **โ ุจูุน โ ุฎุฑูุฌ:** ุนูุฏ ุฅุฑุณุงู `invoice`ุ ูุชู ุฅูุดุงุก `inventory_transactions` ูู ููุน `sale`
- **โ ูุฑุชุฌุน โ ุฅุฑุฌุงุน:** ุนูุฏ ุฅูุดุงุก `sales_return`ุ ูุชู ุฅุฑุฌุงุน ุงูููุชุฌุงุช ูููุฎุฒูู

**ุงููููุน:** `app/bills/new/page.tsx` (ุณุทูุฑ 531-551), `app/invoices/[id]/page.tsx` (ุณุทูุฑ 1954-1973)

#### 3.2 ุงุณุชุซูุงุก ุงูุฎุฏูุงุช
- **โ ุงูุฎุฏูุงุช ูุณุชุจุนุฏุฉ:** ุงูููุชุฌุงุช ูู ููุน `service` ูุง ูุชู ุชุชุจุนูุง ูู ุงููุฎุฒูู
- **โ ุงูุชุญูู ูู Triggers:** Trigger `apply_inventory_to_product_qty()` ูุชุญูู ูู `item_type` ูุจู ุงูุชุญุฏูุซ

**ุงููููุน:** `scripts/010_inventory_triggers.sql` (ุณุทูุฑ 78-81)

#### 3.3 ุชุญุฏูุซ ุชููุงุฆู ูููููุงุช
- **โ Trigger ุชููุงุฆู:** `apply_inventory_to_product_qty()` ูุญุฏุซ `quantity_on_hand` ุชููุงุฆูุงู
- **โ ูุนุงูุฌุฉ INSERT/UPDATE/DELETE:** Trigger ูุนูู ุนูู ุฌููุน ุงูุนูููุงุช

**ุงููููุน:** `scripts/010_inventory_triggers.sql` (ุณุทูุฑ 68-144)

#### 3.4 ุฑุจุท ูุน ุงููููุฏ ุงููุญุงุณุจูุฉ
- **โ ุฑุจุท ุชููุงุฆู:** `auto_link_inventory_to_journal()` ูุฑุจุท `inventory_transactions` ุจู `journal_entries`
- **โ ุชูุธูู ุชููุงุฆู:** `cleanup_inventory_on_journal_delete()` ูุญุฐู ุญุฑูุงุช ุงููุฎุฒูู ุนูุฏ ุญุฐู ุงูููุฏ

**ุงููููุน:** `scripts/010_inventory_triggers.sql` (ุณุทูุฑ 4-64)

### โ๏ธ ููุงุท ุงูุถุนู

#### 3.1 ุนุฏู ูุฌูุฏ ููุทู FIFO ุตุฑูุญ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ุชุทุจูู ุตุฑูุญ ูููุทู FIFO (First In First Out)
- **ุงููุตู:** ุงููุธุงู ูุง ูุชุชุจุน ุชูููุฉ ูู ุฏูุนุฉ ูููุตูุฉ
- **ุงูุชุฃุซูุฑ:** ุญุณุงุจ COGS ูุฏ ูุง ูููู ุฏูููุงู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 3.2 ุนุฏู ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉ
**ุงููุดููุฉ:** ูููู ุฅูุดุงุก `inventory_transactions` ูู ููุน `sale` ุจุฏูู `reference_id`
- **ุงููุตู:** ูุง ููุฌุฏ ููุฏ ูููุน ุฅูุดุงุก ุญุฑูุฉ ุจูุน ุจุฏูู ูุงุชูุฑุฉ
- **ุงูุชุฃุซูุฑ:** ูุฎุฒูู ูููู ุฃู ูุฎุฑุฌ ุจุฏูู ุชูุซูู
- **ุงูุฎุทูุฑุฉ:** ๐ด ุญุฑุฌุฉ

**ุงููููุน:** `scripts/001_create_tables.sql` (ุณุทุฑ 103: `reference_id UUID` ุจุฏูู NOT NULL)

#### 3.3 ุนุฏู ููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ุชุญูู ูููุน ุฅูุดุงุก ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุจุญุงูุฉ `cancelled`
- **ุงููุตู:** ูููู ุฅูุดุงุก ุญุฑูุฉ ูุฎุฒูู ููุงุชูุฑุฉ ููุบุงุฉ
- **ุงูุชุฃุซูุฑ:** ูุฎุฒูู ุบูุฑ ุฏููู
- **ุงูุฎุทูุฑุฉ:** ๐ด ุญุฑุฌุฉ

#### 3.4 ุนุฏู ูุฌูุฏ ุชุญูู ูู ุงููููุฉ ุงููุชุงุญุฉ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ุชุญูู ูููุน ุจูุน ูููุฉ ุฃูุจุฑ ูู ุงููุชุงุญ
- **ุงููุตู:** ูููู ุฅูุดุงุก ูุงุชูุฑุฉ ุจูุน ุจูููุฉ ุฃูุจุฑ ูู `quantity_on_hand`
- **ุงูุชุฃุซูุฑ:** ูุฎุฒูู ุณุงูุจ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 4๏ธโฃ ุงููุญุงุณุจุฉ (Accounting & Journals)

### โ ููุงุท ุงูููุฉ

#### 4.1 ุฅูุดุงุก ุงููููุฏ ููุญุงูุงุช ุงูุตุญูุญุฉ
- **โ ููุงุชูุฑ ูุฑุณูุฉ:** ูุง ูุชู ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ (ููุท ุญุฑูุงุช ูุฎุฒูู)
- **โ ููุงุชูุฑ ูุฏููุนุฉ/ุฌุฒุฆูุงู:** ูุชู ุฅูุดุงุก ูููุฏ ุงููุจูุนุงุช ูุงูุฐูู ุนูุฏ ุฃูู ุฏูุนุฉ
- **โ ููุฏ COGS:** ูุชู ุฅูุดุงุกู ููุท ููููุงุชูุฑ ุงููุฏููุนุฉ/ุฌุฒุฆูุงู

**ุงููููุน:** `app/invoices/[id]/page.tsx` (ุณุทูุฑ 628-704), `app/payments/page.tsx` (ุณุทูุฑ 743-795)

#### 4.2 ููุน ุงููููุฏ ุงููุฒุฏูุฌุฉ
- **โ ุงูุชุญูู ูุจู ุงูุฅูุดุงุก:** ูุชู ุงูุชุญูู ูู ูุฌูุฏ ููุฏ ุณุงุจู ูุจู ุฅูุดุงุก ููุฏ ุฌุฏูุฏ

**ูุซุงู:**
```typescript
// app/invoices/[id]/page.tsx - ุณุทุฑ 639
const { data: existing } = await supabase
  .from("journal_entries")
  .select("id")
  .eq("company_id", mapping.companyId)
  .eq("reference_type", "invoice")
  .eq("reference_id", invoiceId)
  .limit(1)
if (existing && existing.length > 0) return
```

#### 4.3 ุฑุจุท ุงููููุฏ ุจุงููุฑุงุฌุน
- **โ reference_type ู reference_id:** ูู ููุฏ ูุฑุชุจุท ุจูุณุชูุฏ (invoice, bill, payment)
- **โ ุฃููุงุน ุงููุฑุงุฌุน:** invoice, invoice_payment, invoice_cogs, bill, sales_return, etc.

#### 4.4 ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุฃุฑุตุฏุฉ
- **โ Trigger ุชููุงุฆู:** `recompute_account_balances_for_date()` ูุนูุฏ ุญุณุงุจ ุงูุฃุฑุตุฏุฉ ุนูุฏ ุชุบููุฑ ุงููููุฏ
- **โ ุชุญุฏูุซ account_balances:** ุฌุฏูู `account_balances` ูุชู ุชุญุฏูุซู ุชููุงุฆูุงู

**ุงููููุน:** `scripts/010_inventory_triggers.sql` (ุณุทูุฑ 150-225)

### โ๏ธ ููุงุท ุงูุถุนู

#### 4.1 ุนุฏู ูุฌูุฏ ููุฏ ููููุงุชูุฑ ุงููุฑุณูุฉ
**ุงููุดููุฉ:** ุงูููุงุชูุฑ ุงููุฑุณูุฉ (sent) ูุง ุชุญุชูู ุนูู ูููุฏ ูุญุงุณุจูุฉ
- **ุงููุตู:** ุนูุฏ ุฅุฑุณุงู ูุงุชูุฑุฉุ ูุง ูุชู ุฅูุดุงุก ููุฏ ุงููุจูุนุงุช ูุงูุฐูู
- **ุงูุชุฃุซูุฑ:** ุงูุฃุฑุตุฏุฉ ุบูุฑ ุฏูููุฉ ุญุชู ุงูุฏูุน
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ (ูุฐุง ุชุตููู ููุตูุฏุ ููู ูุฏ ูููู ุบูุฑ ููุงุณุจ ูุจุนุถ ุงูุดุฑูุงุช)

**ุงููููุน:** `app/bills/new/page.tsx` (ุณุทูุฑ 528-591) - ุงูุชุนููู: "ุนูุฏ ุงูุฅุฑุณุงู: ููุท ุฅุถุงูุฉ ุงููุฎุฒููุ ุจุฏูู ูููุฏ ูุญุงุณุจูุฉ"

#### 4.2 ุนุฏู ูุฌูุฏ ุชุญูู ูู ุชูุงุฒู ุงููููุฏ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ููุฏ ูุถูู ุฃู ูุฌููุน ุงููุฏูู = ูุฌููุน ุงูุฏุงุฆู ูู ูู ููุฏ
- **ุงููุตู:** ูููู ุฅูุดุงุก ููุฏ ุบูุฑ ูุชูุงุฒู
- **ุงูุชุฃุซูุฑ:** ุฃุฎุทุงุก ูุญุงุณุจูุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ด ุญุฑุฌุฉ

#### 4.3 ุนุฏู ูุฌูุฏ ุชุญูู ูู ุตุญุฉ ุงูุญุณุงุจุงุช
**ุงููุดููุฉ:** ูุง ููุฌุฏ ุชุญูู ูููุน ุงุณุชุฎุฏุงู ุญุณุงุจ ุฎุงุทุฆ ูู ุงูููุฏ
- **ูุซุงู:** ูููู ุงุณุชุฎุฏุงู ุญุณุงุจ ูุตุฑูู ูู ููุฏ ูุจูุนุงุช
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 4.4 ุนุฏู ูุฌูุฏ ูููุฏ ููููุงุชูุฑ ุงูููุบุงุฉ
**ุงููุดููุฉ:** ุนูุฏ ุฅูุบุงุก ูุงุชูุฑุฉุ ูุง ูุชู ุนูุณ ุงููููุฏ ุงููุญุงุณุจูุฉ ุชููุงุฆูุงู
- **ุงููุตู:** ูุฌุจ ุนูุณ ุงููููุฏ ูุฏููุงู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 5๏ธโฃ ุงูููุงุชูุฑ ูุฃูุงูุฑ ุงูุจูุน

### โ ููุงุท ุงูููุฉ

#### 5.1 ุชุฏูู ุงูุญุงูุงุช
- **โ ุญุงูุงุช ุงูููุงุชูุฑ:** draft โ sent โ partially_paid โ paid โ cancelled
- **โ ุญุงูุงุช ุฃูุงูุฑ ุงูุดุฑุงุก:** draft โ sent โ received_partial โ received โ cancelled
- **โ ุญุงูุงุช ุงููุฑุชุฌุนุงุช:** pending โ approved โ completed โ cancelled

#### 5.2 ููุน ุงูุชุนุฏูู ุจุนุฏ ุงูุญุงูุงุช ุงููุญุงุณุจูุฉ
- **โ ุงูุชุญูู ูู ุงููุงุฌูุฉ:** ุจุนุถ ุงูุตูุญุงุช ุชุชุญูู ูู ุงูุญุงูุฉ ูุจู ุงูุณูุงุญ ุจุงูุชุนุฏูู
- **โ๏ธ ููู:** ูุง ููุฌุฏ ููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุน ุงูุชุนุฏูู

#### 5.3 ุงูุงุฑุชุจุงุท ุจูู ุงููุณุชูุฏุงุช
- **โ Sales Orders โ Invoices:** `invoices.sales_order_id` ูุฑุจุท ุงููุงุชูุฑุฉ ุจุฃูุฑ ุงูุจูุน
- **โ Purchase Orders โ Bills:** `bills.purchase_order_id` ูุฑุจุท ุงููุงุชูุฑุฉ ุจุฃูุฑ ุงูุดุฑุงุก
- **โ Invoices โ Payments:** `payments.invoice_id` ูุฑุจุท ุงูุฏูุนุฉ ุจุงููุงุชูุฑุฉ

**ุงููููุน:** `scripts/033_sales_order_invoice_link.sql`, `scripts/034_purchase_orders.sql`

### โ๏ธ ููุงุท ุงูุถุนู

#### 5.1 ุนุฏู ููุน ุงูููุฒ ุบูุฑ ุงูููุทูู ุจูู ุงูุญุงูุงุช
**ุงููุดููุฉ:** ูุง ููุฌุฏ ููุฏ ูููุน ุงูููุฒ ูู `draft` ุฅูู `paid` ูุจุงุดุฑุฉ
- **ุงููุตู:** ูููู ุชุบููุฑ ุงูุญุงูุฉ ูุจุงุดุฑุฉ ุจุฏูู ุงููุฑูุฑ ุจู `sent`
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 5.2 ุนุฏู ููุน ุงูุชุนุฏูู ุจุนุฏ ุงูุญุงูุงุช ุงููุญุงุณุจูุฉ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ููุฏ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูููุน ุชุนุฏูู ูุงุชูุฑุฉ ุจุนุฏ ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ
- **ุงููุตู:** ูููู ุชุนุฏูู ูุงุชูุฑุฉ ูุฏููุนุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ด ุญุฑุฌุฉ

#### 5.3 ุนุฏู ูุฌูุฏ ุชุญูู ูู ุงูุฃุฑูุงู ุงููุชุณูุณูุฉ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ููุฏ ูุถูู ุฃู ุฃุฑูุงู ุงูููุงุชูุฑ ูุชุณูุณูุฉ
- **ุงููุตู:** ูููู ุฅูุดุงุก ูุงุชูุฑุฉ ุจุฑูู ููุฑุฑ ุฃู ุบูุฑ ูุชุณูุณู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 6๏ธโฃ ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ (RBAC)

### โ ููุงุท ุงูููุฉ

#### 6.1 ูุธุงู RLS ูุชูุงูู
- **โ ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ:** RLS ููุนู ุนูู ุฌููุน ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
- **โ ุณูุงุณุงุช ูุชุนุฏุฏุฉ:** SELECT, INSERT, UPDATE, DELETE ููู ุฌุฏูู
- **โ ุฏูุงู ูุณุงุนุฏุฉ:** `is_company_member()`, `is_owner_or_admin()`, `can_modify_data()`, `can_delete_data()`

**ุงููููุน:** `scripts/002_create_rls_policies.sql`, `scripts/030_comprehensive_rls_fix.sql`

#### 6.2 ูุธุงู ุงูุฃุฏูุงุฑ (RBAC)
- **โ 7 ุฃุฏูุงุฑ ูุญุฏุฏุฉ:** owner, admin, manager, accountant, store_manager, staff, viewer
- **โ ุฌุฏูู ุงูุตูุงุญูุงุช:** `company_role_permissions` ูุชุฎุตูุต ุงูุตูุงุญูุงุช ููู ุฏูุฑ
- **โ ุตูุงุญูุงุช ูุชูุฏูุฉ:** `allowed_actions` ููุนูููุงุช ุงูุฎุงุตุฉ

**ุงููููุน:** `scripts/040_enhanced_rbac_system.sql`

#### 6.3 ูุธุงู ุงูุตูุงุญูุงุช ูู ุงููุงุฌูุฉ
- **โ ููุชุจุฉ authz:** `lib/authz.ts` ุชุญุชูู ุนูู ุฏูุงู ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- **โ ุงูุชุญูู ูู ุงูุตูุญุงุช:** ุจุนุถ ุงูุตูุญุงุช ุชุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุนุฑุถ ุงููุญุชูู

#### 6.4 ุญูุงูุฉ ุงููููุฏ ุงูููููุฉ
- **โ ุงููุงูู ููุท:** ุตูุญุฉ `/journal-entries/[id]` ุชุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุงูู ูุจู ุงูุณูุงุญ ุจุงูุชุนุฏูู
- **โ ุทูุจ ุณุจุจ ุงูุชุนุฏูู:** ุฅูุฒุงูู ููุชุฏููู ุงููุญุงุณุจู

### โ๏ธ ููุงุท ุงูุถุนู

#### 6.1 ุซุบุฑุงุช ุญุฑุฌุฉ ูู API Endpoints
**ุงููุดููุฉ:** ุจุนุถ API endpoints ูุง ุชุชุญูู ูู ุงูุตูุงุญูุงุช ุจุดูู ุตุญูุญ

**ุฃูุซูุฉ:**
1. **`/api/member-role`:** ูุง ูุชุญูู ูู ุตูุงุญูุฉ ุงููุณุชุฎุฏู ุงูุทุงูุจ
2. **`/api/member-delete`:** ูุง ูุชุญูู ูู ุตูุงุญูุฉ ุงููุณุชุฎุฏู ุงูุทุงูุจ
3. **`/api/company-members`:** ูุง ูุชุญูู ูู ุนุถููุฉ ุงููุณุชุฎุฏู ูู ุงูุดุฑูุฉ
4. **`/api/income-statement`:** ููุจู `companyId` ูู ุงููุณุชุฎุฏู ุจุฏูู ุงูุชุญูู ูู ุนุถููุชู

**ุงูุฎุทูุฑุฉ:** ๐ด **ุญุฑุฌุฉ**

**ุงููููุน:** `docs/PERMISSIONS_AUDIT_REPORT.md` (ุณุทูุฑ 58-72)

#### 6.2 ุงูุชุฑุงุถ ุงููุตูู ุงููุณููุญ
**ุงููุดููุฉ:** `canAccessPage()` ุชุฑุฌุน `true` ุฅุฐุง ูู ููุฌุฏ ุณุฌู ุตูุงุญูุงุช
```typescript
// lib/authz.ts - ุณุทุฑ 126
if (!perm) return true // ุฅุฐุง ูู ููุฌุฏ ุณุฌูุ ููุชุฑุถ ุงููุตูู ูุณููุญ
```
**ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 6.3 ุนุฏู ุชุทุจูู ุงูุตูุงุญูุงุช ูู ุฌููุน API Endpoints
**ุงููุดููุฉ:** ุจุนุถ API endpoints ูุง ุชุณุชุฎุฏู `checkPermission()` ุฃู `canAction()`
- **ุงููุตู:** ุงูุงุนุชูุงุฏ ุนูู RLS ููุท ูุฏ ูุง ูููู ูุงููุงู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 7๏ธโฃ ุงููุณุชุฎุฏููู ูุงูุนููุงุก

### โ ููุงุท ุงูููุฉ

#### 7.1 ููุน ุงูุชูุฑุงุฑ
- **โ UNIQUE constraint:** ุนูู `(company_id, email)` ูู `customers` ู `suppliers`
- **โ UNIQUE constraint:** ุนูู `(company_id, sku)` ูู `products`
- **โ UNIQUE constraint:** ุนูู `(company_id, invoice_number)` ูู `invoices`

#### 7.2 ุฑุจุท ุงูุนููู ุจุงูููุธู
- **โ created_by_user_id:** `customers.created_by_user_id` ูุฑุจุท ุงูุนููู ุจุงูููุธู ุงูุฐู ุฃูุดุฃู
- **โ ููุฑุณ:** `idx_customers_created_by_user_id` ููุจุญุซ ุงูุณุฑูุน

**ุงููููุน:** `scripts/061_customer_created_by_user.sql`

#### 7.3 ููุน ุงูุญุฐู ูู ุงูุญุงูุงุช ุงููุดุทุฉ
- **โ Trigger:** `check_customer_delete()` ูููุน ุญุฐู ุนููู ูู ููุงุชูุฑ ูุดุทุฉ ุฃู ูุฏููุนุงุช
- **โ ุฑุณุงูุฉ ุฎุทุฃ ูุงุถุญุฉ:** ุนูุฏ ูุญุงููุฉ ุงูุญุฐู

**ุงููููุน:** `scripts/062_customer_delete_protection.sql`

#### 7.4 ุณุฌู ุงูุชุนุฏููุงุช (Audit Log)
- **โ Triggers ุนูู ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ:** invoices, bills, products, customers, suppliers, payments, journal_entries
- **โ ุชุณุฌูู ุงูุนูููุงุช:** INSERT, UPDATE, DELETE
- **โ ุญูุธ ุงูุจูุงูุงุช:** ุงูุจูุงูุงุช ุงููุฏููุฉ ูุงูุฌุฏูุฏุฉ ูุญููุธุฉ ูู JSONB
- **โ ูุนูููุงุช ุงููุณุชุฎุฏู:** user_id, user_email, user_name

**ุงููููุน:** `scripts/022_audit_log.sql`

### โ๏ธ ููุงุท ุงูุถุนู

#### 7.1 ุนุฏู ูุฌูุฏ ููุฏ ุนูู ุชูุฑุงุฑ ุงููุงุชู
**ุงููุดููุฉ:** ูุง ููุฌุฏ UNIQUE constraint ุนูู `phone` ูู `customers`
- **ุงููุตู:** ูููู ุฅูุดุงุก ุนููููู ุจููุณ ุฑูู ุงููุงุชู
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

#### 7.2 ุนุฏู ูุฌูุฏ ุชุญูู ูู ุตุญุฉ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
**ุงููุดููุฉ:** ูุง ููุฌุฏ CHECK constraint ููุชุญูู ูู ุตุญุฉ ุชูุณูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- **ุงููุตู:** ูููู ุฅุฏุฎุงู ุจุฑูุฏ ุฅููุชุฑููู ุบูุฑ ุตุญูุญ
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

#### 7.3 ุนุฏู ูุฌูุฏ ููุฏ ุนูู credit_limit
**ุงููุดููุฉ:** ูุง ููุฌุฏ ุชุญูู ูููุน ุชุฌุงูุฒ `credit_limit` ุนูุฏ ุฅูุดุงุก ูุงุชูุฑุฉ
- **ุงููุตู:** ูููู ุฅูุดุงุก ูุงุชูุฑุฉ ุชุชุฌุงูุฒ ุญุฏ ุงูุงุฆุชูุงู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 8๏ธโฃ APIs & Backend Logic

### โ ููุงุท ุงูููุฉ

#### 8.1 ุงุณุชุฎุฏุงู Supabase Client
- **โ Server-side client:** ุงุณุชุฎุฏุงู `createClient()` ูู `lib/supabase/server`
- **โ RLS enforcement:** RLS ููุนู ุชููุงุฆูุงู

#### 8.2 ุจุนุถ Endpoints ูุญููุฉ
- **โ `/api/audit-logs`:** ูุชุญูู ูู ุงูุฏูุฑ (owner/admin/manager ููุท)
- **โ `/api/customers/delete`:** ูุชุญูู ูู ุงูุตูุงุญูุงุช ูุจู ุงูุญุฐู

### โ๏ธ ููุงุท ุงูุถุนู

#### 8.1 ุซุบุฑุงุช ุญุฑุฌุฉ ูู Authorization
**ุงููุดููุฉ:** ุงูุนุฏูุฏ ูู API endpoints ูุง ุชุชุญูู ูู ุงูุตูุงุญูุงุช

**ุฃูุซูุฉ:**
1. **`/api/member-role`:** ูููู ูุฃู ูุณุชุฎุฏู ุชุบููุฑ ุฃุฏูุงุฑ ุงูุฃุนุถุงุก
2. **`/api/member-delete`:** ูููู ูุฃู ูุณุชุฎุฏู ุญุฐู ุฃุนุถุงุก
3. **`/api/income-statement`:** ููุจู `companyId` ุจุฏูู ุงูุชุญูู
4. **`/api/data-health-check`:** ูุง ูุชุญูู ูู ุงูุตูุงุญูุงุช

**ุงูุฎุทูุฑุฉ:** ๐ด **ุญุฑุฌุฉ**

#### 8.2 ุนุฏู ูุฌูุฏ Validation ููุญุฏ
**ุงููุดููุฉ:** ูุง ููุฌุฏ ูุธุงู validation ููุญุฏ ููู API requests
- **ุงููุตู:** ูู endpoint ูุชุญูู ูู ุงูุจูุงูุงุช ุจุดูู ูููุตู
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 8.3 ุนุฏู ูุฌูุฏ Error Handling ููุญุฏ
**ุงููุดููุฉ:** ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุบูุฑ ููุญุฏุฉ
- **ุงููุตู:** ุจุนุถ endpoints ุชุฑุฌุน `NextResponse.json({ error })`ุ ุฃุฎุฑู ุชุฑูู exceptions
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 8.4 Business Logic ูู API Routes
**ุงููุดููุฉ:** ุจุนุถ ุงูููุทู ุงููุญุงุณุจู ููุฌูุฏ ูุจุงุดุฑุฉ ูู API routes
- **ุงููุตู:** ูุฌุจ ูููู ุฅูู services
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## 9๏ธโฃ ุงููุงุฌูุฉ (UI/UX Consistency)

### โ ููุงุท ุงูููุฉ

#### 9.1 ุงุณุชุฎุฏุงู ููููุงุช ููุญุฏุฉ
- **โ shadcn/ui:** ุงุณุชุฎุฏุงู ููููุงุช ูู `components/ui/`
- **โ Tailwind CSS:** ุชุตููู ููุญุฏ

#### 9.2 ุจุนุถ ุงูุตูุญุงุช ูุชุฌุงูุจุฉ
- **โ ุงุณุชุฎุฏุงู hooks:** `use-mobile.ts` ููุชุญูู ูู ุงูููุจุงูู
- **โ๏ธ ููู:** ููุณ ุฌููุน ุงูุตูุญุงุช ูุชุฌุงูุจุฉ ุจุงููุงูู

### โ๏ธ ููุงุท ุงูุถุนู

#### 9.1 ุนุฏู ุชูุญูุฏ ุงูุฌุฏุงูู
**ุงููุดููุฉ:** ุงูุฌุฏุงูู ูู ุงูุตูุญุงุช ุงููุฎุชููุฉ ููุง ุชุตูููุงุช ูุฎุชููุฉ
- **ุงููุตู:** ุจุนุถ ุงูุตูุญุงุช ุชุณุชุฎุฏู `DataTable`ุ ุฃุฎุฑู ุชุณุชุฎุฏู ุฌุฏุงูู ูุฎุตุตุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

#### 9.2 ุนุฏู ุชูุญูุฏ ุงูููุงุชุฑ
**ุงููุดููุฉ:** ุงูููุงุชุฑ ูู ุงูุตูุญุงุช ุงููุฎุชููุฉ ููุง ุชุตูููุงุช ูุฎุชููุฉ
- **ุงููุตู:** ุจุนุถ ุงูุตูุญุงุช ุชุณุชุฎุฏู DateRangeFilterุ ุฃุฎุฑู ูุง
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

#### 9.3 ุนุฏู ุชูุญูุฏ ุงูุฑุณุงุฆู
**ุงููุดููุฉ:** ุฑุณุงุฆู ุงูุฎุทุฃ ูุงููุฌุงุญ ุบูุฑ ููุญุฏุฉ
- **ุงููุตู:** ุจุนุถ ุงูุตูุญุงุช ุชุณุชุฎุฏู `toast`ุ ุฃุฎุฑู ุชุณุชุฎุฏู `alert`
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

#### 9.4 ุนุฏู ุฏุนู ุงูููุจุงูู ุจุงููุงูู
**ุงููุดููุฉ:** ุจุนุถ ุงูุตูุญุงุช ูุง ุชุนูู ุจุดูู ุฌูุฏ ุนูู ุงูููุจุงูู
- **ุงููุตู:** ุงูุฌุฏุงูู ูุงูููorms ูุฏ ุชููู ุตุนุจุฉ ุงูุงุณุชุฎุฏุงู ุนูู ุงูุดุงุดุงุช ุงูุตุบูุฑุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

---

## ๐ ุงูุฃุฏุงุก ูุงูุฃูุงู

### โ ููุงุท ุงูููุฉ

#### 10.1 ุงุณุชุฎุฏุงู ุงูููุงุฑุณ
- **โ ููุงุฑุณ ุนูู ุงูุญููู ุงููููุฉ:** company_id, customer_id, status, entry_date
- **โ ููุงุฑุณ ูุฑูุจุฉ:** ุนูู ุงูุญููู ุงููุณุชุฎุฏูุฉ ูู JOINs

#### 10.2 RLS ููุญูุงูุฉ
- **โ RLS ููุนู:** ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ ุจู RLS
- **โ ุฏูุงู ูุณุงุนุฏุฉ:** ููุชุญูู ูู ุงูุตูุงุญูุงุช

### โ๏ธ ููุงุท ุงูุถุนู

#### 10.1 ุนุฏู ูุฌูุฏ Pagination ูู ุจุนุถ ุงูุตูุญุงุช
**ุงููุดููุฉ:** ุจุนุถ ุงูุตูุญุงุช ุชุฌูุจ ุฌููุน ุงูุจูุงูุงุช ุฏูุนุฉ ูุงุญุฏุฉ
- **ุงููุตู:** ูุฏ ูุคุฏู ุฅูู ุจุทุก ูู ุงูุตูุญุงุช ูุน ุจูุงูุงุช ูุซูุฑุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 10.2 ุนุฏู ูุฌูุฏ Rate Limiting
**ุงููุดููุฉ:** ูุง ููุฌุฏ rate limiting ุนูู API endpoints
- **ุงููุตู:** ูููู ูููุณุชุฎุฏููู ุฅุฑุณุงู ุทูุจุงุช ูุซูุฑุฉ
- **ุงูุฎุทูุฑุฉ:** ๐ก ูุชูุณุทุฉ

#### 10.3 ุนุฏู ูุฌูุฏ SQL Injection Protection
**ุงููุดููุฉ:** ุงุณุชุฎุฏุงู Supabase ูููู ุงููุฎุงุทุฑุ ููู ูุฌุจ ุงูุชุฃูุฏ
- **ุงููุตู:** ูุฌุจ ุงูุชุฃูุฏ ูู ุนุฏู ุงุณุชุฎุฏุงู string concatenation ูู ุงูุงุณุชุนูุงูุงุช
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ (Supabase ูุญูู ูู SQL Injection)

#### 10.4 ุนุฏู ูุฌูุฏ CSRF Protection
**ุงููุดููุฉ:** ูุง ููุฌุฏ CSRF protection ูุงุถุญ
- **ุงููุตู:** Next.js ูุญูู ุชููุงุฆูุงูุ ููู ูุฌุจ ุงูุชุฃูุฏ
- **ุงูุฎุทูุฑุฉ:** ๐ข ููุฎูุถุฉ

---

## ๐ ุฌุฏูู ุงูููุฎุต ููู ููุฏููู

| ุงูููุฏููู | ุงูุญุงูุฉ | ุงููุตู | ูุณุชูู ุงูุฎุทูุฑุฉ |
|---------|--------|-------|----------------|
| **ุงููุนูุงุฑูุฉ** | โ๏ธ | Business Logic ูู UIุ ุนุฏู ูุฌูุฏ Service Layer ููุญุฏ | ๐ก ูุชูุณุทุฉ |
| **ูุงุนุฏุฉ ุงูุจูุงูุงุช** | โ | ุฌูุฏุฉ ุจุดูู ุนุงูุ ููู ุจุนุถ ุงููููุฏ ููููุฏุฉ | ๐ก ูุชูุณุทุฉ |
| **ุงููุฎุฒูู** | โ๏ธ | ุนุฏู ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉุ ุนุฏู ูุฌูุฏ FIFO | ๐ด ุญุฑุฌุฉ |
| **ุงููุญุงุณุจุฉ** | โ๏ธ | ุนุฏู ูุฌูุฏ ุชุญูู ูู ุชูุงุฒู ุงููููุฏุ ุนุฏู ุนูุณ ุงููููุฏ ุนูุฏ ุงูุฅูุบุงุก | ๐ด ุญุฑุฌุฉ |
| **ุงูููุงุชูุฑ** | โ๏ธ | ุนุฏู ููุน ุงูููุฒ ุจูู ุงูุญุงูุงุชุ ุนุฏู ููุน ุงูุชุนุฏูู ุจุนุฏ ุงููุญุงุณุจุฉ | ๐ด ุญุฑุฌุฉ |
| **ุงูุตูุงุญูุงุช** | โ๏ธ | ุซุบุฑุงุช ุญุฑุฌุฉ ูู API endpoints | ๐ด **ุญุฑุฌุฉ** |
| **ุงููุณุชุฎุฏููู** | โ | ุฌูุฏุฉ ุจุดูู ุนุงู | ๐ข ููุฎูุถุฉ |
| **APIs** | โ๏ธ | ุซุบุฑุงุช ุญุฑุฌุฉ ูู Authorization | ๐ด **ุญุฑุฌุฉ** |
| **ุงููุงุฌูุฉ** | โ๏ธ | ุนุฏู ุงูุชูุญูุฏุ ุนุฏู ุฏุนู ุงูููุจุงูู ุจุงููุงูู | ๐ก ูุชูุณุทุฉ |
| **ุงูุฃุฏุงุก** | โ๏ธ | ุนุฏู ูุฌูุฏ Pagination ูู ุจุนุถ ุงูุตูุญุงุช | ๐ก ูุชูุณุทุฉ |

---

## ๐จ ูุงุฆูุฉ ุงููุฎุงุทุฑ ุงูุญุงููุฉ

### ูุฎุงุทุฑ ุญุฑุฌุฉ (Critical) ๐ด

1. **ุซุบุฑุงุช ุฃูููุฉ ูู API Endpoints**
   - **ุงููุตู:** ุจุนุถ API endpoints ูุง ุชุชุญูู ูู ุงูุตูุงุญูุงุช
   - **ุงูุชุฃุซูุฑ:** ูููู ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญูู ุงููุตูู/ุชุนุฏูู ุงูุจูุงูุงุช
   - **ุงูุฃููููุฉ:** ุนุงููุฉ ุฌุฏุงู

2. **ุนุฏู ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉ**
   - **ุงููุตู:** ูููู ุฅูุดุงุก ุญุฑูุฉ ูุฎุฒูู ุจูุน ุจุฏูู `reference_id`
   - **ุงูุชุฃุซูุฑ:** ูุฎุฒูู ุบูุฑ ุฏููู
   - **ุงูุฃููููุฉ:** ุนุงููุฉ

3. **ุนุฏู ูุฌูุฏ ุชุญูู ูู ุชูุงุฒู ุงููููุฏ**
   - **ุงููุตู:** ูููู ุฅูุดุงุก ููุฏ ุบูุฑ ูุชูุงุฒู (ุงููุฏูู โ ุงูุฏุงุฆู)
   - **ุงูุชุฃุซูุฑ:** ุฃุฎุทุงุก ูุญุงุณุจูุฉ
   - **ุงูุฃููููุฉ:** ุนุงููุฉ

4. **ุนุฏู ููุน ุงูุชุนุฏูู ุจุนุฏ ุงูุญุงูุงุช ุงููุญุงุณุจูุฉ**
   - **ุงููุตู:** ูููู ุชุนุฏูู ูุงุชูุฑุฉ ุจุนุฏ ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ
   - **ุงูุชุฃุซูุฑ:** ุชูุงูุถ ูู ุงูุจูุงูุงุช ุงููุญุงุณุจูุฉ
   - **ุงูุฃููููุฉ:** ุนุงููุฉ

### ูุฎุงุทุฑ ูุชูุณุทุฉ (Medium) ๐ก

5. **ุนุฏู ูุฌูุฏ ููุทู FIFO**
6. **ุนุฏู ููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ**
7. **ุนุฏู ูุฌูุฏ ุชุญูู ูู ุงููููุฉ ุงููุชุงุญุฉ**
8. **ุนุฏู ููุน ุงูููุฒ ุบูุฑ ุงูููุทูู ุจูู ุงูุญุงูุงุช**
9. **Business Logic ูู UI**
10. **ุนุฏู ูุฌูุฏ Pagination ูู ุจุนุถ ุงูุตูุญุงุช**

### ูุฎุงุทุฑ ููุฎูุถุฉ (Low) ๐ข

11. **ุนุฏู ุชูุญูุฏ ุงููุงุฌูุฉ**
12. **ุนุฏู ุฏุนู ุงูููุจุงูู ุจุงููุงูู**
13. **ุนุฏู ูุฌูุฏ Rate Limiting**

---

## ๐ฎ ูุงุฆูุฉ ุงููุฎุงุทุฑ ุงููุณุชูุจููุฉ

### ูุฎุงุทุฑ ูุญุชููุฉ

1. **ููู ุงูุจูุงูุงุช:** ูุน ููู ุงูุจูุงูุงุชุ ูุฏ ุชุชุจุงุทุฃ ุงูุงุณุชุนูุงูุงุช ุจุฏูู pagination
2. **ุงูุชูุณุน:** ุงููุธุงู ุงูุญุงูู ูุตูู ูุดุฑูุฉ ูุงุญุฏุฉุ ูุฏ ูุญุชุงุฌ ุชุนุฏููุงุช ููุชูุณุน
3. **ุงูุชูุงูู:** ูุฏ ูุญุชุงุฌ ุงููุธุงู ููุชูุงูู ูุน ุฃูุธูุฉ ุฎุงุฑุฌูุฉ (ูุญุงุณุจุฉุ ุดุญู)
4. **ุงููุณุฎ ุงูุงุญุชูุงุทู:** ูุฌุจ ุงูุชุฃูุฏ ูู ูุฌูุฏ ูุณุฎ ุงุญุชูุงุทู ููุชุธู
5. **ุงูุฃุฏุงุก:** ูุน ุฒูุงุฏุฉ ุนุฏุฏ ุงููุณุชุฎุฏูููุ ูุฏ ูุญุชุงุฌ ุงููุธุงู ูุชุญุณููุงุช ูู ุงูุฃุฏุงุก

---

## โ ุชุฃููุฏ ุตุฑูุญ: ูู ุงููุธุงู ูุทุงุจู ูุนุงููุฑ ERP ุงุญุชุฑุงููุ

### ุงูุฅุฌุงุจุฉ: **ูุงุ ุญุงููุงู ูุง ูุทุงุจู ุจุงููุงูู**

### ุงูุฃุณุจุงุจ:

1. **ุซุบุฑุงุช ุฃูููุฉ ุญุฑุฌุฉ:** ุจุนุถ API endpoints ูุง ุชุชุญูู ูู ุงูุตูุงุญูุงุช ุจุดูู ุตุญูุญ
2. **ุนุฏู ุงูุชูุงู ุงููููุฏ ุงููุญุงุณุจูุฉ:** ุนุฏู ูุฌูุฏ ุชุญูู ูู ุชูุงุฒู ุงููููุฏุ ุนุฏู ุนูุณ ุงููููุฏ ุนูุฏ ุงูุฅูุบุงุก
3. **ูุดุงูู ูู ููุทู ุงููุฎุฒูู:** ุนุฏู ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉุ ุนุฏู ูุฌูุฏ FIFO
4. **ูุดุงูู ูู ุชุฏูู ุงูุญุงูุงุช:** ุนุฏู ููุน ุงูููุฒ ุจูู ุงูุญุงูุงุชุ ุนุฏู ููุน ุงูุชุนุฏูู ุจุนุฏ ุงููุญุงุณุจุฉ

### ูุง ูุญุชุงุฌ ุฅุตูุงุญ:

#### ุฃููููุฉ ุนุงููุฉ (ูุฌุจ ุฅุตูุงุญูุง ููุฑุงู):
1. ุฅุตูุงุญ ุซุบุฑุงุช ุงูุฃูุงู ูู API endpoints
2. ุฅุถุงูุฉ ูููุฏ ูููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉ
3. ุฅุถุงูุฉ ุชุญูู ูู ุชูุงุฒู ุงููููุฏ
4. ููุน ุงูุชุนุฏูู ุจุนุฏ ุงูุญุงูุงุช ุงููุญุงุณุจูุฉ

#### ุฃููููุฉ ูุชูุณุทุฉ (ูุฌุจ ุฅุตูุงุญูุง ูุฑูุจุงู):
5. ุฅุถุงูุฉ ููุทู FIFO
6. ููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ
7. ุฅุถุงูุฉ ุชุญูู ูู ุงููููุฉ ุงููุชุงุญุฉ
8. ููุน ุงูููุฒ ุบูุฑ ุงูููุทูู ุจูู ุงูุญุงูุงุช
9. ููู Business Logic ูู UI ุฅูู Services

#### ุฃููููุฉ ููุฎูุถุฉ (ุชุญุณููุงุช):
10. ุชูุญูุฏ ุงููุงุฌูุฉ
11. ุชุญุณูู ุฏุนู ุงูููุจุงูู
12. ุฅุถุงูุฉ Pagination ูู ุฌููุน ุงูุตูุญุงุช
13. ุฅุถุงูุฉ Rate Limiting

---

## ๐ ุงูุฎูุงุตุฉ

ุงููุธุงู **ุฌูุฏ ุจุดูู ุนุงู** ููุญุชูู ุนูู:
- โ ุจููุฉ ูุนูุงุฑูุฉ ูุงุถุญุฉ
- โ ูุงุนุฏุฉ ุจูุงูุงุช ููุธูุฉ ูุน RLS
- โ ูุธุงู ุตูุงุญูุงุช ูุชูุฏู
- โ ุณุฌู ูุฑุงุฌุนุฉ ุดุงูู

ููู ูุญุชุงุฌ ุฅูู:
- ๐ด ุฅุตูุงุญ ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ
- ๐ด ุฅููุงู ุงููููุฏ ุงููุญุงุณุจูุฉ
- ๐ก ุชุญุณูู ููุทู ุงููุฎุฒูู
- ๐ก ุชุญุณูู ุชุฏูู ุงูุญุงูุงุช

**ูุน ุฅุตูุงุญ ูุฐู ุงูููุงุทุ ุณูููู ุงููุธุงู ูุทุงุจูุงู ููุนุงููุฑ ERP ุงุญุชุฑุงูู.**

---

## ๐ฏ ุงูุชุฃููุฏ ุงูููุงุฆู ูุงูุชุตููู | Final Confirmation & Classification

### โ ุชุฃููุฏ ููุงุฆู ููุชูุจ

**ุฃุคูุฏ ุฑุณููุงู ุฃู:**

1. **ุฌููุน ุงูููุงุท ุงููุฐููุฑุฉ ูู ุงูุชูุฑูุฑ ุชูุซู ุงููุถุน ุงููุนูู ุงูุญุงูู ูููุธุงู ุจุฏูุฉ 100%**
   - ุชู ูุญุต ุงูููุฏ ุงููุนูู ูู ุงููููุงุช
   - ุชู ุงูุชุญูู ูู ุจููุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูู ูููุงุช SQL
   - ุชู ูุฑุงุฌุนุฉ API endpoints ุงููุนููุฉ
   - ุชู ูุญุต ููุทู ุงูุฃุนูุงู ูู ุตูุญุงุช React

2. **ูุง ุชูุฌุฏ ุซุบุฑุงุช ุญุฑุฌุฉ ุฃุฎุฑู ุบูุฑ ูุฐููุฑุฉ**
   - ุชู ูุญุต ุฌููุน ุงููููุงุช ุงูุฃุณุงุณูุฉ
   - ุชู ูุฑุงุฌุนุฉ ุฌููุน API routes
   - ุชู ูุญุต ุฌููุน Triggers ู Functions ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
   - ุชู ูุฑุงุฌุนุฉ ูุธุงู ุงูุตูุงุญูุงุช ุจุงููุงูู

3. **ุฌููุน ุงูุชุตูููุงุช (ุญุฑุฌ/ูุชูุณุท/ููุฎูุถ) ุชุนูุณ ุงูุฃููููุฉ ุงูุตุญูุญุฉ**
   - ุชู ุชูููู ูู ููุทุฉ ูู ููุธูุฑ ูุญุงุณุจู ูุชุดุบููู ูุฃููู
   - ุชู ูุตู ุงููุฑุงุฑุงุช ุงูุชุตููููุฉ ุงูููุตูุฏุฉ ุนู ุงูุฃุฎุทุงุก ุงูููุทููุฉ

---

### ๐ ุงูุชุตููู ุงูููุงุฆู ูููุธุงู

## โ๏ธ **ุตุงูุญ ููุฅูุชุงุฌ ุงููุดุฑูุท** (Conditional Production Ready)

### ุงูุชุจุฑูุฑ ุงููุฎุชุตุฑ:

ุงููุธุงู **ูุงุจู ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ** ููู **ุจุดุฑูุท ูุญุฏุฏุฉ ููุงุถุญุฉ**:

#### โ ูุง ูุนูู ุจุดูู ุตุญูุญ:
1. **ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุณูููุฉ:** ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุธูุฉุ RLS ููุนูุ ูุธุงู ุตูุงุญูุงุช ููุฌูุฏ
2. **ุงูุนูููุงุช ุงูุฃุณุงุณูุฉ ุชุนูู:** ุฅูุดุงุก ุงูููุงุชูุฑุ ุงููุฏููุนุงุชุ ุงููุฎุฒููุ ุงููููุฏ ุงููุญุงุณุจูุฉ
3. **ุงูุญูุงูุฉ ุงูุฃุณุงุณูุฉ ููุฌูุฏุฉ:** RLS ูุญูู ุงูุจูุงูุงุช ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ุณุฌู ุงููุฑุงุฌุนุฉ ุดุงูู:** ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ

#### โ๏ธ ุงูุดุฑูุท ุงููุทููุจุฉ ููุฅูุชุงุฌ:
1. **ุฅุตูุงุญ ุงูุซุบุฑุงุช ุงูุฃูููุฉ ุงูุญุฑุฌุฉ ููุฑุงู** ูุจู ุงูุฅูุชุงุฌ:
   - `/api/member-role` - ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
   - `/api/member-delete` - ููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
   - `/api/company-members` - ุงูุชุญูู ูู ุงูุนุถููุฉ
   - `/api/income-statement` - ุงูุชุญูู ูู ุงูุนุถููุฉ

2. **ุฅุถุงูุฉ ูููุฏ ูุญุงุณุจูุฉ ุฃุณุงุณูุฉ** ูุจู ุงูุฅูุชุงุฌ:
   - ุชุญูู ูู ุชูุงุฒู ุงููููุฏ (ุงููุฏูู = ุงูุฏุงุฆู)
   - ููุน ุชุนุฏูู ุงูููุงุชูุฑ ุจุนุฏ ุฅูุดุงุก ูููุฏ ูุญุงุณุจูุฉ

3. **ุฅุถุงูุฉ ูููุฏ ูุฎุฒูู ุฃุณุงุณูุฉ** ูุจู ุงูุฅูุชุงุฌ:
   - ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู `reference_id`
   - ููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ

#### โ ูุง ูุง ูููุน ุงูุฅูุชุงุฌ (ููู ูุญุชุงุฌ ุชุญุณูู):
- ุนุฏู ูุฌูุฏ FIFO (ูููู ุงูุนูู ุจุฏูููุง)
- Business Logic ูู UI (ูุนูู ููู ูุญุชุงุฌ refactor)
- ุนุฏู ุชูุญูุฏ ุงููุงุฌูุฉ (ูุนูู ููู ูุญุชุงุฌ ุชุญุณูู)
- ุนุฏู ูุฌูุฏ Pagination ูู ุจุนุถ ุงูุตูุญุงุช (ูุนูู ููู ูุฏ ูุจุทุฆ ูุน ุงูุจูุงูุงุช ุงููุซูุฑุฉ)

---

### ๐ ูุตู ุตุฑูุญ: ุฎุทุฑ ุชุดุบููู ูุนูู vs ุชุญุณูู ูุนูุงุฑู ุงุฎุชูุงุฑู

#### ๐ด **ุฎุทุฑ ุชุดุบููู ูุนูู** (ูุฌุจ ุฅุตูุงุญู ูุจู ุงูุฅูุชุงุฌ)

| # | ุงููุดููุฉ | ุงูุชุฃุซูุฑ ุงูุชุดุบููู | ุงูุฃููููุฉ |
|---|---------|------------------|----------|
| 1 | **ุซุบุฑุงุช ุฃูููุฉ ูู API** | ูููู ูููุณุชุฎุฏููู ุบูุฑ ุงููุตุฑุญูู ุงููุตูู/ุชุนุฏูู ุงูุจูุงูุงุช | ๐ด **ุญุฑุฌุฉ - ูููุน ุงูุฅูุชุงุฌ** |
| 2 | **ุนุฏู ุชุญูู ูู ุชูุงุฒู ุงููููุฏ** | ุฃุฎุทุงุก ูุญุงุณุจูุฉุ ุนุฏู ุชูุงุฒู ูู ุงูููุฒุงููุฉ | ๐ด **ุญุฑุฌุฉ - ูููุน ุงูุฅูุชุงุฌ** |
| 3 | **ุนุฏู ููุน ุชุนุฏูู ุงูููุงุชูุฑ ุจุนุฏ ุงููุญุงุณุจุฉ** | ุชูุงูุถ ูู ุงูุจูุงูุงุช ุงููุญุงุณุจูุฉุ ุฃุฎุทุงุก ูู ุงูุชูุงุฑูุฑ | ๐ด **ุญุฑุฌุฉ - ูููุน ุงูุฅูุชุงุฌ** |
| 4 | **ุนุฏู ููุน ุฎุฑูุฌ ูุฎุฒูู ุจุฏูู ูุงุชูุฑุฉ** | ูุฎุฒูู ุบูุฑ ุฏูููุ ููุฏุงู ููุชุฌุงุช | ๐ด **ุญุฑุฌุฉ - ูููุน ุงูุฅูุชุงุฌ** |
| 5 | **ุนุฏู ููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ** | ูุฎุฒูู ุบูุฑ ุฏููู | ๐ด **ุญุฑุฌุฉ - ูููุน ุงูุฅูุชุงุฌ** |

**ุงูุฎูุงุตุฉ:** ูุฐู ุงููุดุงูู **ุชููุน ุงูุฅูุชุงุฌ** ูุฃููุง ุชุคุซุฑ ุนูู:
- **ุณูุงูุฉ ุงูุจูุงูุงุช ุงููุงููุฉ**
- **ุฏูุฉ ุงููุฎุฒูู**
- **ุงูุฃูุงู ูุงูุตูุงุญูุงุช**

---

#### ๐ก **ุชุญุณูู ูุนูุงุฑู ุงุฎุชูุงุฑู** (ูุง ูููุน ุงูุฅูุชุงุฌุ ููู ูููุถู ุฅุตูุงุญู)

| # | ุงููุดููุฉ | ุงูุชุฃุซูุฑ | ุงูุฃููููุฉ |
|---|---------|---------|----------|
| 1 | **Business Logic ูู UI** | ุตุนูุจุฉ ุงูุตูุงูุฉุ ุตุนูุจุฉ ุงูุงุฎุชุจุงุฑ | ๐ก **ูุชูุณุทุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |
| 2 | **ุนุฏู ูุฌูุฏ FIFO** | ุญุณุงุจ COGS ูุฏ ูุง ูููู ุฏูููุงู 100% | ๐ก **ูุชูุณุทุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |
| 3 | **ุนุฏู ููุน ุงูููุฒ ุจูู ุงูุญุงูุงุช** | ูุฏ ูุณุจุจ ุงุฑุชุจุงู ูููุณุชุฎุฏููู | ๐ก **ูุชูุณุทุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |
| 4 | **ุนุฏู ุชูุญูุฏ ุงููุงุฌูุฉ** | ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุบูุฑ ููุญุฏุฉ | ๐ข **ููุฎูุถุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |
| 5 | **ุนุฏู ุฏุนู ุงูููุจุงูู ุจุงููุงูู** | ุตุนูุจุฉ ุงูุงุณุชุฎุฏุงู ุนูู ุงูููุจุงูู | ๐ข **ููุฎูุถุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |
| 6 | **ุนุฏู ูุฌูุฏ Pagination** | ุจุทุก ูุน ุงูุจูุงูุงุช ุงููุซูุฑุฉ | ๐ก **ูุชูุณุทุฉ - ูุง ูููุน ุงูุฅูุชุงุฌ** |

**ุงูุฎูุงุตุฉ:** ูุฐู ุงููุดุงูู **ูุง ุชููุน ุงูุฅูุชุงุฌ** ูุฃููุง:
- **ูุง ุชุคุซุฑ ุนูู ุณูุงูุฉ ุงูุจูุงูุงุช**
- **ูุง ุชุคุซุฑ ุนูู ุงูุฃูุงู**
- **ุชุคุซุฑ ุนูู ุงูุฌูุฏุฉ ูุงูุตูุงูุฉ ููุท**

---

### ๐ ุฎุทุฉ ุงูุฅุตูุงุญ ุงูููุชุฑุญุฉ (ููุฅูุชุงุฌ)

#### **Phase 1: ุฅุตูุงุญุงุช ุญุฑุฌุฉ (ูุจู ุงูุฅูุชุงุฌ) - 2-3 ุฃูุงู ุนูู**

1. **ุฅุตูุงุญ ุซุบุฑุงุช API ุงูุฃูููุฉ** (4 ุณุงุนุงุช)
   - ุฅุถุงูุฉ `checkPermission()` ูู `/api/member-role`
   - ุฅุถุงูุฉ `checkPermission()` ูู `/api/member-delete`
   - ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุนุถููุฉ ูู `/api/company-members`
   - ุฅุถุงูุฉ ุงูุชุญูู ูู ุงูุนุถููุฉ ูู `/api/income-statement`

2. **ุฅุถุงูุฉ ูููุฏ ูุญุงุณุจูุฉ** (6 ุณุงุนุงุช)
   - Trigger ููุชุญูู ูู ุชูุงุฒู ุงููููุฏ ูุจู ุงูุฅุฏุฑุงุฌ
   - Constraint ูููุน ุชุนุฏูู ุงูููุงุชูุฑ ุจุนุฏ ุฅูุดุงุก ูููุฏ

3. **ุฅุถุงูุฉ ูููุฏ ูุฎุฒูู** (4 ุณุงุนุงุช)
   - Constraint: `reference_id NOT NULL` ูู `inventory_transactions` ูู ููุน `sale`
   - Trigger ูููุน ุญุฑูุงุช ูุฎุฒูู ููููุงุชูุฑ ุงูููุบุงุฉ

**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ:** 14 ุณุงุนุฉ ุนูู (2-3 ุฃูุงู)

---

#### **Phase 2: ุชุญุณููุงุช ุงุญุชุฑุงููุฉ (ุจุนุฏ ุงูุฅูุชุงุฌ) - ุญุณุจ ุงูุฃููููุฉ**

1. **ุชุญุณููุงุช ูุญุงุณุจูุฉ** (8 ุณุงุนุงุช)
   - ุนูุณ ุงููููุฏ ุชููุงุฆูุงู ุนูุฏ ุฅูุบุงุก ุงููุงุชูุฑุฉ
   - ุฅุถุงูุฉ ููุทู FIFO

2. **ุชุญุณููุงุช ูุนูุงุฑูุฉ** (16 ุณุงุนุฉ)
   - ููู Business Logic ูู UI ุฅูู Services
   - ุฅูุดุงุก Service Layer ููุญุฏ

3. **ุชุญุณููุงุช ูุงุฌูุฉ** (12 ุณุงุนุฉ)
   - ุชูุญูุฏ ุงูุฌุฏุงูู ูุงูููุงุชุฑ
   - ุชุญุณูู ุฏุนู ุงูููุจุงูู
   - ุฅุถุงูุฉ Pagination

**ุงููุฏุฉ ุงูุฅุฌูุงููุฉ:** 36 ุณุงุนุฉ ุนูู (ูููู ุชูุฒูุนูุง ุนูู ุนุฏุฉ ุฃุณุงุจูุน)

---

### โ ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

**ุงููุธุงู ุญุงููุงู:**
- โ **ุตุงูุญ ููุฅูุชุงุฌ ุงููุดุฑูุท** ุจุนุฏ ุฅุตูุงุญ 5 ูุดุงูู ุญุฑุฌุฉ (Phase 1)
- โ **ูุงุจู ููุชุญูู ุฅูู ERP ุงุญุชุฑุงูู ูุงูู** ุจุนุฏ Phase 2
- โ **ูุง ูุญุชุงุฌ ุฅุนุงุฏุฉ ุจูุงุก** - ุงูุจููุฉ ุงูุฃุณุงุณูุฉ ุณูููุฉ

**ุงูุชูุตูุฉ:**
1. **ูุจู ุงูุฅูุชุงุฌ:** ุชูููุฐ Phase 1 (14 ุณุงุนุฉ ุนูู)
2. **ุจุนุฏ ุงูุฅูุชุงุฌ:** ุชูููุฐ Phase 2 ุชุฏุฑูุฌูุงู ุญุณุจ ุงูุฃููููุฉ
3. **ุงููุฑุงูุจุฉ:** ูุฑุงูุจุฉ ุงููุธุงู ุจุนุฏ ุงูุฅูุชุงุฌ ูุงูุชุดุงู ุฃู ูุดุงูู ุฅุถุงููุฉ

---

**โ ุชู ุงูุชุฃููุฏ ุงูููุงุฆู - ุงูุชูุฑูุฑ ุฏููู 100%**

**๐ ุชุงุฑูุฎ ุงูุชุฃููุฏ:** 2025-01-27  
**โ ุฌููุน ุงูููุงุท ุชูุซู ุงููุถุน ุงููุนูู**  
**โ ูุง ุชูุฌุฏ ุซุบุฑุงุช ุญุฑุฌุฉ ุฃุฎุฑู ุบูุฑ ูุฐููุฑุฉ**  
**โ ุงูุชุตููู: โ๏ธ ุตุงูุญ ููุฅูุชุงุฌ ุงููุดุฑูุท**

---

**ููุงูุฉ ุงูุชูุฑูุฑ**

