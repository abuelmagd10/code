# ุฅุตูุงุญ ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ ุงูููุฌูุฏุฉ - Phase 1
# Fix Existing Unbalanced Journal Entries

**ุชุงุฑูุฎ ุงูุงูุชุดุงู:** 2025-01-27  
**ุงูุญุงูุฉ:** โ๏ธ **ูุญุชุงุฌ ุฅุตูุงุญ ูุจู ุฅููุงู Phase 1**

---

## ๐ ุงูููุฏ ุงูููุชุดู

### ุงูููุฏ ุบูุฑ ุงููุชูุงุฒู:
- **ID:** `cd4260f4-2cee-49e5-99f1-3bcc92a708ba`
- **ุงููุตู:** "ูุฑุชุฌุน ูุฑูุฒู ูู ุงููุงุชูุฑุฉ ุฑูู INV-0031 ุชู ุงุชูุงูุฉ ูู ูุจู ุดุฑูุฉ ุงูุดุญู"
- **ุงููุฏูู:** 0.00
- **ุงูุฏุงุฆู:** 250.00
- **ุงููุฑู:** 250.00
- **ุงููุดููุฉ:** ููุต ูู ุงููุฏูู (ูุญุชุงุฌ ุณุทุฑ ูุฏูู ุจูููุฉ 250)

---

## โ๏ธ ููุงุญุธุฉ ูููุฉ

**ูุฐุง ุงูููุฏ ููุฌูุฏ ูุณุจูุงู ูุจู ุชุทุจูู Phase 1.**

Phase 1 ุณูููุน ุฅูุดุงุก ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ ุฌุฏูุฏุฉุ ููู **ูุง ูุตูุญ ุงููููุฏ ุงูููุฌูุฏุฉ ูุณุจูุงู**.

---

## ๐ง ุฎูุงุฑุงุช ุงูุฅุตูุงุญ

### ุงูุฎูุงุฑ 1: ุงูุฅุตูุงุญ ุงููุฏูู (ููุตู ุจู)

1. **ูุฑุงุฌุนุฉ ุงูููุฏ:**
   - ุงูุชุญ ุงูููุฏ ูู ุงููุธุงู
   - ุฑุงุฌุน ุงูุณูุงู ุงููุญุงุณุจู
   - ุญุฏุฏ ุงูุญุณุงุจ ุงูููุงุณุจ ููุฅุตูุงุญ

2. **ุฅุถุงูุฉ ุณุทุฑ ูุฏูู:**
   - ุญุณุงุจ ููุงุณุจ: (ูุตุฑูู ุดุญูุ ุชูููุฉุ ุฅูุฎ)
   - ุงููุจูุบ: 250.00
   - ุงููุตู: "ุฅุตูุงุญ ุชูุงุฒู ุงูููุฏ - Phase 1"

3. **ุงูุชุญูู:**
   - ุชุฃูุฏ ุฃู ุงููุฏูู = ุงูุฏุงุฆู ุจุนุฏ ุงูุฅุตูุงุญ

### ุงูุฎูุงุฑ 2: ุงุณุชุฎุฏุงู ููู SQL

ุงุณุชุฎุฏู `scripts/fix_unbalanced_journal_entries.sql`:

1. **ุนุฑุถ ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ:**
   ```sql
   -- ููุฐ ุงูุฌุฒุก 1 ูู ุงูููู
   ```

2. **ุงุณุชุฎุฏุงู ุงูุฏุงูุฉ ุงููุณุงุนุฏุฉ:**
   ```sql
   SELECT * FROM suggest_fix_for_unbalanced_entry(
     'cd4260f4-2cee-49e5-99f1-3bcc92a708ba'::UUID
   );
   ```

3. **ุฅุตูุงุญ ุงูููุฏ:**
   ```sql
   -- ุงุณุชุฎุฏู ุงูุงูุชุฑุงุญ ูู ุงูุฏุงูุฉ
   -- ุฑุงุฌุน ุงูุญุณุงุจ ุงูููุชุฑุญ
   -- ููุฐ INSERT ูุฏููุงู ุจุนุฏ ุงููุฑุงุฌุนุฉ
   ```

---

## ๐ ุฎุทูุงุช ุงูุฅุตูุงุญ ุงูููุตู ุจูุง

### 1. ุงูุจุญุซ ุนู ุญุณุงุจ ููุงุณุจ
```sql
-- ุงูุจุญุซ ุนู ุญุณุงุจ ูุตุฑูู ุดุญู ุฃู ุชูููุฉ
SELECT id, account_name, account_code, account_type
FROM chart_of_accounts
WHERE account_type IN ('Expense', 'Cost of Goods Sold')
AND (account_name LIKE '%ุดุญู%' OR account_name LIKE '%ุชูููุฉ%' OR account_name LIKE '%ูุตุฑูู%')
LIMIT 5;
```

### 2. ุฅุตูุงุญ ุงูููุฏ
```sql
-- โ๏ธ ุงุณุชุจุฏู 'YOUR_ACCOUNT_ID' ุจุงูุญุณุงุจ ุงูููุงุณุจ
INSERT INTO journal_entry_lines (
  journal_entry_id,
  account_id,
  debit_amount,
  credit_amount,
  description
)
VALUES (
  'cd4260f4-2cee-49e5-99f1-3bcc92a708ba',
  'YOUR_ACCOUNT_ID',  -- ุญุณุงุจ ููุงุณุจ
  250.00,
  0,
  'ุฅุตูุงุญ ุชูุงุฒู ุงูููุฏ - Phase 1'
);
```

### 3. ุงูุชุญูู ูู ุงูุฅุตูุงุญ
```sql
SELECT 
  je.id,
  je.description,
  SUM(jel.debit_amount) as total_debit,
  SUM(jel.credit_amount) as total_credit,
  ABS(SUM(jel.debit_amount) - SUM(jel.credit_amount)) as difference
FROM journal_entries je
JOIN journal_entry_lines jel ON jel.journal_entry_id = je.id
WHERE je.id = 'cd4260f4-2cee-49e5-99f1-3bcc92a708ba'
GROUP BY je.id, je.description;
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:** difference = 0.00 ุฃู ุฃูู ูู 0.01

---

## โ ุจุนุฏ ุงูุฅุตูุงุญ

1. **ุงูุชุญูู ูู ุนุฏู ูุฌูุฏ ูููุฏ ุฃุฎุฑู ุบูุฑ ูุชูุงุฒูุฉ:**
   ```sql
   -- ุงุณุชุฎุฏู ุงูุฌุฒุก 1 ูู fix_unbalanced_journal_entries.sql
   ```

2. **ุฅููุงู ุชุทุจูู Phase 1:**
   - ุจุนุฏ ุฅุตูุงุญ ุฌููุน ุงููููุฏ ุบูุฑ ุงููุชูุงุฒูุฉ
   - Phase 1 ุณูููุน ุฅูุดุงุก ูููุฏ ุฌุฏูุฏุฉ ุบูุฑ ูุชูุงุฒูุฉ

3. **ุชูููุฐ ุงูุงุฎุชุจุงุฑุงุช:**
   - ุจุนุฏ ุงูุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ
   - ููุฐ ุงูุงุฎุชุจุงุฑุงุช ูู `PHASE_1_TEST_CHECKLIST.md`

---

## ๐จ ุชุญุฐูุฑ

**ูุง ุชูู ุจุฅุตูุงุญ ุงููููุฏ ุจุฏูู ููู ุงูุณูุงู ุงููุญุงุณุจู!**

- ูุฌุจ ูุฑุงุฌุนุฉ ูู ููุฏ ูุฏููุงู
- ูุฌุจ ุงูุชุฃูุฏ ูู ุงูุญุณุงุจ ุงููุณุชุฎุฏู
- ูุฌุจ ููู ุณุจุจ ุนุฏู ุงูุชูุงุฒู

---

## ๐ ุงูุฎูุงุตุฉ

**ุงูููุฏ ุงูููุชุดู:**
- ID: `cd4260f4-2cee-49e5-99f1-3bcc92a708ba`
- ูุญุชุงุฌ: ุฅุถุงูุฉ ุณุทุฑ ูุฏูู ุจูููุฉ 250.00
- ุงูุญุณุงุจ: ูุฌุจ ุงุฎุชูุงุฑ ุญุณุงุจ ููุงุณุจ (ูุตุฑูู ุดุญู ุฃู ุชูููุฉ)

**ุจุนุฏ ุงูุฅุตูุงุญ:**
- Phase 1 ุณูููุน ุฅูุดุงุก ูููุฏ ุบูุฑ ูุชูุงุฒูุฉ ุฌุฏูุฏุฉ
- ุงููุธุงู ุณูููู ูุญุงุณุจููุง ุณููููุง

---

**โณ ูู ุงูุชุธุงุฑ ุฅุตูุงุญ ุงูููุฏ ุบูุฑ ุงููุชูุงุฒู**

