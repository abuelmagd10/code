-- =====================================================
-- ๐งช ุงุฎุชุจุงุฑ: ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ููููู ูุฑุงุกุฉ ุณุฌูู
-- =====================================================
-- ูุฐุง ุงูุณูุฑูุจุช ูุฎุชุจุฑ ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ููููู ูุฑุงุกุฉ ุณุฌูู
-- ูู company_members ุจุนุฏ ุงูุชุญุฏูุซ (ููู ูู Realtime)
-- =====================================================

-- =====================================================
-- 1๏ธโฃ ุงุฎุชุจุงุฑ: ูุฑุงุกุฉ ุณุฌู ุงููุณุชุฎุฏู ุงูุญุงูู
-- =====================================================
-- 
-- โ๏ธ ุดุบูู ูุฐุง ุงูุงุณุชุนูุงู ููุณุชุฎุฏู ุนุงุฏู (ููุณ Owner/Admin):
-- 
-- SELECT * FROM company_members 
-- WHERE company_id = 'YOUR_COMPANY_ID' 
--   AND user_id = auth.uid();
-- 
-- ูุฌุจ ุฃู ูุนูุฏ ุณุฌู ูุงุญุฏ ุนูู ุงูุฃูู.
-- 
-- =====================================================
-- 2๏ธโฃ ุงุฎุชุจุงุฑ: ูุฑุงุกุฉ ุฌููุน ุงูุณุฌูุงุช ูู ุงูุดุฑูุฉ
-- =====================================================
-- 
-- โ๏ธ ุดุบูู ูุฐุง ุงูุงุณุชุนูุงู ููุณุชุฎุฏู ุนุงุฏู:
-- 
-- SELECT COUNT(*) FROM company_members 
-- WHERE company_id = 'YOUR_COMPANY_ID';
-- 
-- ูุฌุจ ุฃู ูุนูุฏ ุนุฏุฏ ุงูุณุฌูุงุช ูู ุงูุดุฑูุฉ (ูุฃู SELECT policy ุชุณูุญ ุจุฐูู).
-- 
-- =====================================================
-- 3๏ธโฃ ููุงุญุธุฉ ุญุฑุฌุฉ: Realtime ู RLS
-- =====================================================
-- 
-- โ๏ธ ูู Supabaseุ Realtime ูุนูู ูุน RLS Policies:
-- 
-- 1. ุนูุฏูุง ูุชู UPDATE ุนูู ุณุฌู:
--    - Supabase Realtime ูุชุญูู ูู RLS **ุจุนุฏ** ุงูุชุญุฏูุซ
--    - ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุง ูุณุชุทูุน ูุฑุงุกุฉ ุงูุณุฌู ุจุนุฏ ุงูุชุญุฏูุซ โ โ ูู ูุตู ุงูุญุฏุซ
-- 
-- 2. ูู ุญุงูุชูุง:
--    - SELECT policy: `is_company_member(company_id)`
--    - ูุฐุง ูุนูู ุฃู ุงููุณุชุฎุฏู ููููู ูุฑุงุกุฉ ุฌููุน ุงูุณุฌูุงุช ูู ุงูุดุฑูุฉ
--    - โ ูุฌุจ ุฃู ูุตู ุงูุญุฏุซ
-- 
-- 3. ููู ุงููุดููุฉ ุงููุญุชููุฉ:
--    - ูุฏ ุชููู ุงููุดููุฉ ูู ุฃู Realtime filter ูุง ูุทุงุจู ุงูุณุฌู
--    - ุฃู ุฃู Supabase Realtime ูุง ูุฑุณู ุงูุฃุญุฏุงุซ ุจุณุจุจ ูุดููุฉ ูู ุงูุงุชุตุงู
-- 
-- =====================================================
-- 4๏ธโฃ ุงูุญู ุงูููุชุฑุญ: ุฅุถุงูุฉ logging ุฅุถุงูู
-- =====================================================
-- 
-- ุชู ุฅุถุงูุฉ diagnostic listener ูู realtime-manager.ts:
-- - ูุณุชูุน ูุฌููุน ุงูุฃุญุฏุงุซ ุนูู ุงูููุงุฉ
-- - ูุณุฌู: eventType, table, newKeys, oldKeys
-- 
-- ุฅุฐุง ุฑุฃูุช `๐ Raw Realtime event` ููู ูุง `๐ company_members event`:
-- โ ุงููุดููุฉ ูู ุงูู filter
-- 
-- ุฅุฐุง ูู ุชุฑู ุฃู log:
-- โ ุงููุดููุฉ ูู Supabase Realtime ุฃู RLS
-- 
-- =====================================================
