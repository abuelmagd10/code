# ๐ ุชูุฑูุฑ ุดุงูู ุนู ูุธุงู ุงูุฅุดุนุงุฑุงุช (Notifications System Report)

**ุชุงุฑูุฎ ุงููุฑุงุฌุนุฉ:** 2024  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** โ ูุนูู ุจุดูู ุตุญูุญ

---

## ๐ ููุฎุต ุชูููุฐู

ูุธุงู ุงูุฅุดุนุงุฑุงุช ูู ุงูุชุทุจูู ูุจูู ุนูู **Toast Notifications** ุจุงุณุชุฎุฏุงู ููุชุจุฉ **Radix UI** ูุน ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ. ุงููุธุงู ูููุฑ ุฅุดุนุงุฑุงุช ููุฑูุฉ ูููุณุชุฎุฏููู ุนูุฏ ุชูููุฐ ุงูุนูููุงุช ุงููุฎุชููุฉ (ุฅูุดุงุกุ ุชุญุฏูุซุ ุญุฐูุ ุฃุฎุทุงุก).

---

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ

### 1. ุงูููููุงุช ุงูุฃุณุงุณูุฉ

#### ุฃ. **Toast Components** (`components/ui/toast.tsx`)
- **ุงูููุชุจุฉ:** Radix UI (`@radix-ui/react-toast`)
- **ุงููุธููุฉ:** ููููุงุช UI ุงูุฃุณุงุณูุฉ ูุนุฑุถ ุงูุฅุดุนุงุฑุงุช
- **ุงูููููุงุช:**
  - `ToastProvider`: Provider ููุฅุดุนุงุฑุงุช
  - `ToastViewport`: ุญุงููุฉ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช
  - `Toast`: ูููู ุงูุฅุดุนุงุฑ ุงูุฃุณุงุณู
  - `ToastTitle`: ุนููุงู ุงูุฅุดุนุงุฑ
  - `ToastDescription`: ูุตู ุงูุฅุดุนุงุฑ
  - `ToastClose`: ุฒุฑ ุงูุฅุบูุงู
  - `ToastAction`: ุฒุฑ ุฅุฌุฑุงุก ุงุฎุชูุงุฑู

**ุงูุฃููุงุน (Variants):**
- `default`: ุฅุดุนุงุฑ ุนุงุฏู (ูุฌุงุญุ ูุนูููุงุช)
- `destructive`: ุฅุดุนุงุฑ ุฎุทุฃ (ุฃุญูุฑ)

**ุงูููุถุน:**
- Desktop: ุฃุณูู ูููู ุงูุดุงุดุฉ (`sm:bottom-0 sm:right-0`)
- Mobile: ุฃุนูู ุงูุดุงุดุฉ (`top-0`)
- Z-index: `100` (ุฃุนูู ูู ูุนุธู ุงูุนูุงุตุฑ)

#### ุจ. **Toast Hook** (`hooks/use-toast.ts`)
- **ุงููุธููุฉ:** ุฅุฏุงุฑุฉ ุญุงูุฉ ุงูุฅุดุนุงุฑุงุช ุจุงุณุชุฎุฏุงู React Context
- **ุงูููุฒุงุช:**
  - ุฅุถุงูุฉ ุฅุดุนุงุฑุงุช (`ADD_TOAST`)
  - ุชุญุฏูุซ ุฅุดุนุงุฑุงุช (`UPDATE_TOAST`)
  - ุฅุฎูุงุก ุฅุดุนุงุฑุงุช (`DISMISS_TOAST`)
  - ุญุฐู ุฅุดุนุงุฑุงุช (`REMOVE_TOAST`)

**ุงูุฅุนุฏุงุฏุงุช:**
- `TOAST_LIMIT = 1`: ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ุงููุนุฑูุถุฉ ูู ููุณ ุงูููุช
- `TOAST_REMOVE_DELAY = 1000000`: ููุช ุฅุฒุงูุฉ ุงูุฅุดุนุงุฑ (1000 ุซุงููุฉ)

**ุงูุฏูุงู:**
- `toast()`: ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ
- `useToast()`: Hook ูููุตูู ุฅูู ุงูุฅุดุนุงุฑุงุช

#### ุฌ. **Toaster Component** (`components/ui/toaster.tsx`)
- **ุงููุธููุฉ:** ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ูู ุงูุชุทุจูู
- **ุงููููุน:** `app/layout.tsx` (ุนูู ูุณุชูู ุงูุชุทุจูู ุจุงููุงูู)
- **ุงูุชูุงูู:** ูุชู ุงุณุชุฏุนุงุคู ูุฑุฉ ูุงุญุฏุฉ ูู `RootLayout`

#### ุฏ. **Notifications Library** (`lib/notifications.ts`)
- **ุงููุธููุฉ:** ุฏูุงู ูุณุงุนุฏุฉ ููุญุฏุฉ ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช
- **ุงูุฏูุงู ุงููุชููุฑุฉ:**

1. **`toastDeleteSuccess()`**
   - ุฅุดุนุงุฑ ูุฌุงุญ ุงูุญุฐู
   - ุฏุนู ุซูุงุฆู ุงููุบุฉ (ุนุฑุจู/ุฅูุฌููุฒู)
   - ูุซุงู: "ุชู ุงูุญุฐู" / "ุชู ุญุฐู ุงููุงุชูุฑุฉ ุจูุฌุงุญ"

2. **`toastDeleteError()`**
   - ุฅุดุนุงุฑ ูุดู ุงูุญุฐู
   - ุฏุนู ุซูุงุฆู ุงููุบุฉ
   - ูููู ุชุฎุตูุต ุฑุณุงูุฉ ุงูุฎุทุฃ

3. **`toastActionSuccess()`**
   - ุฅุดุนุงุฑ ูุฌุงุญ ุงูุนูููุงุช ุงูุนุงูุฉ (ุฅูุดุงุกุ ุชุญุฏูุซุ ุญูุธ)
   - ุฏุนู ุซูุงุฆู ุงููุบุฉ
   - ูุซุงู: "ุชู ุงูุญูุธ" / "ุชู ุญูุธ ุงููุงุชูุฑุฉ ุจูุฌุงุญ"

4. **`toastActionError()`**
   - ุฅุดุนุงุฑ ูุดู ุงูุนูููุงุช ุงูุนุงูุฉ
   - ุฏุนู ุซูุงุฆู ุงููุบุฉ
   - ุชูุงูู ูุน `error-messages.ts` ููุฑุณุงุฆู ุงูููุญุฏุฉ
   - ูููู ุชูุฑูุฑ `errorKey` ููุญุตูู ุนูู ุฑุณุงูุฉ ุฎุทุฃ ููุญุฏุฉ

---

### 2. ูุธุงู ุฑุณุงุฆู ุงูุฃุฎุทุงุก (`lib/error-messages.ts`)

**ุงููุธููุฉ:** ุฑุณุงุฆู ุฃุฎุทุงุก ููุญุฏุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

**ุงููุฆุงุช:**

#### ุฃ. ุฃุฎุทุงุก ุงูุดุจูุฉ ูุงูู API
- `NETWORK_ERROR`: ูุดู ุงูุงุชุตุงู ุจุงูุฎุงุฏู
- `SERVER_ERROR`: ุฎุทุฃ ูู ุงูุฎุงุฏู
- `TIMEOUT_ERROR`: ุงูุชูุงุก ูููุฉ ุงูุทูุจ

#### ุจ. ุงููุตุงุฏูุฉ ูุงูุตูุงุญูุงุช
- `UNAUTHORIZED`: ุบูุฑ ูุตุฑุญ ุจุงููุตูู
- `FORBIDDEN`: ูุง ุชูุฌุฏ ุตูุงุญูุงุช
- `SESSION_EXPIRED`: ุงูุชูุช ุฌูุณุฉ ุงูุนูู

#### ุฌ. ุงูุชุญูู ูู ุงูุจูุงูุงุช
- `INVALID_INPUT`: ุจูุงูุงุช ุบูุฑ ุตุญูุญุฉ
- `REQUIRED_FIELD`: ุญูู ูุทููุจ
- `INVALID_EMAIL`: ุตูุบุฉ ุจุฑูุฏ ุฅููุชุฑููู ุบูุฑ ุตุญูุญุฉ
- `INVALID_PHONE`: ุตูุบุฉ ุฑูู ูุงุชู ุบูุฑ ุตุญูุญุฉ
- `INVALID_PRICE`: ุณุนุฑ ุบูุฑ ุตุญูุญ
- `INVALID_QUANTITY`: ูููุฉ ุบูุฑ ุตุญูุญุฉ

#### ุฏ. ุฃุฎุทุงุก ููุทู ุงูุนูู
- `INSUFFICIENT_STOCK`: ูููุฉ ุบูุฑ ูุชููุฑุฉ ูู ุงููุฎุฒูู
- `DUPLICATE_ENTRY`: ุณุฌู ููุฌูุฏ ูุณุจูุงู
- `RECORD_NOT_FOUND`: ุงูุณุฌู ุบูุฑ ููุฌูุฏ

#### ูู. ุฃุฎุทุงุก ุงููููุงุช ูุงูุฑูุน
- `FILE_TOO_LARGE`: ุญุฌู ุงูููู ูุจูุฑ ุฌุฏุงู
- `INVALID_FILE_TYPE`: ููุน ููู ุบูุฑ ูุฏุนูู
- `UPLOAD_FAILED`: ูุดู ุชุญููู ุงูููู

#### ู. ุฃุฎุทุงุก ุนุงูุฉ
- `UNEXPECTED_ERROR`: ุฎุทุฃ ุบูุฑ ูุชููุน
- `OPERATION_FAILED`: ูุดูุช ุงูุนูููุฉ
- `OPERATION_SUCCESSFUL`: ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ

**ุงูุฏูุงู:**
- `getErrorMessage(errorKey, lang)`: ุงูุญุตูู ุนูู ุฑุณุงูุฉ ุฎุทุฃ ููุญุฏุฉ
- `formatValidationError(field, errorType, lang)`: ุชูุณูู ุฑุณุงูุฉ ุฎุทุฃ ุงูุชุญูู

---

## ๐ ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู

### ุนุฏุฏ ุงููููุงุช ุงููุณุชุฎุฏูุฉ ููุฅุดุนุงุฑุงุช
- **39 ููู** ูุณุชุฎุฏููู ุฏูุงู ุงูุฅุดุนุงุฑุงุช ุงูููุญุฏุฉ
- **304 ุงุณุชุฎุฏุงู** ูุฏูุงู `toastActionSuccess` ู `toastActionError`

### ุงูุตูุญุงุช ุงูุฑุฆูุณูุฉ ุงููุณุชุฎุฏูุฉ
1. **ุงูููุงุชูุฑ** (`app/invoices/`)
   - ุฅูุดุงุก ูุงุชูุฑุฉ
   - ุชุญุฏูุซ ูุงุชูุฑุฉ
   - ุญุฐู ูุงุชูุฑุฉ
   - ุชุบููุฑ ุญุงูุฉ ุงููุงุชูุฑุฉ

2. **ุงูููุงุชูุฑ ุงููุดุชุฑูุงุช** (`app/bills/`)
   - ุฅูุดุงุก ูุงุชูุฑุฉ ูุดุชุฑูุงุช
   - ุชุญุฏูุซ ูุงุชูุฑุฉ ูุดุชุฑูุงุช
   - ุญุฐู ูุงุชูุฑุฉ ูุดุชุฑูุงุช

3. **ุฅุดุนุงุฑุงุช ุงูููุฑุฏูู** (`app/vendor-credits/`)
   - ุฅูุดุงุก ุฅุดุนุงุฑ ุฏุงุฆู
   - ุชุทุจูู ุฅุดุนุงุฑ ุนูู ูุงุชูุฑุฉ

4. **ุฅุดุนุงุฑุงุช ุงูุนููุงุก** (`app/customer-debit-notes/`)
   - ุฅูุดุงุก ุฅุดุนุงุฑ ูุฏูู

5. **ุทูุจุงุช ุงูุดุฑุงุก** (`app/purchase-orders/`)
   - ุฅูุดุงุก ุทูุจ ุดุฑุงุก
   - ุชุญุฏูุซ ุทูุจ ุดุฑุงุก
   - ุญุฐู ุทูุจ ุดุฑุงุก

6. **ุทูุจุงุช ุงููุจูุนุงุช** (`app/sales-orders/`)
   - ุฅูุดุงุก ุทูุจ ูุจูุนุงุช
   - ุชุญุฏูุซ ุทูุจ ูุจูุนุงุช

7. **ุงููุฑุชุฌุนุงุช** (`app/purchase-returns/`, `app/sales-returns/`)
   - ุฅูุดุงุก ูุฑุชุฌุน
   - ุชุญุฏูุซ ูุฑุชุฌุน

8. **ุงููุฎุฒูู** (`app/inventory/`, `app/inventory-transfers/`)
   - ููู ูุฎุฒูู
   - ุชุญุฏูุซ ุงููุฎุฒูู

9. **ุงูุฅุนุฏุงุฏุงุช** (`app/settings/`)
   - ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
   - ุฅุฏุงุฑุฉ ุงูุถุฑุงุฆุจ
   - ุฅุฏุงุฑุฉ ุดุฑูุงุช ุงูุดุญู
   - ุณุฌู ุงูุชุฏููู

10. **ุงููุฏููุนุงุช** (`app/payments/`)
    - ุฅูุดุงุก ุฏูุนุฉ
    - ุชุญุฏูุซ ุฏูุนุฉ

---

## ๐ง ุขููุฉ ุงูุนูู

### 1. ุฅูุดุงุก ุฅุดุนุงุฑ

```typescript
// ูุซุงู: ุฅุดุนุงุฑ ูุฌุงุญ
import { useToast } from "@/hooks/use-toast"
import { toastActionSuccess } from "@/lib/notifications"

const { toast } = useToast()

// ุงุณุชุฎุฏุงู ุฏุงูุฉ ููุญุฏุฉ
toastActionSuccess(toast, "ุงูุญูุธ", "ุงููุงุชูุฑุฉ", "ar")

// ุฃู ุงุณุชุฎุฏุงู ูุจุงุดุฑ
toast({
  title: "ุชู ุงูุญูุธ",
  description: "ุชู ุญูุธ ุงููุงุชูุฑุฉ ุจูุฌุงุญ"
})
```

### 2. ุฅุดุนุงุฑ ุฎุทุฃ

```typescript
import { toastActionError } from "@/lib/notifications"

// ูุน ุฑุณุงูุฉ ุฎุทุฃ ููุญุฏุฉ
toastActionError(
  toast, 
  "ุงูุญูุธ", 
  "ุงููุงุชูุฑุฉ", 
  undefined, 
  "ar", 
  "INSUFFICIENT_STOCK"
)

// ูุน ุฑุณุงูุฉ ุฎุทุฃ ูุฎุตุตุฉ
toastActionError(
  toast, 
  "ุงูุญูุธ", 
  "ุงููุงุชูุฑุฉ", 
  "ุงููููุฉ ุงููุทููุจุฉ ุบูุฑ ูุชููุฑุฉ", 
  "ar"
)
```

### 3. ุฏูุฑุฉ ุญูุงุฉ ุงูุฅุดุนุงุฑ

1. **ุฅูุดุงุก:** ูุชู ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ ุนุจุฑ `toast()`
2. **ุนุฑุถ:** ูุธูุฑ ุงูุฅุดุนุงุฑ ูู `ToastViewport`
3. **ุฅุฎูุงุก:** ูููู ุฅุฎูุงุคู ูุฏููุงู ุฃู ุชููุงุฆูุงู ุจุนุฏ `TOAST_REMOVE_DELAY`
4. **ุญุฐู:** ูุชู ุญุฐูู ูู ุงูุฐุงูุฑุฉ ุจุนุฏ ุงูุฅุฎูุงุก

---

## โ ุงูููุฒุงุช

### 1. ุฏุนู ุซูุงุฆู ุงููุบุฉ
- โ ุงูุนุฑุจูุฉ (ุงูุชุฑุงุถู)
- โ ุงูุฅูุฌููุฒูุฉ
- โ ุชุจุฏูู ุชููุงุฆู ุญุณุจ ุฅุนุฏุงุฏุงุช ุงููุณุชุฎุฏู

### 2. ุฃููุงุน ุงูุฅุดุนุงุฑุงุช
- โ ูุฌุงุญ (Success) - ุฃุฎุถุฑ/ุฃุฒุฑู
- โ ุฎุทุฃ (Error) - ุฃุญูุฑ
- โ ูุนูููุงุช (Info) - ุฃุฒุฑู

### 3. ุงูุชุฎุตูุต
- โ ุนููุงู ูุฎุตุต
- โ ูุตู ูุฎุตุต
- โ ุฒุฑ ุฅุฌุฑุงุก ุงุฎุชูุงุฑู
- โ ูุฏุฉ ุนุฑุถ ูุงุจูุฉ ููุชุนุฏูู

### 4. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู
- โ ุฅุบูุงู ูุฏูู (X)
- โ ุฅุบูุงู ุชููุงุฆู ุจุนุฏ ูุฏุฉ
- โ ุฅุบูุงู ุจุงูุณุญุจ (Swipe)
- โ ููุถุน ูุชุฌุงูุจ (Responsive)

---

## โ๏ธ ุงููุดุงูู ุงููุญุชููุฉ ูุงูุชูุตูุงุช

### 1. ูุดููุฉ ูุญุชููุฉ: `TOAST_REMOVE_DELAY` ูุจูุฑ ุฌุฏุงู
**ุงูุญุงูุฉ ุงูุญุงููุฉ:** `1000000` (1000 ุซุงููุฉ โ 16.6 ุฏูููุฉ)  
**ุงูุชูุตูุฉ:** ุชูููู ุงููููุฉ ุฅูู `5000` (5 ุซูุงูู) ุฃู `10000` (10 ุซูุงูู)

```typescript
// ูู hooks/use-toast.ts
const TOAST_REMOVE_DELAY = 5000 // 5 ุซูุงูู
```

### 2. ูุดููุฉ ูุญุชููุฉ: `TOAST_LIMIT = 1`
**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ุฅุดุนุงุฑ ูุงุญุฏ ููุท ูู ููุณ ุงูููุช  
**ุงูุชูุตูุฉ:** ุฒูุงุฏุฉ ุฅูู `3` ุฃู `5` ูุนุฑุถ ุนุฏุฉ ุฅุดุนุงุฑุงุช

```typescript
// ูู hooks/use-toast.ts
const TOAST_LIMIT = 3 // 3 ุฅุดุนุงุฑุงุช ูู ููุณ ุงูููุช
```

### 3. ุชุญุณูู ูุญุชูู: ุฅุถุงูุฉ ููุน "ุชุญุฐูุฑ" (Warning)
**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ููุนุงู ููุท (default, destructive)  
**ุงูุชูุตูุฉ:** ุฅุถุงูุฉ ููุน `warning` ููุฅุดุนุงุฑุงุช ุงูุชุญุฐูุฑูุฉ

```typescript
// ูู components/ui/toast.tsx
variants: {
  variant: {
    default: '...',
    destructive: '...',
    warning: 'border-yellow-500 bg-yellow-50 text-yellow-900', // ุฌุฏูุฏ
  },
}
```

### 4. ุชุญุณูู ูุญุชูู: ุฅุถุงูุฉ ุตูุช ููุฅุดุนุงุฑุงุช
**ุงูุชูุตูุฉ:** ุฅุถุงูุฉ ุตูุช ุงุฎุชูุงุฑู ุนูุฏ ุธููุฑ ุฅุดุนุงุฑ ุฎุทุฃ ููู

### 5. ุชุญุณูู ูุญุชูู: ุฅุดุนุงุฑุงุช Push (Browser Notifications)
**ุงูุชูุตูุฉ:** ุฅุถุงูุฉ ุฏุนู ูุฅุดุนุงุฑุงุช ุงููุชุตูุญ ูููุณุชุฎุฏููู ุงููุตุฑุญ ููู

---

## ๐ ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู

### ูุซุงู 1: ุฅูุดุงุก ูุงุชูุฑุฉ
```typescript
try {
  await supabase.from("invoices").insert(data)
  toastActionSuccess(toast, "ุงูุฅูุดุงุก", "ุงููุงุชูุฑุฉ", "ar")
} catch (error) {
  toastActionError(toast, "ุงูุฅูุดุงุก", "ุงููุงุชูุฑุฉ", error.message, "ar")
}
```

### ูุซุงู 2: ุญุฐู ูุงุชูุฑุฉ
```typescript
try {
  await supabase.from("invoices").delete().eq("id", id)
  toastDeleteSuccess(toast, "ุงููุงุชูุฑุฉ", "ar")
} catch (error) {
  toastDeleteError(toast, "ุงููุงุชูุฑุฉ", error.message, "ar")
}
```

### ูุซุงู 3: ุชุญุฏูุซ ูุน ุฑุณุงูุฉ ุฎุทุฃ ููุญุฏุฉ
```typescript
try {
  await updateInvoice(id, data)
  toastActionSuccess(toast, "ุงูุชุญุฏูุซ", "ุงููุงุชูุฑุฉ", "ar")
} catch (error) {
  toastActionError(
    toast, 
    "ุงูุชุญุฏูุซ", 
    "ุงููุงุชูุฑุฉ", 
    undefined, 
    "ar", 
    "INSUFFICIENT_STOCK"
  )
}
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

### โ ุงูููุงุท ุงูุฅูุฌุงุจูุฉ
1. โ ูุธุงู ููุญุฏ ูููุธู
2. โ ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
3. โ ุชูุงูู ุฌูุฏ ูุน ูุธุงู ุฑุณุงุฆู ุงูุฃุฎุทุงุก
4. โ ุงุณุชุฎุฏุงู ูุงุณุน ูู ุงูุชุทุจูู (39 ููู)
5. โ ุณูููุฉ ุงูุงุณุชุฎุฏุงู ูุงูุชุทููุฑ
6. โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฌูุฏุฉ

### ๐ง ููุงุท ุงูุชุญุณูู ุงูููุชุฑุญุฉ
1. โ๏ธ ุชูููู `TOAST_REMOVE_DELAY` ูู 1000 ุซุงููุฉ ุฅูู 5-10 ุซูุงูู
2. โ๏ธ ุฒูุงุฏุฉ `TOAST_LIMIT` ูู 1 ุฅูู 3-5
3. ๐ก ุฅุถุงูุฉ ููุน "ุชุญุฐูุฑ" (Warning)
4. ๐ก ุฅุถุงูุฉ ุตูุช ุงุฎุชูุงุฑู ููุฅุดุนุงุฑุงุช
5. ๐ก ุฅุถุงูุฉ ุฏุนู ูุฅุดุนุงุฑุงุช ุงููุชุตูุญ (Push Notifications)

### ๐ ุงูุชูููู ุงูุนุงู
**ุงูุชูููู:** โญโญโญโญ (4/5)  
**ุงูุญุงูุฉ:** โ ูุนูู ุจุดูู ุฌูุฏ ูุน ุฅููุงููุฉ ุชุญุณููุงุช ุจุณูุทุฉ

---

**ุชู ุฅุนุฏุงุฏ ุงูุชูุฑูุฑ ุจูุงุณุทุฉ:** AI Assistant  
**ุขุฎุฑ ุชุญุฏูุซ:** 2024
